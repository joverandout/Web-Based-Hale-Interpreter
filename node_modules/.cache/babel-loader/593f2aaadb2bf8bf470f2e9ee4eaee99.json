{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport '../services/markerDecorations.js';\nimport './media/editor.css';\nimport * as nls from '../../../nls.js';\nimport * as dom from '../../../base/browser/dom.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable, dispose } from '../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../base/common/network.js';\nimport { EditorConfiguration } from '../config/editorConfiguration.js';\nimport { EditorExtensionsRegistry } from '../editorExtensions.js';\nimport { ICodeEditorService } from '../services/codeEditorService.js';\nimport { View } from '../view/view.js';\nimport { ViewUserInputEvents } from '../view/viewUserInputEvents.js';\nimport { filterValidationDecorations } from '../../common/config/editorOptions.js';\nimport { CursorsController } from '../../common/cursor/cursor.js';\nimport { CursorColumns } from '../../common/core/cursorColumns.js';\nimport { Position } from '../../common/core/position.js';\nimport { Range } from '../../common/core/range.js';\nimport { Selection } from '../../common/core/selection.js';\nimport { InternalEditorAction } from '../../common/editorAction.js';\nimport * as editorCommon from '../../common/editorCommon.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport * as modes from '../../common/languages.js';\nimport { editorUnnecessaryCodeBorder, editorUnnecessaryCodeOpacity } from '../../common/core/editorColorRegistry.js';\nimport { editorErrorBorder, editorErrorForeground, editorHintBorder, editorHintForeground, editorInfoBorder, editorInfoForeground, editorWarningBorder, editorWarningForeground, editorForeground, editorErrorBackground, editorInfoBackground, editorWarningBackground } from '../../../platform/theme/common/colorRegistry.js';\nimport { ViewModel } from '../../common/viewModel/viewModelImpl.js';\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../platform/instantiation/common/serviceCollection.js';\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\nimport { IThemeService, registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\nimport { withNullAsUndefined } from '../../../base/common/types.js';\nimport { MonospaceLineBreaksComputerFactory } from '../../common/viewModel/monospaceLineBreaksComputer.js';\nimport { DOMLineBreaksComputerFactory } from '../view/domLineBreaksComputer.js';\nimport { WordOperations } from '../../common/cursor/cursorWordOperations.js';\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\nimport { applyFontInfo } from '../config/domFontInfo.js';\nlet EDITOR_ID = 0;\n\nclass ModelData {\n  constructor(model, viewModel, view, hasRealView, listenersToRemove) {\n    this.model = model;\n    this.viewModel = viewModel;\n    this.view = view;\n    this.hasRealView = hasRealView;\n    this.listenersToRemove = listenersToRemove;\n  }\n\n  dispose() {\n    dispose(this.listenersToRemove);\n    this.model.onBeforeDetached();\n\n    if (this.hasRealView) {\n      this.view.dispose();\n    }\n\n    this.viewModel.dispose();\n  }\n\n}\n\nlet CodeEditorWidget = class CodeEditorWidget extends Disposable {\n  constructor(domElement, _options, codeEditorWidgetOptions, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService, languageConfigurationService) {\n    super();\n    this.languageConfigurationService = languageConfigurationService; //#region Eventing\n\n    this._onDidDispose = this._register(new Emitter());\n    this.onDidDispose = this._onDidDispose.event;\n    this._onDidChangeModelContent = this._register(new Emitter());\n    this.onDidChangeModelContent = this._onDidChangeModelContent.event;\n    this._onDidChangeModelLanguage = this._register(new Emitter());\n    this.onDidChangeModelLanguage = this._onDidChangeModelLanguage.event;\n    this._onDidChangeModelLanguageConfiguration = this._register(new Emitter());\n    this.onDidChangeModelLanguageConfiguration = this._onDidChangeModelLanguageConfiguration.event;\n    this._onDidChangeModelOptions = this._register(new Emitter());\n    this.onDidChangeModelOptions = this._onDidChangeModelOptions.event;\n    this._onDidChangeModelDecorations = this._register(new Emitter());\n    this.onDidChangeModelDecorations = this._onDidChangeModelDecorations.event;\n    this._onDidChangeConfiguration = this._register(new Emitter());\n    this.onDidChangeConfiguration = this._onDidChangeConfiguration.event;\n    this._onDidChangeModel = this._register(new Emitter());\n    this.onDidChangeModel = this._onDidChangeModel.event;\n    this._onDidChangeCursorPosition = this._register(new Emitter());\n    this.onDidChangeCursorPosition = this._onDidChangeCursorPosition.event;\n    this._onDidChangeCursorSelection = this._register(new Emitter());\n    this.onDidChangeCursorSelection = this._onDidChangeCursorSelection.event;\n    this._onDidAttemptReadOnlyEdit = this._register(new Emitter());\n    this.onDidAttemptReadOnlyEdit = this._onDidAttemptReadOnlyEdit.event;\n    this._onDidLayoutChange = this._register(new Emitter());\n    this.onDidLayoutChange = this._onDidLayoutChange.event;\n    this._editorTextFocus = this._register(new BooleanEventEmitter());\n    this.onDidFocusEditorText = this._editorTextFocus.onDidChangeToTrue;\n    this.onDidBlurEditorText = this._editorTextFocus.onDidChangeToFalse;\n    this._editorWidgetFocus = this._register(new BooleanEventEmitter());\n    this.onDidFocusEditorWidget = this._editorWidgetFocus.onDidChangeToTrue;\n    this.onDidBlurEditorWidget = this._editorWidgetFocus.onDidChangeToFalse;\n    this._onWillType = this._register(new Emitter());\n    this.onWillType = this._onWillType.event;\n    this._onDidType = this._register(new Emitter());\n    this.onDidType = this._onDidType.event;\n    this._onDidCompositionStart = this._register(new Emitter());\n    this.onDidCompositionStart = this._onDidCompositionStart.event;\n    this._onDidCompositionEnd = this._register(new Emitter());\n    this.onDidCompositionEnd = this._onDidCompositionEnd.event;\n    this._onDidPaste = this._register(new Emitter());\n    this.onDidPaste = this._onDidPaste.event;\n    this._onMouseUp = this._register(new Emitter());\n    this.onMouseUp = this._onMouseUp.event;\n    this._onMouseDown = this._register(new Emitter());\n    this.onMouseDown = this._onMouseDown.event;\n    this._onMouseDrag = this._register(new Emitter());\n    this.onMouseDrag = this._onMouseDrag.event;\n    this._onMouseDrop = this._register(new Emitter());\n    this.onMouseDrop = this._onMouseDrop.event;\n    this._onMouseDropCanceled = this._register(new Emitter());\n    this.onMouseDropCanceled = this._onMouseDropCanceled.event;\n    this._onContextMenu = this._register(new Emitter());\n    this.onContextMenu = this._onContextMenu.event;\n    this._onMouseMove = this._register(new Emitter());\n    this.onMouseMove = this._onMouseMove.event;\n    this._onMouseLeave = this._register(new Emitter());\n    this.onMouseLeave = this._onMouseLeave.event;\n    this._onMouseWheel = this._register(new Emitter());\n    this.onMouseWheel = this._onMouseWheel.event;\n    this._onKeyUp = this._register(new Emitter());\n    this.onKeyUp = this._onKeyUp.event;\n    this._onKeyDown = this._register(new Emitter());\n    this.onKeyDown = this._onKeyDown.event;\n    this._onDidContentSizeChange = this._register(new Emitter());\n    this.onDidContentSizeChange = this._onDidContentSizeChange.event;\n    this._onDidScrollChange = this._register(new Emitter());\n    this.onDidScrollChange = this._onDidScrollChange.event;\n    this._onDidChangeViewZones = this._register(new Emitter());\n    this.onDidChangeViewZones = this._onDidChangeViewZones.event;\n    this._onDidChangeHiddenAreas = this._register(new Emitter());\n    this.onDidChangeHiddenAreas = this._onDidChangeHiddenAreas.event;\n    this._bannerDomNode = null;\n    const options = Object.assign({}, _options);\n    this._domElement = domElement;\n    this._overflowWidgetsDomNode = options.overflowWidgetsDomNode;\n    delete options.overflowWidgetsDomNode;\n    this._id = ++EDITOR_ID;\n    this._decorationTypeKeysToIds = {};\n    this._decorationTypeSubtypes = {};\n    this._telemetryData = codeEditorWidgetOptions.telemetryData;\n    this._configuration = this._register(this._createConfiguration(codeEditorWidgetOptions.isSimpleWidget || false, options, accessibilityService));\n\n    this._register(this._configuration.onDidChange(e => {\n      this._onDidChangeConfiguration.fire(e);\n\n      const options = this._configuration.options;\n\n      if (e.hasChanged(131\n      /* layoutInfo */\n      )) {\n        const layoutInfo = options.get(131\n        /* layoutInfo */\n        );\n\n        this._onDidLayoutChange.fire(layoutInfo);\n      }\n    }));\n\n    this._contextKeyService = this._register(contextKeyService.createScoped(this._domElement));\n    this._notificationService = notificationService;\n    this._codeEditorService = codeEditorService;\n    this._commandService = commandService;\n    this._themeService = themeService;\n\n    this._register(new EditorContextKeysManager(this, this._contextKeyService));\n\n    this._register(new EditorModeContext(this, this._contextKeyService));\n\n    this._instantiationService = instantiationService.createChild(new ServiceCollection([IContextKeyService, this._contextKeyService]));\n    this._modelData = null;\n    this._contributions = {};\n    this._actions = {};\n    this._focusTracker = new CodeEditorWidgetFocusTracker(domElement);\n\n    this._register(this._focusTracker.onChange(() => {\n      this._editorWidgetFocus.setValue(this._focusTracker.hasFocus());\n    }));\n\n    this._contentWidgets = {};\n    this._overlayWidgets = {};\n    let contributions;\n\n    if (Array.isArray(codeEditorWidgetOptions.contributions)) {\n      contributions = codeEditorWidgetOptions.contributions;\n    } else {\n      contributions = EditorExtensionsRegistry.getEditorContributions();\n    }\n\n    for (const desc of contributions) {\n      if (this._contributions[desc.id]) {\n        onUnexpectedError(new Error(`Cannot have two contributions with the same id ${desc.id}`));\n        continue;\n      }\n\n      try {\n        const contribution = this._instantiationService.createInstance(desc.ctor, this);\n\n        this._contributions[desc.id] = contribution;\n      } catch (err) {\n        onUnexpectedError(err);\n      }\n    }\n\n    EditorExtensionsRegistry.getEditorActions().forEach(action => {\n      if (this._actions[action.id]) {\n        onUnexpectedError(new Error(`Cannot have two actions with the same id ${action.id}`));\n        return;\n      }\n\n      const internalAction = new InternalEditorAction(action.id, action.label, action.alias, withNullAsUndefined(action.precondition), () => {\n        return this._instantiationService.invokeFunction(accessor => {\n          return Promise.resolve(action.runEditorCommand(accessor, this, null));\n        });\n      }, this._contextKeyService);\n      this._actions[internalAction.id] = internalAction;\n    });\n\n    this._codeEditorService.addCodeEditor(this);\n  } //#endregion\n\n\n  get isSimpleWidget() {\n    return this._configuration.isSimpleWidget;\n  }\n\n  _createConfiguration(isSimpleWidget, options, accessibilityService) {\n    return new EditorConfiguration(isSimpleWidget, options, this._domElement, accessibilityService);\n  }\n\n  getId() {\n    return this.getEditorType() + ':' + this._id;\n  }\n\n  getEditorType() {\n    return editorCommon.EditorType.ICodeEditor;\n  }\n\n  dispose() {\n    this._codeEditorService.removeCodeEditor(this);\n\n    this._focusTracker.dispose();\n\n    const keys = Object.keys(this._contributions);\n\n    for (let i = 0, len = keys.length; i < len; i++) {\n      const contributionId = keys[i];\n\n      this._contributions[contributionId].dispose();\n    }\n\n    this._contributions = {};\n    this._actions = {};\n    this._contentWidgets = {};\n    this._overlayWidgets = {};\n\n    this._removeDecorationTypes();\n\n    this._postDetachModelCleanup(this._detachModel());\n\n    this._onDidDispose.fire();\n\n    super.dispose();\n  }\n\n  invokeWithinContext(fn) {\n    return this._instantiationService.invokeFunction(fn);\n  }\n\n  updateOptions(newOptions) {\n    this._configuration.updateOptions(newOptions || {});\n  }\n\n  getOptions() {\n    return this._configuration.options;\n  }\n\n  getOption(id) {\n    return this._configuration.options.get(id);\n  }\n\n  getRawOptions() {\n    return this._configuration.getRawOptions();\n  }\n\n  getOverflowWidgetsDomNode() {\n    return this._overflowWidgetsDomNode;\n  }\n\n  getConfiguredWordAtPosition(position) {\n    if (!this._modelData) {\n      return null;\n    }\n\n    return WordOperations.getWordAtPosition(this._modelData.model, this._configuration.options.get(117\n    /* wordSeparators */\n    ), position);\n  }\n\n  getValue(options = null) {\n    if (!this._modelData) {\n      return '';\n    }\n\n    const preserveBOM = options && options.preserveBOM ? true : false;\n    let eolPreference = 0\n    /* TextDefined */\n    ;\n\n    if (options && options.lineEnding && options.lineEnding === '\\n') {\n      eolPreference = 1\n      /* LF */\n      ;\n    } else if (options && options.lineEnding && options.lineEnding === '\\r\\n') {\n      eolPreference = 2\n      /* CRLF */\n      ;\n    }\n\n    return this._modelData.model.getValue(eolPreference, preserveBOM);\n  }\n\n  setValue(newValue) {\n    if (!this._modelData) {\n      return;\n    }\n\n    this._modelData.model.setValue(newValue);\n  }\n\n  getModel() {\n    if (!this._modelData) {\n      return null;\n    }\n\n    return this._modelData.model;\n  }\n\n  setModel(_model = null) {\n    const model = _model;\n\n    if (this._modelData === null && model === null) {\n      // Current model is the new model\n      return;\n    }\n\n    if (this._modelData && this._modelData.model === model) {\n      // Current model is the new model\n      return;\n    }\n\n    const hasTextFocus = this.hasTextFocus();\n\n    const detachedModel = this._detachModel();\n\n    this._attachModel(model);\n\n    if (hasTextFocus && this.hasModel()) {\n      this.focus();\n    }\n\n    const e = {\n      oldModelUrl: detachedModel ? detachedModel.uri : null,\n      newModelUrl: model ? model.uri : null\n    };\n\n    this._removeDecorationTypes();\n\n    this._onDidChangeModel.fire(e);\n\n    this._postDetachModelCleanup(detachedModel);\n  }\n\n  _removeDecorationTypes() {\n    this._decorationTypeKeysToIds = {};\n\n    if (this._decorationTypeSubtypes) {\n      for (let decorationType in this._decorationTypeSubtypes) {\n        const subTypes = this._decorationTypeSubtypes[decorationType];\n\n        for (let subType in subTypes) {\n          this._removeDecorationType(decorationType + '-' + subType);\n        }\n      }\n\n      this._decorationTypeSubtypes = {};\n    }\n  }\n\n  getVisibleRanges() {\n    if (!this._modelData) {\n      return [];\n    }\n\n    return this._modelData.viewModel.getVisibleRanges();\n  }\n\n  getVisibleRangesPlusViewportAboveBelow() {\n    if (!this._modelData) {\n      return [];\n    }\n\n    return this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow();\n  }\n\n  getWhitespaces() {\n    if (!this._modelData) {\n      return [];\n    }\n\n    return this._modelData.viewModel.viewLayout.getWhitespaces();\n  }\n\n  static _getVerticalOffsetForPosition(modelData, modelLineNumber, modelColumn) {\n    const modelPosition = modelData.model.validatePosition({\n      lineNumber: modelLineNumber,\n      column: modelColumn\n    });\n    const viewPosition = modelData.viewModel.coordinatesConverter.convertModelPositionToViewPosition(modelPosition);\n    return modelData.viewModel.viewLayout.getVerticalOffsetForLineNumber(viewPosition.lineNumber);\n  }\n\n  getTopForLineNumber(lineNumber) {\n    if (!this._modelData) {\n      return -1;\n    }\n\n    return CodeEditorWidget._getVerticalOffsetForPosition(this._modelData, lineNumber, 1);\n  }\n\n  getTopForPosition(lineNumber, column) {\n    if (!this._modelData) {\n      return -1;\n    }\n\n    return CodeEditorWidget._getVerticalOffsetForPosition(this._modelData, lineNumber, column);\n  }\n\n  setHiddenAreas(ranges) {\n    if (this._modelData) {\n      this._modelData.viewModel.setHiddenAreas(ranges.map(r => Range.lift(r)));\n    }\n  }\n\n  getVisibleColumnFromPosition(rawPosition) {\n    if (!this._modelData) {\n      return rawPosition.column;\n    }\n\n    const position = this._modelData.model.validatePosition(rawPosition);\n\n    const tabSize = this._modelData.model.getOptions().tabSize;\n\n    return CursorColumns.visibleColumnFromColumn(this._modelData.model.getLineContent(position.lineNumber), position.column, tabSize) + 1;\n  }\n\n  getPosition() {\n    if (!this._modelData) {\n      return null;\n    }\n\n    return this._modelData.viewModel.getPosition();\n  }\n\n  setPosition(position) {\n    if (!this._modelData) {\n      return;\n    }\n\n    if (!Position.isIPosition(position)) {\n      throw new Error('Invalid arguments');\n    }\n\n    this._modelData.viewModel.setSelections('api', [{\n      selectionStartLineNumber: position.lineNumber,\n      selectionStartColumn: position.column,\n      positionLineNumber: position.lineNumber,\n      positionColumn: position.column\n    }]);\n  }\n\n  _sendRevealRange(modelRange, verticalType, revealHorizontal, scrollType) {\n    if (!this._modelData) {\n      return;\n    }\n\n    if (!Range.isIRange(modelRange)) {\n      throw new Error('Invalid arguments');\n    }\n\n    const validatedModelRange = this._modelData.model.validateRange(modelRange);\n\n    const viewRange = this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(validatedModelRange);\n\n    this._modelData.viewModel.revealRange('api', revealHorizontal, viewRange, verticalType, scrollType);\n  }\n\n  revealLine(lineNumber, scrollType = 0\n  /* Smooth */\n  ) {\n    this._revealLine(lineNumber, 0\n    /* Simple */\n    , scrollType);\n  }\n\n  revealLineInCenter(lineNumber, scrollType = 0\n  /* Smooth */\n  ) {\n    this._revealLine(lineNumber, 1\n    /* Center */\n    , scrollType);\n  }\n\n  revealLineInCenterIfOutsideViewport(lineNumber, scrollType = 0\n  /* Smooth */\n  ) {\n    this._revealLine(lineNumber, 2\n    /* CenterIfOutsideViewport */\n    , scrollType);\n  }\n\n  revealLineNearTop(lineNumber, scrollType = 0\n  /* Smooth */\n  ) {\n    this._revealLine(lineNumber, 5\n    /* NearTop */\n    , scrollType);\n  }\n\n  _revealLine(lineNumber, revealType, scrollType) {\n    if (typeof lineNumber !== 'number') {\n      throw new Error('Invalid arguments');\n    }\n\n    this._sendRevealRange(new Range(lineNumber, 1, lineNumber, 1), revealType, false, scrollType);\n  }\n\n  revealPosition(position, scrollType = 0\n  /* Smooth */\n  ) {\n    this._revealPosition(position, 0\n    /* Simple */\n    , true, scrollType);\n  }\n\n  revealPositionInCenter(position, scrollType = 0\n  /* Smooth */\n  ) {\n    this._revealPosition(position, 1\n    /* Center */\n    , true, scrollType);\n  }\n\n  revealPositionInCenterIfOutsideViewport(position, scrollType = 0\n  /* Smooth */\n  ) {\n    this._revealPosition(position, 2\n    /* CenterIfOutsideViewport */\n    , true, scrollType);\n  }\n\n  revealPositionNearTop(position, scrollType = 0\n  /* Smooth */\n  ) {\n    this._revealPosition(position, 5\n    /* NearTop */\n    , true, scrollType);\n  }\n\n  _revealPosition(position, verticalType, revealHorizontal, scrollType) {\n    if (!Position.isIPosition(position)) {\n      throw new Error('Invalid arguments');\n    }\n\n    this._sendRevealRange(new Range(position.lineNumber, position.column, position.lineNumber, position.column), verticalType, revealHorizontal, scrollType);\n  }\n\n  getSelection() {\n    if (!this._modelData) {\n      return null;\n    }\n\n    return this._modelData.viewModel.getSelection();\n  }\n\n  getSelections() {\n    if (!this._modelData) {\n      return null;\n    }\n\n    return this._modelData.viewModel.getSelections();\n  }\n\n  setSelection(something) {\n    const isSelection = Selection.isISelection(something);\n    const isRange = Range.isIRange(something);\n\n    if (!isSelection && !isRange) {\n      throw new Error('Invalid arguments');\n    }\n\n    if (isSelection) {\n      this._setSelectionImpl(something);\n    } else if (isRange) {\n      // act as if it was an IRange\n      const selection = {\n        selectionStartLineNumber: something.startLineNumber,\n        selectionStartColumn: something.startColumn,\n        positionLineNumber: something.endLineNumber,\n        positionColumn: something.endColumn\n      };\n\n      this._setSelectionImpl(selection);\n    }\n  }\n\n  _setSelectionImpl(sel) {\n    if (!this._modelData) {\n      return;\n    }\n\n    const selection = new Selection(sel.selectionStartLineNumber, sel.selectionStartColumn, sel.positionLineNumber, sel.positionColumn);\n\n    this._modelData.viewModel.setSelections('api', [selection]);\n  }\n\n  revealLines(startLineNumber, endLineNumber, scrollType = 0\n  /* Smooth */\n  ) {\n    this._revealLines(startLineNumber, endLineNumber, 0\n    /* Simple */\n    , scrollType);\n  }\n\n  revealLinesInCenter(startLineNumber, endLineNumber, scrollType = 0\n  /* Smooth */\n  ) {\n    this._revealLines(startLineNumber, endLineNumber, 1\n    /* Center */\n    , scrollType);\n  }\n\n  revealLinesInCenterIfOutsideViewport(startLineNumber, endLineNumber, scrollType = 0\n  /* Smooth */\n  ) {\n    this._revealLines(startLineNumber, endLineNumber, 2\n    /* CenterIfOutsideViewport */\n    , scrollType);\n  }\n\n  revealLinesNearTop(startLineNumber, endLineNumber, scrollType = 0\n  /* Smooth */\n  ) {\n    this._revealLines(startLineNumber, endLineNumber, 5\n    /* NearTop */\n    , scrollType);\n  }\n\n  _revealLines(startLineNumber, endLineNumber, verticalType, scrollType) {\n    if (typeof startLineNumber !== 'number' || typeof endLineNumber !== 'number') {\n      throw new Error('Invalid arguments');\n    }\n\n    this._sendRevealRange(new Range(startLineNumber, 1, endLineNumber, 1), verticalType, false, scrollType);\n  }\n\n  revealRange(range, scrollType = 0\n  /* Smooth */\n  , revealVerticalInCenter = false, revealHorizontal = true) {\n    this._revealRange(range, revealVerticalInCenter ? 1\n    /* Center */\n    : 0\n    /* Simple */\n    , revealHorizontal, scrollType);\n  }\n\n  revealRangeInCenter(range, scrollType = 0\n  /* Smooth */\n  ) {\n    this._revealRange(range, 1\n    /* Center */\n    , true, scrollType);\n  }\n\n  revealRangeInCenterIfOutsideViewport(range, scrollType = 0\n  /* Smooth */\n  ) {\n    this._revealRange(range, 2\n    /* CenterIfOutsideViewport */\n    , true, scrollType);\n  }\n\n  revealRangeNearTop(range, scrollType = 0\n  /* Smooth */\n  ) {\n    this._revealRange(range, 5\n    /* NearTop */\n    , true, scrollType);\n  }\n\n  revealRangeNearTopIfOutsideViewport(range, scrollType = 0\n  /* Smooth */\n  ) {\n    this._revealRange(range, 6\n    /* NearTopIfOutsideViewport */\n    , true, scrollType);\n  }\n\n  revealRangeAtTop(range, scrollType = 0\n  /* Smooth */\n  ) {\n    this._revealRange(range, 3\n    /* Top */\n    , true, scrollType);\n  }\n\n  _revealRange(range, verticalType, revealHorizontal, scrollType) {\n    if (!Range.isIRange(range)) {\n      throw new Error('Invalid arguments');\n    }\n\n    this._sendRevealRange(Range.lift(range), verticalType, revealHorizontal, scrollType);\n  }\n\n  setSelections(ranges, source = 'api', reason = 0\n  /* NotSet */\n  ) {\n    if (!this._modelData) {\n      return;\n    }\n\n    if (!ranges || ranges.length === 0) {\n      throw new Error('Invalid arguments');\n    }\n\n    for (let i = 0, len = ranges.length; i < len; i++) {\n      if (!Selection.isISelection(ranges[i])) {\n        throw new Error('Invalid arguments');\n      }\n    }\n\n    this._modelData.viewModel.setSelections(source, ranges, reason);\n  }\n\n  getContentWidth() {\n    if (!this._modelData) {\n      return -1;\n    }\n\n    return this._modelData.viewModel.viewLayout.getContentWidth();\n  }\n\n  getScrollWidth() {\n    if (!this._modelData) {\n      return -1;\n    }\n\n    return this._modelData.viewModel.viewLayout.getScrollWidth();\n  }\n\n  getScrollLeft() {\n    if (!this._modelData) {\n      return -1;\n    }\n\n    return this._modelData.viewModel.viewLayout.getCurrentScrollLeft();\n  }\n\n  getContentHeight() {\n    if (!this._modelData) {\n      return -1;\n    }\n\n    return this._modelData.viewModel.viewLayout.getContentHeight();\n  }\n\n  getScrollHeight() {\n    if (!this._modelData) {\n      return -1;\n    }\n\n    return this._modelData.viewModel.viewLayout.getScrollHeight();\n  }\n\n  getScrollTop() {\n    if (!this._modelData) {\n      return -1;\n    }\n\n    return this._modelData.viewModel.viewLayout.getCurrentScrollTop();\n  }\n\n  setScrollLeft(newScrollLeft, scrollType = 1\n  /* Immediate */\n  ) {\n    if (!this._modelData) {\n      return;\n    }\n\n    if (typeof newScrollLeft !== 'number') {\n      throw new Error('Invalid arguments');\n    }\n\n    this._modelData.viewModel.setScrollPosition({\n      scrollLeft: newScrollLeft\n    }, scrollType);\n  }\n\n  setScrollTop(newScrollTop, scrollType = 1\n  /* Immediate */\n  ) {\n    if (!this._modelData) {\n      return;\n    }\n\n    if (typeof newScrollTop !== 'number') {\n      throw new Error('Invalid arguments');\n    }\n\n    this._modelData.viewModel.setScrollPosition({\n      scrollTop: newScrollTop\n    }, scrollType);\n  }\n\n  setScrollPosition(position, scrollType = 1\n  /* Immediate */\n  ) {\n    if (!this._modelData) {\n      return;\n    }\n\n    this._modelData.viewModel.setScrollPosition(position, scrollType);\n  }\n\n  saveViewState() {\n    if (!this._modelData) {\n      return null;\n    }\n\n    const contributionsState = {};\n    const keys = Object.keys(this._contributions);\n\n    for (const id of keys) {\n      const contribution = this._contributions[id];\n\n      if (typeof contribution.saveViewState === 'function') {\n        contributionsState[id] = contribution.saveViewState();\n      }\n    }\n\n    const cursorState = this._modelData.viewModel.saveCursorState();\n\n    const viewState = this._modelData.viewModel.saveState();\n\n    return {\n      cursorState: cursorState,\n      viewState: viewState,\n      contributionsState: contributionsState\n    };\n  }\n\n  restoreViewState(s) {\n    if (!this._modelData || !this._modelData.hasRealView) {\n      return;\n    }\n\n    const codeEditorState = s;\n\n    if (codeEditorState && codeEditorState.cursorState && codeEditorState.viewState) {\n      const cursorState = codeEditorState.cursorState;\n\n      if (Array.isArray(cursorState)) {\n        this._modelData.viewModel.restoreCursorState(cursorState);\n      } else {\n        // Backwards compatibility\n        this._modelData.viewModel.restoreCursorState([cursorState]);\n      }\n\n      const contributionsState = codeEditorState.contributionsState || {};\n      const keys = Object.keys(this._contributions);\n\n      for (let i = 0, len = keys.length; i < len; i++) {\n        const id = keys[i];\n        const contribution = this._contributions[id];\n\n        if (typeof contribution.restoreViewState === 'function') {\n          contribution.restoreViewState(contributionsState[id]);\n        }\n      }\n\n      const reducedState = this._modelData.viewModel.reduceRestoreState(codeEditorState.viewState);\n\n      this._modelData.view.restoreState(reducedState);\n    }\n  }\n\n  getContribution(id) {\n    return this._contributions[id] || null;\n  }\n\n  getActions() {\n    const result = [];\n    const keys = Object.keys(this._actions);\n\n    for (let i = 0, len = keys.length; i < len; i++) {\n      const id = keys[i];\n      result.push(this._actions[id]);\n    }\n\n    return result;\n  }\n\n  getSupportedActions() {\n    let result = this.getActions();\n    result = result.filter(action => action.isSupported());\n    return result;\n  }\n\n  getAction(id) {\n    return this._actions[id] || null;\n  }\n\n  trigger(source, handlerId, payload) {\n    payload = payload || {};\n\n    switch (handlerId) {\n      case \"compositionStart\"\n      /* CompositionStart */\n      :\n        this._startComposition();\n\n        return;\n\n      case \"compositionEnd\"\n      /* CompositionEnd */\n      :\n        this._endComposition(source);\n\n        return;\n\n      case \"type\"\n      /* Type */\n      :\n        {\n          const args = payload;\n\n          this._type(source, args.text || '');\n\n          return;\n        }\n\n      case \"replacePreviousChar\"\n      /* ReplacePreviousChar */\n      :\n        {\n          const args = payload;\n\n          this._compositionType(source, args.text || '', args.replaceCharCnt || 0, 0, 0);\n\n          return;\n        }\n\n      case \"compositionType\"\n      /* CompositionType */\n      :\n        {\n          const args = payload;\n\n          this._compositionType(source, args.text || '', args.replacePrevCharCnt || 0, args.replaceNextCharCnt || 0, args.positionDelta || 0);\n\n          return;\n        }\n\n      case \"paste\"\n      /* Paste */\n      :\n        {\n          const args = payload;\n\n          this._paste(source, args.text || '', args.pasteOnNewLine || false, args.multicursorText || null, args.mode || null);\n\n          return;\n        }\n\n      case \"cut\"\n      /* Cut */\n      :\n        this._cut(source);\n\n        return;\n    }\n\n    const action = this.getAction(handlerId);\n\n    if (action) {\n      Promise.resolve(action.run()).then(undefined, onUnexpectedError);\n      return;\n    }\n\n    if (!this._modelData) {\n      return;\n    }\n\n    if (this._triggerEditorCommand(source, handlerId, payload)) {\n      return;\n    }\n\n    this._triggerCommand(handlerId, payload);\n  }\n\n  _triggerCommand(handlerId, payload) {\n    this._commandService.executeCommand(handlerId, payload);\n  }\n\n  _startComposition() {\n    if (!this._modelData) {\n      return;\n    }\n\n    this._modelData.viewModel.startComposition();\n\n    this._onDidCompositionStart.fire();\n  }\n\n  _endComposition(source) {\n    if (!this._modelData) {\n      return;\n    }\n\n    this._modelData.viewModel.endComposition(source);\n\n    this._onDidCompositionEnd.fire();\n  }\n\n  _type(source, text) {\n    if (!this._modelData || text.length === 0) {\n      return;\n    }\n\n    if (source === 'keyboard') {\n      this._onWillType.fire(text);\n    }\n\n    this._modelData.viewModel.type(text, source);\n\n    if (source === 'keyboard') {\n      this._onDidType.fire(text);\n    }\n  }\n\n  _compositionType(source, text, replacePrevCharCnt, replaceNextCharCnt, positionDelta) {\n    if (!this._modelData) {\n      return;\n    }\n\n    this._modelData.viewModel.compositionType(text, replacePrevCharCnt, replaceNextCharCnt, positionDelta, source);\n  }\n\n  _paste(source, text, pasteOnNewLine, multicursorText, mode) {\n    if (!this._modelData || text.length === 0) {\n      return;\n    }\n\n    const startPosition = this._modelData.viewModel.getSelection().getStartPosition();\n\n    this._modelData.viewModel.paste(text, pasteOnNewLine, multicursorText, source);\n\n    const endPosition = this._modelData.viewModel.getSelection().getStartPosition();\n\n    if (source === 'keyboard') {\n      this._onDidPaste.fire({\n        range: new Range(startPosition.lineNumber, startPosition.column, endPosition.lineNumber, endPosition.column),\n        languageId: mode\n      });\n    }\n  }\n\n  _cut(source) {\n    if (!this._modelData) {\n      return;\n    }\n\n    this._modelData.viewModel.cut(source);\n  }\n\n  _triggerEditorCommand(source, handlerId, payload) {\n    const command = EditorExtensionsRegistry.getEditorCommand(handlerId);\n\n    if (command) {\n      payload = payload || {};\n      payload.source = source;\n\n      this._instantiationService.invokeFunction(accessor => {\n        Promise.resolve(command.runEditorCommand(accessor, this, payload)).then(undefined, onUnexpectedError);\n      });\n\n      return true;\n    }\n\n    return false;\n  }\n\n  _getViewModel() {\n    if (!this._modelData) {\n      return null;\n    }\n\n    return this._modelData.viewModel;\n  }\n\n  pushUndoStop() {\n    if (!this._modelData) {\n      return false;\n    }\n\n    if (this._configuration.options.get(81\n    /* readOnly */\n    )) {\n      // read only editor => sorry!\n      return false;\n    }\n\n    this._modelData.model.pushStackElement();\n\n    return true;\n  }\n\n  popUndoStop() {\n    if (!this._modelData) {\n      return false;\n    }\n\n    if (this._configuration.options.get(81\n    /* readOnly */\n    )) {\n      // read only editor => sorry!\n      return false;\n    }\n\n    this._modelData.model.popStackElement();\n\n    return true;\n  }\n\n  executeEdits(source, edits, endCursorState) {\n    if (!this._modelData) {\n      return false;\n    }\n\n    if (this._configuration.options.get(81\n    /* readOnly */\n    )) {\n      // read only editor => sorry!\n      return false;\n    }\n\n    let cursorStateComputer;\n\n    if (!endCursorState) {\n      cursorStateComputer = () => null;\n    } else if (Array.isArray(endCursorState)) {\n      cursorStateComputer = () => endCursorState;\n    } else {\n      cursorStateComputer = endCursorState;\n    }\n\n    this._modelData.viewModel.executeEdits(source, edits, cursorStateComputer);\n\n    return true;\n  }\n\n  executeCommand(source, command) {\n    if (!this._modelData) {\n      return;\n    }\n\n    this._modelData.viewModel.executeCommand(command, source);\n  }\n\n  executeCommands(source, commands) {\n    if (!this._modelData) {\n      return;\n    }\n\n    this._modelData.viewModel.executeCommands(commands, source);\n  }\n\n  changeDecorations(callback) {\n    if (!this._modelData) {\n      // callback will not be called\n      return null;\n    }\n\n    return this._modelData.model.changeDecorations(callback, this._id);\n  }\n\n  getLineDecorations(lineNumber) {\n    if (!this._modelData) {\n      return null;\n    }\n\n    return this._modelData.model.getLineDecorations(lineNumber, this._id, filterValidationDecorations(this._configuration.options));\n  }\n\n  getDecorationsInRange(range) {\n    if (!this._modelData) {\n      return null;\n    }\n\n    return this._modelData.model.getDecorationsInRange(range, this._id, filterValidationDecorations(this._configuration.options));\n  }\n\n  deltaDecorations(oldDecorations, newDecorations) {\n    if (!this._modelData) {\n      return [];\n    }\n\n    if (oldDecorations.length === 0 && newDecorations.length === 0) {\n      return oldDecorations;\n    }\n\n    return this._modelData.model.deltaDecorations(oldDecorations, newDecorations, this._id);\n  }\n\n  removeDecorations(decorationTypeKey) {\n    // remove decorations for type and sub type\n    const oldDecorationsIds = this._decorationTypeKeysToIds[decorationTypeKey];\n\n    if (oldDecorationsIds) {\n      this.deltaDecorations(oldDecorationsIds, []);\n    }\n\n    if (this._decorationTypeKeysToIds.hasOwnProperty(decorationTypeKey)) {\n      delete this._decorationTypeKeysToIds[decorationTypeKey];\n    }\n\n    if (this._decorationTypeSubtypes.hasOwnProperty(decorationTypeKey)) {\n      delete this._decorationTypeSubtypes[decorationTypeKey];\n    }\n  }\n\n  getLayoutInfo() {\n    const options = this._configuration.options;\n    const layoutInfo = options.get(131\n    /* layoutInfo */\n    );\n    return layoutInfo;\n  }\n\n  createOverviewRuler(cssClassName) {\n    if (!this._modelData || !this._modelData.hasRealView) {\n      return null;\n    }\n\n    return this._modelData.view.createOverviewRuler(cssClassName);\n  }\n\n  getContainerDomNode() {\n    return this._domElement;\n  }\n\n  getDomNode() {\n    if (!this._modelData || !this._modelData.hasRealView) {\n      return null;\n    }\n\n    return this._modelData.view.domNode.domNode;\n  }\n\n  delegateVerticalScrollbarMouseDown(browserEvent) {\n    if (!this._modelData || !this._modelData.hasRealView) {\n      return;\n    }\n\n    this._modelData.view.delegateVerticalScrollbarMouseDown(browserEvent);\n  }\n\n  layout(dimension) {\n    this._configuration.observeContainer(dimension);\n\n    this.render();\n  }\n\n  focus() {\n    if (!this._modelData || !this._modelData.hasRealView) {\n      return;\n    }\n\n    this._modelData.view.focus();\n  }\n\n  hasTextFocus() {\n    if (!this._modelData || !this._modelData.hasRealView) {\n      return false;\n    }\n\n    return this._modelData.view.isFocused();\n  }\n\n  hasWidgetFocus() {\n    return this._focusTracker && this._focusTracker.hasFocus();\n  }\n\n  addContentWidget(widget) {\n    const widgetData = {\n      widget: widget,\n      position: widget.getPosition()\n    };\n\n    if (this._contentWidgets.hasOwnProperty(widget.getId())) {\n      console.warn('Overwriting a content widget with the same id.');\n    }\n\n    this._contentWidgets[widget.getId()] = widgetData;\n\n    if (this._modelData && this._modelData.hasRealView) {\n      this._modelData.view.addContentWidget(widgetData);\n    }\n  }\n\n  layoutContentWidget(widget) {\n    const widgetId = widget.getId();\n\n    if (this._contentWidgets.hasOwnProperty(widgetId)) {\n      const widgetData = this._contentWidgets[widgetId];\n      widgetData.position = widget.getPosition();\n\n      if (this._modelData && this._modelData.hasRealView) {\n        this._modelData.view.layoutContentWidget(widgetData);\n      }\n    }\n  }\n\n  removeContentWidget(widget) {\n    const widgetId = widget.getId();\n\n    if (this._contentWidgets.hasOwnProperty(widgetId)) {\n      const widgetData = this._contentWidgets[widgetId];\n      delete this._contentWidgets[widgetId];\n\n      if (this._modelData && this._modelData.hasRealView) {\n        this._modelData.view.removeContentWidget(widgetData);\n      }\n    }\n  }\n\n  addOverlayWidget(widget) {\n    const widgetData = {\n      widget: widget,\n      position: widget.getPosition()\n    };\n\n    if (this._overlayWidgets.hasOwnProperty(widget.getId())) {\n      console.warn('Overwriting an overlay widget with the same id.');\n    }\n\n    this._overlayWidgets[widget.getId()] = widgetData;\n\n    if (this._modelData && this._modelData.hasRealView) {\n      this._modelData.view.addOverlayWidget(widgetData);\n    }\n  }\n\n  layoutOverlayWidget(widget) {\n    const widgetId = widget.getId();\n\n    if (this._overlayWidgets.hasOwnProperty(widgetId)) {\n      const widgetData = this._overlayWidgets[widgetId];\n      widgetData.position = widget.getPosition();\n\n      if (this._modelData && this._modelData.hasRealView) {\n        this._modelData.view.layoutOverlayWidget(widgetData);\n      }\n    }\n  }\n\n  removeOverlayWidget(widget) {\n    const widgetId = widget.getId();\n\n    if (this._overlayWidgets.hasOwnProperty(widgetId)) {\n      const widgetData = this._overlayWidgets[widgetId];\n      delete this._overlayWidgets[widgetId];\n\n      if (this._modelData && this._modelData.hasRealView) {\n        this._modelData.view.removeOverlayWidget(widgetData);\n      }\n    }\n  }\n\n  changeViewZones(callback) {\n    if (!this._modelData || !this._modelData.hasRealView) {\n      return;\n    }\n\n    this._modelData.view.change(callback);\n  }\n\n  getTargetAtClientPoint(clientX, clientY) {\n    if (!this._modelData || !this._modelData.hasRealView) {\n      return null;\n    }\n\n    return this._modelData.view.getTargetAtClientPoint(clientX, clientY);\n  }\n\n  getScrolledVisiblePosition(rawPosition) {\n    if (!this._modelData || !this._modelData.hasRealView) {\n      return null;\n    }\n\n    const position = this._modelData.model.validatePosition(rawPosition);\n\n    const options = this._configuration.options;\n    const layoutInfo = options.get(131\n    /* layoutInfo */\n    );\n    const top = CodeEditorWidget._getVerticalOffsetForPosition(this._modelData, position.lineNumber, position.column) - this.getScrollTop();\n    const left = this._modelData.view.getOffsetForColumn(position.lineNumber, position.column) + layoutInfo.glyphMarginWidth + layoutInfo.lineNumbersWidth + layoutInfo.decorationsWidth - this.getScrollLeft();\n    return {\n      top: top,\n      left: left,\n      height: options.get(59\n      /* lineHeight */\n      )\n    };\n  }\n\n  getOffsetForColumn(lineNumber, column) {\n    if (!this._modelData || !this._modelData.hasRealView) {\n      return -1;\n    }\n\n    return this._modelData.view.getOffsetForColumn(lineNumber, column);\n  }\n\n  render(forceRedraw = false) {\n    if (!this._modelData || !this._modelData.hasRealView) {\n      return;\n    }\n\n    this._modelData.view.render(true, forceRedraw);\n  }\n\n  setAriaOptions(options) {\n    if (!this._modelData || !this._modelData.hasRealView) {\n      return;\n    }\n\n    this._modelData.view.setAriaOptions(options);\n  }\n\n  applyFontInfo(target) {\n    applyFontInfo(target, this._configuration.options.get(44\n    /* fontInfo */\n    ));\n  }\n\n  setBanner(domNode, domNodeHeight) {\n    if (this._bannerDomNode && this._domElement.contains(this._bannerDomNode)) {\n      this._domElement.removeChild(this._bannerDomNode);\n    }\n\n    this._bannerDomNode = domNode;\n\n    this._configuration.setReservedHeight(domNode ? domNodeHeight : 0);\n\n    if (this._bannerDomNode) {\n      this._domElement.prepend(this._bannerDomNode);\n    }\n  }\n\n  _attachModel(model) {\n    if (!model) {\n      this._modelData = null;\n      return;\n    }\n\n    const listenersToRemove = [];\n\n    this._domElement.setAttribute('data-mode-id', model.getLanguageId());\n\n    this._configuration.setIsDominatedByLongLines(model.isDominatedByLongLines());\n\n    this._configuration.setModelLineCount(model.getLineCount());\n\n    model.onBeforeAttached();\n    const viewModel = new ViewModel(this._id, this._configuration, model, DOMLineBreaksComputerFactory.create(), MonospaceLineBreaksComputerFactory.create(this._configuration.options), callback => dom.scheduleAtNextAnimationFrame(callback), this.languageConfigurationService);\n    listenersToRemove.push(model.onDidChangeDecorations(e => this._onDidChangeModelDecorations.fire(e)));\n    listenersToRemove.push(model.onDidChangeLanguage(e => {\n      this._domElement.setAttribute('data-mode-id', model.getLanguageId());\n\n      this._onDidChangeModelLanguage.fire(e);\n    }));\n    listenersToRemove.push(model.onDidChangeLanguageConfiguration(e => this._onDidChangeModelLanguageConfiguration.fire(e)));\n    listenersToRemove.push(model.onDidChangeContent(e => this._onDidChangeModelContent.fire(e)));\n    listenersToRemove.push(model.onDidChangeOptions(e => this._onDidChangeModelOptions.fire(e))); // Someone might destroy the model from under the editor, so prevent any exceptions by setting a null model\n\n    listenersToRemove.push(model.onWillDispose(() => this.setModel(null)));\n    listenersToRemove.push(viewModel.onEvent(e => {\n      switch (e.kind) {\n        case 0\n        /* ContentSizeChanged */\n        :\n          this._onDidContentSizeChange.fire(e);\n\n          break;\n\n        case 1\n        /* FocusChanged */\n        :\n          this._editorTextFocus.setValue(e.hasFocus);\n\n          break;\n\n        case 2\n        /* ScrollChanged */\n        :\n          this._onDidScrollChange.fire(e);\n\n          break;\n\n        case 3\n        /* ViewZonesChanged */\n        :\n          this._onDidChangeViewZones.fire();\n\n          break;\n\n        case 4\n        /* HiddenAreasChanged */\n        :\n          this._onDidChangeHiddenAreas.fire();\n\n          break;\n\n        case 5\n        /* ReadOnlyEditAttempt */\n        :\n          this._onDidAttemptReadOnlyEdit.fire();\n\n          break;\n\n        case 6\n        /* CursorStateChanged */\n        :\n          {\n            if (e.reachedMaxCursorCount) {\n              this._notificationService.warn(nls.localize('cursors.maximum', \"The number of cursors has been limited to {0}.\", CursorsController.MAX_CURSOR_COUNT));\n            }\n\n            const positions = [];\n\n            for (let i = 0, len = e.selections.length; i < len; i++) {\n              positions[i] = e.selections[i].getPosition();\n            }\n\n            const e1 = {\n              position: positions[0],\n              secondaryPositions: positions.slice(1),\n              reason: e.reason,\n              source: e.source\n            };\n\n            this._onDidChangeCursorPosition.fire(e1);\n\n            const e2 = {\n              selection: e.selections[0],\n              secondarySelections: e.selections.slice(1),\n              modelVersionId: e.modelVersionId,\n              oldSelections: e.oldSelections,\n              oldModelVersionId: e.oldModelVersionId,\n              source: e.source,\n              reason: e.reason\n            };\n\n            this._onDidChangeCursorSelection.fire(e2);\n\n            break;\n          }\n      }\n    }));\n\n    const [view, hasRealView] = this._createView(viewModel);\n\n    if (hasRealView) {\n      this._domElement.appendChild(view.domNode.domNode);\n\n      let keys = Object.keys(this._contentWidgets);\n\n      for (let i = 0, len = keys.length; i < len; i++) {\n        const widgetId = keys[i];\n        view.addContentWidget(this._contentWidgets[widgetId]);\n      }\n\n      keys = Object.keys(this._overlayWidgets);\n\n      for (let i = 0, len = keys.length; i < len; i++) {\n        const widgetId = keys[i];\n        view.addOverlayWidget(this._overlayWidgets[widgetId]);\n      }\n\n      view.render(false, true);\n      view.domNode.domNode.setAttribute('data-uri', model.uri.toString());\n    }\n\n    this._modelData = new ModelData(model, viewModel, view, hasRealView, listenersToRemove);\n  }\n\n  _createView(viewModel) {\n    let commandDelegate;\n\n    if (this.isSimpleWidget) {\n      commandDelegate = {\n        paste: (text, pasteOnNewLine, multicursorText, mode) => {\n          this._paste('keyboard', text, pasteOnNewLine, multicursorText, mode);\n        },\n        type: text => {\n          this._type('keyboard', text);\n        },\n        compositionType: (text, replacePrevCharCnt, replaceNextCharCnt, positionDelta) => {\n          this._compositionType('keyboard', text, replacePrevCharCnt, replaceNextCharCnt, positionDelta);\n        },\n        startComposition: () => {\n          this._startComposition();\n        },\n        endComposition: () => {\n          this._endComposition('keyboard');\n        },\n        cut: () => {\n          this._cut('keyboard');\n        }\n      };\n    } else {\n      commandDelegate = {\n        paste: (text, pasteOnNewLine, multicursorText, mode) => {\n          const payload = {\n            text,\n            pasteOnNewLine,\n            multicursorText,\n            mode\n          };\n\n          this._commandService.executeCommand(\"paste\"\n          /* Paste */\n          , payload);\n        },\n        type: text => {\n          const payload = {\n            text\n          };\n\n          this._commandService.executeCommand(\"type\"\n          /* Type */\n          , payload);\n        },\n        compositionType: (text, replacePrevCharCnt, replaceNextCharCnt, positionDelta) => {\n          // Try if possible to go through the existing `replacePreviousChar` command\n          if (replaceNextCharCnt || positionDelta) {\n            // must be handled through the new command\n            const payload = {\n              text,\n              replacePrevCharCnt,\n              replaceNextCharCnt,\n              positionDelta\n            };\n\n            this._commandService.executeCommand(\"compositionType\"\n            /* CompositionType */\n            , payload);\n          } else {\n            const payload = {\n              text,\n              replaceCharCnt: replacePrevCharCnt\n            };\n\n            this._commandService.executeCommand(\"replacePreviousChar\"\n            /* ReplacePreviousChar */\n            , payload);\n          }\n        },\n        startComposition: () => {\n          this._commandService.executeCommand(\"compositionStart\"\n          /* CompositionStart */\n          , {});\n        },\n        endComposition: () => {\n          this._commandService.executeCommand(\"compositionEnd\"\n          /* CompositionEnd */\n          , {});\n        },\n        cut: () => {\n          this._commandService.executeCommand(\"cut\"\n          /* Cut */\n          , {});\n        }\n      };\n    }\n\n    const viewUserInputEvents = new ViewUserInputEvents(viewModel.coordinatesConverter);\n\n    viewUserInputEvents.onKeyDown = e => this._onKeyDown.fire(e);\n\n    viewUserInputEvents.onKeyUp = e => this._onKeyUp.fire(e);\n\n    viewUserInputEvents.onContextMenu = e => this._onContextMenu.fire(e);\n\n    viewUserInputEvents.onMouseMove = e => this._onMouseMove.fire(e);\n\n    viewUserInputEvents.onMouseLeave = e => this._onMouseLeave.fire(e);\n\n    viewUserInputEvents.onMouseDown = e => this._onMouseDown.fire(e);\n\n    viewUserInputEvents.onMouseUp = e => this._onMouseUp.fire(e);\n\n    viewUserInputEvents.onMouseDrag = e => this._onMouseDrag.fire(e);\n\n    viewUserInputEvents.onMouseDrop = e => this._onMouseDrop.fire(e);\n\n    viewUserInputEvents.onMouseDropCanceled = e => this._onMouseDropCanceled.fire(e);\n\n    viewUserInputEvents.onMouseWheel = e => this._onMouseWheel.fire(e);\n\n    const view = new View(commandDelegate, this._configuration, this._themeService, viewModel, viewUserInputEvents, this._overflowWidgetsDomNode);\n    return [view, true];\n  }\n\n  _postDetachModelCleanup(detachedModel) {\n    if (detachedModel) {\n      detachedModel.removeAllDecorationsWithOwnerId(this._id);\n    }\n  }\n\n  _detachModel() {\n    if (!this._modelData) {\n      return null;\n    }\n\n    const model = this._modelData.model;\n    const removeDomNode = this._modelData.hasRealView ? this._modelData.view.domNode.domNode : null;\n\n    this._modelData.dispose();\n\n    this._modelData = null;\n\n    this._domElement.removeAttribute('data-mode-id');\n\n    if (removeDomNode && this._domElement.contains(removeDomNode)) {\n      this._domElement.removeChild(removeDomNode);\n    }\n\n    if (this._bannerDomNode && this._domElement.contains(this._bannerDomNode)) {\n      this._domElement.removeChild(this._bannerDomNode);\n    }\n\n    return model;\n  }\n\n  _removeDecorationType(key) {\n    this._codeEditorService.removeDecorationType(key);\n  }\n\n  hasModel() {\n    return this._modelData !== null;\n  }\n\n};\nCodeEditorWidget = __decorate([__param(3, IInstantiationService), __param(4, ICodeEditorService), __param(5, ICommandService), __param(6, IContextKeyService), __param(7, IThemeService), __param(8, INotificationService), __param(9, IAccessibilityService), __param(10, ILanguageConfigurationService)], CodeEditorWidget);\nexport { CodeEditorWidget };\nexport class BooleanEventEmitter extends Disposable {\n  constructor() {\n    super();\n    this._onDidChangeToTrue = this._register(new Emitter());\n    this.onDidChangeToTrue = this._onDidChangeToTrue.event;\n    this._onDidChangeToFalse = this._register(new Emitter());\n    this.onDidChangeToFalse = this._onDidChangeToFalse.event;\n    this._value = 0\n    /* NotSet */\n    ;\n  }\n\n  setValue(_value) {\n    const value = _value ? 2\n    /* True */\n    : 1\n    /* False */\n    ;\n\n    if (this._value === value) {\n      return;\n    }\n\n    this._value = value;\n\n    if (this._value === 2\n    /* True */\n    ) {\n      this._onDidChangeToTrue.fire();\n    } else if (this._value === 1\n    /* False */\n    ) {\n      this._onDidChangeToFalse.fire();\n    }\n  }\n\n}\n\nclass EditorContextKeysManager extends Disposable {\n  constructor(editor, contextKeyService) {\n    super();\n    this._editor = editor;\n    contextKeyService.createKey('editorId', editor.getId());\n    this._editorSimpleInput = EditorContextKeys.editorSimpleInput.bindTo(contextKeyService);\n    this._editorFocus = EditorContextKeys.focus.bindTo(contextKeyService);\n    this._textInputFocus = EditorContextKeys.textInputFocus.bindTo(contextKeyService);\n    this._editorTextFocus = EditorContextKeys.editorTextFocus.bindTo(contextKeyService);\n    this._editorTabMovesFocus = EditorContextKeys.tabMovesFocus.bindTo(contextKeyService);\n    this._editorReadonly = EditorContextKeys.readOnly.bindTo(contextKeyService);\n    this._inDiffEditor = EditorContextKeys.inDiffEditor.bindTo(contextKeyService);\n    this._editorColumnSelection = EditorContextKeys.columnSelection.bindTo(contextKeyService);\n    this._hasMultipleSelections = EditorContextKeys.hasMultipleSelections.bindTo(contextKeyService);\n    this._hasNonEmptySelection = EditorContextKeys.hasNonEmptySelection.bindTo(contextKeyService);\n    this._canUndo = EditorContextKeys.canUndo.bindTo(contextKeyService);\n    this._canRedo = EditorContextKeys.canRedo.bindTo(contextKeyService);\n\n    this._register(this._editor.onDidChangeConfiguration(() => this._updateFromConfig()));\n\n    this._register(this._editor.onDidChangeCursorSelection(() => this._updateFromSelection()));\n\n    this._register(this._editor.onDidFocusEditorWidget(() => this._updateFromFocus()));\n\n    this._register(this._editor.onDidBlurEditorWidget(() => this._updateFromFocus()));\n\n    this._register(this._editor.onDidFocusEditorText(() => this._updateFromFocus()));\n\n    this._register(this._editor.onDidBlurEditorText(() => this._updateFromFocus()));\n\n    this._register(this._editor.onDidChangeModel(() => this._updateFromModel()));\n\n    this._register(this._editor.onDidChangeConfiguration(() => this._updateFromModel()));\n\n    this._updateFromConfig();\n\n    this._updateFromSelection();\n\n    this._updateFromFocus();\n\n    this._updateFromModel();\n\n    this._editorSimpleInput.set(this._editor.isSimpleWidget);\n  }\n\n  _updateFromConfig() {\n    const options = this._editor.getOptions();\n\n    this._editorTabMovesFocus.set(options.get(130\n    /* tabFocusMode */\n    ));\n\n    this._editorReadonly.set(options.get(81\n    /* readOnly */\n    ));\n\n    this._inDiffEditor.set(options.get(54\n    /* inDiffEditor */\n    ));\n\n    this._editorColumnSelection.set(options.get(18\n    /* columnSelection */\n    ));\n  }\n\n  _updateFromSelection() {\n    const selections = this._editor.getSelections();\n\n    if (!selections) {\n      this._hasMultipleSelections.reset();\n\n      this._hasNonEmptySelection.reset();\n    } else {\n      this._hasMultipleSelections.set(selections.length > 1);\n\n      this._hasNonEmptySelection.set(selections.some(s => !s.isEmpty()));\n    }\n  }\n\n  _updateFromFocus() {\n    this._editorFocus.set(this._editor.hasWidgetFocus() && !this._editor.isSimpleWidget);\n\n    this._editorTextFocus.set(this._editor.hasTextFocus() && !this._editor.isSimpleWidget);\n\n    this._textInputFocus.set(this._editor.hasTextFocus());\n  }\n\n  _updateFromModel() {\n    const model = this._editor.getModel();\n\n    this._canUndo.set(Boolean(model && model.canUndo()));\n\n    this._canRedo.set(Boolean(model && model.canRedo()));\n  }\n\n}\n\nexport class EditorModeContext extends Disposable {\n  constructor(_editor, _contextKeyService) {\n    super();\n    this._editor = _editor;\n    this._contextKeyService = _contextKeyService;\n    this._langId = EditorContextKeys.languageId.bindTo(_contextKeyService);\n    this._hasCompletionItemProvider = EditorContextKeys.hasCompletionItemProvider.bindTo(_contextKeyService);\n    this._hasCodeActionsProvider = EditorContextKeys.hasCodeActionsProvider.bindTo(_contextKeyService);\n    this._hasCodeLensProvider = EditorContextKeys.hasCodeLensProvider.bindTo(_contextKeyService);\n    this._hasDefinitionProvider = EditorContextKeys.hasDefinitionProvider.bindTo(_contextKeyService);\n    this._hasDeclarationProvider = EditorContextKeys.hasDeclarationProvider.bindTo(_contextKeyService);\n    this._hasImplementationProvider = EditorContextKeys.hasImplementationProvider.bindTo(_contextKeyService);\n    this._hasTypeDefinitionProvider = EditorContextKeys.hasTypeDefinitionProvider.bindTo(_contextKeyService);\n    this._hasHoverProvider = EditorContextKeys.hasHoverProvider.bindTo(_contextKeyService);\n    this._hasDocumentHighlightProvider = EditorContextKeys.hasDocumentHighlightProvider.bindTo(_contextKeyService);\n    this._hasDocumentSymbolProvider = EditorContextKeys.hasDocumentSymbolProvider.bindTo(_contextKeyService);\n    this._hasReferenceProvider = EditorContextKeys.hasReferenceProvider.bindTo(_contextKeyService);\n    this._hasRenameProvider = EditorContextKeys.hasRenameProvider.bindTo(_contextKeyService);\n    this._hasSignatureHelpProvider = EditorContextKeys.hasSignatureHelpProvider.bindTo(_contextKeyService);\n    this._hasInlayHintsProvider = EditorContextKeys.hasInlayHintsProvider.bindTo(_contextKeyService);\n    this._hasDocumentFormattingProvider = EditorContextKeys.hasDocumentFormattingProvider.bindTo(_contextKeyService);\n    this._hasDocumentSelectionFormattingProvider = EditorContextKeys.hasDocumentSelectionFormattingProvider.bindTo(_contextKeyService);\n    this._hasMultipleDocumentFormattingProvider = EditorContextKeys.hasMultipleDocumentFormattingProvider.bindTo(_contextKeyService);\n    this._hasMultipleDocumentSelectionFormattingProvider = EditorContextKeys.hasMultipleDocumentSelectionFormattingProvider.bindTo(_contextKeyService);\n    this._isInWalkThrough = EditorContextKeys.isInWalkThroughSnippet.bindTo(_contextKeyService);\n\n    const update = () => this._update(); // update when model/mode changes\n\n\n    this._register(_editor.onDidChangeModel(update));\n\n    this._register(_editor.onDidChangeModelLanguage(update)); // update when registries change\n\n\n    this._register(modes.CompletionProviderRegistry.onDidChange(update));\n\n    this._register(modes.CodeActionProviderRegistry.onDidChange(update));\n\n    this._register(modes.CodeLensProviderRegistry.onDidChange(update));\n\n    this._register(modes.DefinitionProviderRegistry.onDidChange(update));\n\n    this._register(modes.DeclarationProviderRegistry.onDidChange(update));\n\n    this._register(modes.ImplementationProviderRegistry.onDidChange(update));\n\n    this._register(modes.TypeDefinitionProviderRegistry.onDidChange(update));\n\n    this._register(modes.HoverProviderRegistry.onDidChange(update));\n\n    this._register(modes.DocumentHighlightProviderRegistry.onDidChange(update));\n\n    this._register(modes.DocumentSymbolProviderRegistry.onDidChange(update));\n\n    this._register(modes.ReferenceProviderRegistry.onDidChange(update));\n\n    this._register(modes.RenameProviderRegistry.onDidChange(update));\n\n    this._register(modes.DocumentFormattingEditProviderRegistry.onDidChange(update));\n\n    this._register(modes.DocumentRangeFormattingEditProviderRegistry.onDidChange(update));\n\n    this._register(modes.SignatureHelpProviderRegistry.onDidChange(update));\n\n    this._register(modes.InlayHintsProviderRegistry.onDidChange(update));\n\n    update();\n  }\n\n  dispose() {\n    super.dispose();\n  }\n\n  reset() {\n    this._contextKeyService.bufferChangeEvents(() => {\n      this._langId.reset();\n\n      this._hasCompletionItemProvider.reset();\n\n      this._hasCodeActionsProvider.reset();\n\n      this._hasCodeLensProvider.reset();\n\n      this._hasDefinitionProvider.reset();\n\n      this._hasDeclarationProvider.reset();\n\n      this._hasImplementationProvider.reset();\n\n      this._hasTypeDefinitionProvider.reset();\n\n      this._hasHoverProvider.reset();\n\n      this._hasDocumentHighlightProvider.reset();\n\n      this._hasDocumentSymbolProvider.reset();\n\n      this._hasReferenceProvider.reset();\n\n      this._hasRenameProvider.reset();\n\n      this._hasDocumentFormattingProvider.reset();\n\n      this._hasDocumentSelectionFormattingProvider.reset();\n\n      this._hasSignatureHelpProvider.reset();\n\n      this._isInWalkThrough.reset();\n    });\n  }\n\n  _update() {\n    const model = this._editor.getModel();\n\n    if (!model) {\n      this.reset();\n      return;\n    }\n\n    this._contextKeyService.bufferChangeEvents(() => {\n      this._langId.set(model.getLanguageId());\n\n      this._hasCompletionItemProvider.set(modes.CompletionProviderRegistry.has(model));\n\n      this._hasCodeActionsProvider.set(modes.CodeActionProviderRegistry.has(model));\n\n      this._hasCodeLensProvider.set(modes.CodeLensProviderRegistry.has(model));\n\n      this._hasDefinitionProvider.set(modes.DefinitionProviderRegistry.has(model));\n\n      this._hasDeclarationProvider.set(modes.DeclarationProviderRegistry.has(model));\n\n      this._hasImplementationProvider.set(modes.ImplementationProviderRegistry.has(model));\n\n      this._hasTypeDefinitionProvider.set(modes.TypeDefinitionProviderRegistry.has(model));\n\n      this._hasHoverProvider.set(modes.HoverProviderRegistry.has(model));\n\n      this._hasDocumentHighlightProvider.set(modes.DocumentHighlightProviderRegistry.has(model));\n\n      this._hasDocumentSymbolProvider.set(modes.DocumentSymbolProviderRegistry.has(model));\n\n      this._hasReferenceProvider.set(modes.ReferenceProviderRegistry.has(model));\n\n      this._hasRenameProvider.set(modes.RenameProviderRegistry.has(model));\n\n      this._hasSignatureHelpProvider.set(modes.SignatureHelpProviderRegistry.has(model));\n\n      this._hasInlayHintsProvider.set(modes.InlayHintsProviderRegistry.has(model));\n\n      this._hasDocumentFormattingProvider.set(modes.DocumentFormattingEditProviderRegistry.has(model) || modes.DocumentRangeFormattingEditProviderRegistry.has(model));\n\n      this._hasDocumentSelectionFormattingProvider.set(modes.DocumentRangeFormattingEditProviderRegistry.has(model));\n\n      this._hasMultipleDocumentFormattingProvider.set(modes.DocumentFormattingEditProviderRegistry.all(model).length + modes.DocumentRangeFormattingEditProviderRegistry.all(model).length > 1);\n\n      this._hasMultipleDocumentSelectionFormattingProvider.set(modes.DocumentRangeFormattingEditProviderRegistry.all(model).length > 1);\n\n      this._isInWalkThrough.set(model.uri.scheme === Schemas.walkThroughSnippet);\n    });\n  }\n\n}\n\nclass CodeEditorWidgetFocusTracker extends Disposable {\n  constructor(domElement) {\n    super();\n    this._onChange = this._register(new Emitter());\n    this.onChange = this._onChange.event;\n    this._hasFocus = false;\n    this._domFocusTracker = this._register(dom.trackFocus(domElement));\n\n    this._register(this._domFocusTracker.onDidFocus(() => {\n      this._hasFocus = true;\n\n      this._onChange.fire(undefined);\n    }));\n\n    this._register(this._domFocusTracker.onDidBlur(() => {\n      this._hasFocus = false;\n\n      this._onChange.fire(undefined);\n    }));\n  }\n\n  hasFocus() {\n    return this._hasFocus;\n  }\n\n}\n\nconst squigglyStart = encodeURIComponent(`<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='`);\nconst squigglyEnd = encodeURIComponent(`'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>`);\n\nfunction getSquigglySVGData(color) {\n  return squigglyStart + encodeURIComponent(color.toString()) + squigglyEnd;\n}\n\nconst dotdotdotStart = encodeURIComponent(`<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"3\" width=\"12\"><g fill=\"`);\nconst dotdotdotEnd = encodeURIComponent(`\"><circle cx=\"1\" cy=\"1\" r=\"1\"/><circle cx=\"5\" cy=\"1\" r=\"1\"/><circle cx=\"9\" cy=\"1\" r=\"1\"/></g></svg>`);\n\nfunction getDotDotDotSVGData(color) {\n  return dotdotdotStart + encodeURIComponent(color.toString()) + dotdotdotEnd;\n}\n\nregisterThemingParticipant((theme, collector) => {\n  const errorBorderColor = theme.getColor(editorErrorBorder);\n\n  if (errorBorderColor) {\n    collector.addRule(`.monaco-editor .${\"squiggly-error\"\n    /* EditorErrorDecoration */\n    } { border-bottom: 4px double ${errorBorderColor}; }`);\n  }\n\n  const errorForeground = theme.getColor(editorErrorForeground);\n\n  if (errorForeground) {\n    collector.addRule(`.monaco-editor .${\"squiggly-error\"\n    /* EditorErrorDecoration */\n    } { background: url(\"data:image/svg+xml,${getSquigglySVGData(errorForeground)}\") repeat-x bottom left; }`);\n  }\n\n  const errorBackground = theme.getColor(editorErrorBackground);\n\n  if (errorBackground) {\n    collector.addRule(`.monaco-editor .${\"squiggly-error\"\n    /* EditorErrorDecoration */\n    }::before { display: block; content: ''; width: 100%; height: 100%; background: ${errorBackground}; }`);\n  }\n\n  const warningBorderColor = theme.getColor(editorWarningBorder);\n\n  if (warningBorderColor) {\n    collector.addRule(`.monaco-editor .${\"squiggly-warning\"\n    /* EditorWarningDecoration */\n    } { border-bottom: 4px double ${warningBorderColor}; }`);\n  }\n\n  const warningForeground = theme.getColor(editorWarningForeground);\n\n  if (warningForeground) {\n    collector.addRule(`.monaco-editor .${\"squiggly-warning\"\n    /* EditorWarningDecoration */\n    } { background: url(\"data:image/svg+xml,${getSquigglySVGData(warningForeground)}\") repeat-x bottom left; }`);\n  }\n\n  const warningBackground = theme.getColor(editorWarningBackground);\n\n  if (warningBackground) {\n    collector.addRule(`.monaco-editor .${\"squiggly-warning\"\n    /* EditorWarningDecoration */\n    }::before { display: block; content: ''; width: 100%; height: 100%; background: ${warningBackground}; }`);\n  }\n\n  const infoBorderColor = theme.getColor(editorInfoBorder);\n\n  if (infoBorderColor) {\n    collector.addRule(`.monaco-editor .${\"squiggly-info\"\n    /* EditorInfoDecoration */\n    } { border-bottom: 4px double ${infoBorderColor}; }`);\n  }\n\n  const infoForeground = theme.getColor(editorInfoForeground);\n\n  if (infoForeground) {\n    collector.addRule(`.monaco-editor .${\"squiggly-info\"\n    /* EditorInfoDecoration */\n    } { background: url(\"data:image/svg+xml,${getSquigglySVGData(infoForeground)}\") repeat-x bottom left; }`);\n  }\n\n  const infoBackground = theme.getColor(editorInfoBackground);\n\n  if (infoBackground) {\n    collector.addRule(`.monaco-editor .${\"squiggly-info\"\n    /* EditorInfoDecoration */\n    }::before { display: block; content: ''; width: 100%; height: 100%; background: ${infoBackground}; }`);\n  }\n\n  const hintBorderColor = theme.getColor(editorHintBorder);\n\n  if (hintBorderColor) {\n    collector.addRule(`.monaco-editor .${\"squiggly-hint\"\n    /* EditorHintDecoration */\n    } { border-bottom: 2px dotted ${hintBorderColor}; }`);\n  }\n\n  const hintForeground = theme.getColor(editorHintForeground);\n\n  if (hintForeground) {\n    collector.addRule(`.monaco-editor .${\"squiggly-hint\"\n    /* EditorHintDecoration */\n    } { background: url(\"data:image/svg+xml,${getDotDotDotSVGData(hintForeground)}\") no-repeat bottom left; }`);\n  }\n\n  const unnecessaryForeground = theme.getColor(editorUnnecessaryCodeOpacity);\n\n  if (unnecessaryForeground) {\n    collector.addRule(`.monaco-editor.showUnused .${\"squiggly-inline-unnecessary\"\n    /* EditorUnnecessaryInlineDecoration */\n    } { opacity: ${unnecessaryForeground.rgba.a}; }`);\n  }\n\n  const unnecessaryBorder = theme.getColor(editorUnnecessaryCodeBorder);\n\n  if (unnecessaryBorder) {\n    collector.addRule(`.monaco-editor.showUnused .${\"squiggly-unnecessary\"\n    /* EditorUnnecessaryDecoration */\n    } { border-bottom: 2px dashed ${unnecessaryBorder}; }`);\n  }\n\n  const deprecatedForeground = theme.getColor(editorForeground) || 'inherit';\n  collector.addRule(`.monaco-editor.showDeprecated .${\"squiggly-inline-deprecated\"\n  /* EditorDeprecatedInlineDecoration */\n  } { text-decoration: line-through; text-decoration-color: ${deprecatedForeground}}`);\n});","map":{"version":3,"sources":["/home/joe/DISSY/flask_test_1/react-flask-app/node_modules/monaco-editor/esm/vs/editor/browser/widget/codeEditorWidget.js"],"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","nls","dom","onUnexpectedError","Emitter","Disposable","dispose","Schemas","EditorConfiguration","EditorExtensionsRegistry","ICodeEditorService","View","ViewUserInputEvents","filterValidationDecorations","CursorsController","CursorColumns","Position","Range","Selection","InternalEditorAction","editorCommon","EditorContextKeys","modes","editorUnnecessaryCodeBorder","editorUnnecessaryCodeOpacity","editorErrorBorder","editorErrorForeground","editorHintBorder","editorHintForeground","editorInfoBorder","editorInfoForeground","editorWarningBorder","editorWarningForeground","editorForeground","editorErrorBackground","editorInfoBackground","editorWarningBackground","ViewModel","ICommandService","IContextKeyService","IInstantiationService","ServiceCollection","INotificationService","IThemeService","registerThemingParticipant","IAccessibilityService","withNullAsUndefined","MonospaceLineBreaksComputerFactory","DOMLineBreaksComputerFactory","WordOperations","ILanguageConfigurationService","applyFontInfo","EDITOR_ID","ModelData","constructor","model","viewModel","view","hasRealView","listenersToRemove","onBeforeDetached","CodeEditorWidget","domElement","_options","codeEditorWidgetOptions","instantiationService","codeEditorService","commandService","contextKeyService","themeService","notificationService","accessibilityService","languageConfigurationService","_onDidDispose","_register","onDidDispose","event","_onDidChangeModelContent","onDidChangeModelContent","_onDidChangeModelLanguage","onDidChangeModelLanguage","_onDidChangeModelLanguageConfiguration","onDidChangeModelLanguageConfiguration","_onDidChangeModelOptions","onDidChangeModelOptions","_onDidChangeModelDecorations","onDidChangeModelDecorations","_onDidChangeConfiguration","onDidChangeConfiguration","_onDidChangeModel","onDidChangeModel","_onDidChangeCursorPosition","onDidChangeCursorPosition","_onDidChangeCursorSelection","onDidChangeCursorSelection","_onDidAttemptReadOnlyEdit","onDidAttemptReadOnlyEdit","_onDidLayoutChange","onDidLayoutChange","_editorTextFocus","BooleanEventEmitter","onDidFocusEditorText","onDidChangeToTrue","onDidBlurEditorText","onDidChangeToFalse","_editorWidgetFocus","onDidFocusEditorWidget","onDidBlurEditorWidget","_onWillType","onWillType","_onDidType","onDidType","_onDidCompositionStart","onDidCompositionStart","_onDidCompositionEnd","onDidCompositionEnd","_onDidPaste","onDidPaste","_onMouseUp","onMouseUp","_onMouseDown","onMouseDown","_onMouseDrag","onMouseDrag","_onMouseDrop","onMouseDrop","_onMouseDropCanceled","onMouseDropCanceled","_onContextMenu","onContextMenu","_onMouseMove","onMouseMove","_onMouseLeave","onMouseLeave","_onMouseWheel","onMouseWheel","_onKeyUp","onKeyUp","_onKeyDown","onKeyDown","_onDidContentSizeChange","onDidContentSizeChange","_onDidScrollChange","onDidScrollChange","_onDidChangeViewZones","onDidChangeViewZones","_onDidChangeHiddenAreas","onDidChangeHiddenAreas","_bannerDomNode","options","assign","_domElement","_overflowWidgetsDomNode","overflowWidgetsDomNode","_id","_decorationTypeKeysToIds","_decorationTypeSubtypes","_telemetryData","telemetryData","_configuration","_createConfiguration","isSimpleWidget","onDidChange","e","fire","hasChanged","layoutInfo","get","_contextKeyService","createScoped","_notificationService","_codeEditorService","_commandService","_themeService","EditorContextKeysManager","EditorModeContext","_instantiationService","createChild","_modelData","_contributions","_actions","_focusTracker","CodeEditorWidgetFocusTracker","onChange","setValue","hasFocus","_contentWidgets","_overlayWidgets","contributions","Array","isArray","getEditorContributions","id","Error","contribution","createInstance","ctor","err","getEditorActions","forEach","action","internalAction","label","alias","precondition","invokeFunction","accessor","Promise","resolve","runEditorCommand","addCodeEditor","getId","getEditorType","EditorType","ICodeEditor","removeCodeEditor","keys","len","contributionId","_removeDecorationTypes","_postDetachModelCleanup","_detachModel","invokeWithinContext","fn","updateOptions","newOptions","getOptions","getOption","getRawOptions","getOverflowWidgetsDomNode","getConfiguredWordAtPosition","position","getWordAtPosition","getValue","preserveBOM","eolPreference","lineEnding","newValue","getModel","setModel","_model","hasTextFocus","detachedModel","_attachModel","hasModel","focus","oldModelUrl","uri","newModelUrl","decorationType","subTypes","subType","_removeDecorationType","getVisibleRanges","getVisibleRangesPlusViewportAboveBelow","getWhitespaces","viewLayout","_getVerticalOffsetForPosition","modelData","modelLineNumber","modelColumn","modelPosition","validatePosition","lineNumber","column","viewPosition","coordinatesConverter","convertModelPositionToViewPosition","getVerticalOffsetForLineNumber","getTopForLineNumber","getTopForPosition","setHiddenAreas","ranges","map","lift","getVisibleColumnFromPosition","rawPosition","tabSize","visibleColumnFromColumn","getLineContent","getPosition","setPosition","isIPosition","setSelections","selectionStartLineNumber","selectionStartColumn","positionLineNumber","positionColumn","_sendRevealRange","modelRange","verticalType","revealHorizontal","scrollType","isIRange","validatedModelRange","validateRange","viewRange","convertModelRangeToViewRange","revealRange","revealLine","_revealLine","revealLineInCenter","revealLineInCenterIfOutsideViewport","revealLineNearTop","revealType","revealPosition","_revealPosition","revealPositionInCenter","revealPositionInCenterIfOutsideViewport","revealPositionNearTop","getSelection","getSelections","setSelection","something","isSelection","isISelection","isRange","_setSelectionImpl","selection","startLineNumber","startColumn","endLineNumber","endColumn","sel","revealLines","_revealLines","revealLinesInCenter","revealLinesInCenterIfOutsideViewport","revealLinesNearTop","range","revealVerticalInCenter","_revealRange","revealRangeInCenter","revealRangeInCenterIfOutsideViewport","revealRangeNearTop","revealRangeNearTopIfOutsideViewport","revealRangeAtTop","source","reason","getContentWidth","getScrollWidth","getScrollLeft","getCurrentScrollLeft","getContentHeight","getScrollHeight","getScrollTop","getCurrentScrollTop","setScrollLeft","newScrollLeft","setScrollPosition","scrollLeft","setScrollTop","newScrollTop","scrollTop","saveViewState","contributionsState","cursorState","saveCursorState","viewState","saveState","restoreViewState","s","codeEditorState","restoreCursorState","reducedState","reduceRestoreState","restoreState","getContribution","getActions","result","push","getSupportedActions","filter","isSupported","getAction","trigger","handlerId","payload","_startComposition","_endComposition","args","_type","text","_compositionType","replaceCharCnt","replacePrevCharCnt","replaceNextCharCnt","positionDelta","_paste","pasteOnNewLine","multicursorText","mode","_cut","run","then","undefined","_triggerEditorCommand","_triggerCommand","executeCommand","startComposition","endComposition","type","compositionType","startPosition","getStartPosition","paste","endPosition","languageId","cut","command","getEditorCommand","_getViewModel","pushUndoStop","pushStackElement","popUndoStop","popStackElement","executeEdits","edits","endCursorState","cursorStateComputer","executeCommands","commands","changeDecorations","callback","getLineDecorations","getDecorationsInRange","deltaDecorations","oldDecorations","newDecorations","removeDecorations","decorationTypeKey","oldDecorationsIds","hasOwnProperty","getLayoutInfo","createOverviewRuler","cssClassName","getContainerDomNode","getDomNode","domNode","delegateVerticalScrollbarMouseDown","browserEvent","layout","dimension","observeContainer","render","isFocused","hasWidgetFocus","addContentWidget","widget","widgetData","console","warn","layoutContentWidget","widgetId","removeContentWidget","addOverlayWidget","layoutOverlayWidget","removeOverlayWidget","changeViewZones","change","getTargetAtClientPoint","clientX","clientY","getScrolledVisiblePosition","top","left","getOffsetForColumn","glyphMarginWidth","lineNumbersWidth","decorationsWidth","height","forceRedraw","setAriaOptions","setBanner","domNodeHeight","contains","removeChild","setReservedHeight","prepend","setAttribute","getLanguageId","setIsDominatedByLongLines","isDominatedByLongLines","setModelLineCount","getLineCount","onBeforeAttached","create","scheduleAtNextAnimationFrame","onDidChangeDecorations","onDidChangeLanguage","onDidChangeLanguageConfiguration","onDidChangeContent","onDidChangeOptions","onWillDispose","onEvent","kind","reachedMaxCursorCount","localize","MAX_CURSOR_COUNT","positions","selections","e1","secondaryPositions","slice","e2","secondarySelections","modelVersionId","oldSelections","oldModelVersionId","_createView","appendChild","toString","commandDelegate","viewUserInputEvents","removeAllDecorationsWithOwnerId","removeDomNode","removeAttribute","removeDecorationType","_onDidChangeToTrue","_onDidChangeToFalse","_value","value","editor","_editor","createKey","_editorSimpleInput","editorSimpleInput","bindTo","_editorFocus","_textInputFocus","textInputFocus","editorTextFocus","_editorTabMovesFocus","tabMovesFocus","_editorReadonly","readOnly","_inDiffEditor","inDiffEditor","_editorColumnSelection","columnSelection","_hasMultipleSelections","hasMultipleSelections","_hasNonEmptySelection","hasNonEmptySelection","_canUndo","canUndo","_canRedo","canRedo","_updateFromConfig","_updateFromSelection","_updateFromFocus","_updateFromModel","set","reset","some","isEmpty","Boolean","_langId","_hasCompletionItemProvider","hasCompletionItemProvider","_hasCodeActionsProvider","hasCodeActionsProvider","_hasCodeLensProvider","hasCodeLensProvider","_hasDefinitionProvider","hasDefinitionProvider","_hasDeclarationProvider","hasDeclarationProvider","_hasImplementationProvider","hasImplementationProvider","_hasTypeDefinitionProvider","hasTypeDefinitionProvider","_hasHoverProvider","hasHoverProvider","_hasDocumentHighlightProvider","hasDocumentHighlightProvider","_hasDocumentSymbolProvider","hasDocumentSymbolProvider","_hasReferenceProvider","hasReferenceProvider","_hasRenameProvider","hasRenameProvider","_hasSignatureHelpProvider","hasSignatureHelpProvider","_hasInlayHintsProvider","hasInlayHintsProvider","_hasDocumentFormattingProvider","hasDocumentFormattingProvider","_hasDocumentSelectionFormattingProvider","hasDocumentSelectionFormattingProvider","_hasMultipleDocumentFormattingProvider","hasMultipleDocumentFormattingProvider","_hasMultipleDocumentSelectionFormattingProvider","hasMultipleDocumentSelectionFormattingProvider","_isInWalkThrough","isInWalkThroughSnippet","update","_update","CompletionProviderRegistry","CodeActionProviderRegistry","CodeLensProviderRegistry","DefinitionProviderRegistry","DeclarationProviderRegistry","ImplementationProviderRegistry","TypeDefinitionProviderRegistry","HoverProviderRegistry","DocumentHighlightProviderRegistry","DocumentSymbolProviderRegistry","ReferenceProviderRegistry","RenameProviderRegistry","DocumentFormattingEditProviderRegistry","DocumentRangeFormattingEditProviderRegistry","SignatureHelpProviderRegistry","InlayHintsProviderRegistry","bufferChangeEvents","has","all","scheme","walkThroughSnippet","_onChange","_hasFocus","_domFocusTracker","trackFocus","onDidFocus","onDidBlur","squigglyStart","encodeURIComponent","squigglyEnd","getSquigglySVGData","color","dotdotdotStart","dotdotdotEnd","getDotDotDotSVGData","theme","collector","errorBorderColor","getColor","addRule","errorForeground","errorBackground","warningBorderColor","warningForeground","warningBackground","infoBorderColor","infoForeground","infoBackground","hintBorderColor","hintForeground","unnecessaryForeground","rgba","a","unnecessaryBorder","deprecatedForeground"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport '../services/markerDecorations.js';\nimport './media/editor.css';\nimport * as nls from '../../../nls.js';\nimport * as dom from '../../../base/browser/dom.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable, dispose } from '../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../base/common/network.js';\nimport { EditorConfiguration } from '../config/editorConfiguration.js';\nimport { EditorExtensionsRegistry } from '../editorExtensions.js';\nimport { ICodeEditorService } from '../services/codeEditorService.js';\nimport { View } from '../view/view.js';\nimport { ViewUserInputEvents } from '../view/viewUserInputEvents.js';\nimport { filterValidationDecorations } from '../../common/config/editorOptions.js';\nimport { CursorsController } from '../../common/cursor/cursor.js';\nimport { CursorColumns } from '../../common/core/cursorColumns.js';\nimport { Position } from '../../common/core/position.js';\nimport { Range } from '../../common/core/range.js';\nimport { Selection } from '../../common/core/selection.js';\nimport { InternalEditorAction } from '../../common/editorAction.js';\nimport * as editorCommon from '../../common/editorCommon.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport * as modes from '../../common/languages.js';\nimport { editorUnnecessaryCodeBorder, editorUnnecessaryCodeOpacity } from '../../common/core/editorColorRegistry.js';\nimport { editorErrorBorder, editorErrorForeground, editorHintBorder, editorHintForeground, editorInfoBorder, editorInfoForeground, editorWarningBorder, editorWarningForeground, editorForeground, editorErrorBackground, editorInfoBackground, editorWarningBackground } from '../../../platform/theme/common/colorRegistry.js';\nimport { ViewModel } from '../../common/viewModel/viewModelImpl.js';\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../platform/instantiation/common/serviceCollection.js';\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\nimport { IThemeService, registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\nimport { withNullAsUndefined } from '../../../base/common/types.js';\nimport { MonospaceLineBreaksComputerFactory } from '../../common/viewModel/monospaceLineBreaksComputer.js';\nimport { DOMLineBreaksComputerFactory } from '../view/domLineBreaksComputer.js';\nimport { WordOperations } from '../../common/cursor/cursorWordOperations.js';\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\nimport { applyFontInfo } from '../config/domFontInfo.js';\nlet EDITOR_ID = 0;\nclass ModelData {\n    constructor(model, viewModel, view, hasRealView, listenersToRemove) {\n        this.model = model;\n        this.viewModel = viewModel;\n        this.view = view;\n        this.hasRealView = hasRealView;\n        this.listenersToRemove = listenersToRemove;\n    }\n    dispose() {\n        dispose(this.listenersToRemove);\n        this.model.onBeforeDetached();\n        if (this.hasRealView) {\n            this.view.dispose();\n        }\n        this.viewModel.dispose();\n    }\n}\nlet CodeEditorWidget = class CodeEditorWidget extends Disposable {\n    constructor(domElement, _options, codeEditorWidgetOptions, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService, languageConfigurationService) {\n        super();\n        this.languageConfigurationService = languageConfigurationService;\n        //#region Eventing\n        this._onDidDispose = this._register(new Emitter());\n        this.onDidDispose = this._onDidDispose.event;\n        this._onDidChangeModelContent = this._register(new Emitter());\n        this.onDidChangeModelContent = this._onDidChangeModelContent.event;\n        this._onDidChangeModelLanguage = this._register(new Emitter());\n        this.onDidChangeModelLanguage = this._onDidChangeModelLanguage.event;\n        this._onDidChangeModelLanguageConfiguration = this._register(new Emitter());\n        this.onDidChangeModelLanguageConfiguration = this._onDidChangeModelLanguageConfiguration.event;\n        this._onDidChangeModelOptions = this._register(new Emitter());\n        this.onDidChangeModelOptions = this._onDidChangeModelOptions.event;\n        this._onDidChangeModelDecorations = this._register(new Emitter());\n        this.onDidChangeModelDecorations = this._onDidChangeModelDecorations.event;\n        this._onDidChangeConfiguration = this._register(new Emitter());\n        this.onDidChangeConfiguration = this._onDidChangeConfiguration.event;\n        this._onDidChangeModel = this._register(new Emitter());\n        this.onDidChangeModel = this._onDidChangeModel.event;\n        this._onDidChangeCursorPosition = this._register(new Emitter());\n        this.onDidChangeCursorPosition = this._onDidChangeCursorPosition.event;\n        this._onDidChangeCursorSelection = this._register(new Emitter());\n        this.onDidChangeCursorSelection = this._onDidChangeCursorSelection.event;\n        this._onDidAttemptReadOnlyEdit = this._register(new Emitter());\n        this.onDidAttemptReadOnlyEdit = this._onDidAttemptReadOnlyEdit.event;\n        this._onDidLayoutChange = this._register(new Emitter());\n        this.onDidLayoutChange = this._onDidLayoutChange.event;\n        this._editorTextFocus = this._register(new BooleanEventEmitter());\n        this.onDidFocusEditorText = this._editorTextFocus.onDidChangeToTrue;\n        this.onDidBlurEditorText = this._editorTextFocus.onDidChangeToFalse;\n        this._editorWidgetFocus = this._register(new BooleanEventEmitter());\n        this.onDidFocusEditorWidget = this._editorWidgetFocus.onDidChangeToTrue;\n        this.onDidBlurEditorWidget = this._editorWidgetFocus.onDidChangeToFalse;\n        this._onWillType = this._register(new Emitter());\n        this.onWillType = this._onWillType.event;\n        this._onDidType = this._register(new Emitter());\n        this.onDidType = this._onDidType.event;\n        this._onDidCompositionStart = this._register(new Emitter());\n        this.onDidCompositionStart = this._onDidCompositionStart.event;\n        this._onDidCompositionEnd = this._register(new Emitter());\n        this.onDidCompositionEnd = this._onDidCompositionEnd.event;\n        this._onDidPaste = this._register(new Emitter());\n        this.onDidPaste = this._onDidPaste.event;\n        this._onMouseUp = this._register(new Emitter());\n        this.onMouseUp = this._onMouseUp.event;\n        this._onMouseDown = this._register(new Emitter());\n        this.onMouseDown = this._onMouseDown.event;\n        this._onMouseDrag = this._register(new Emitter());\n        this.onMouseDrag = this._onMouseDrag.event;\n        this._onMouseDrop = this._register(new Emitter());\n        this.onMouseDrop = this._onMouseDrop.event;\n        this._onMouseDropCanceled = this._register(new Emitter());\n        this.onMouseDropCanceled = this._onMouseDropCanceled.event;\n        this._onContextMenu = this._register(new Emitter());\n        this.onContextMenu = this._onContextMenu.event;\n        this._onMouseMove = this._register(new Emitter());\n        this.onMouseMove = this._onMouseMove.event;\n        this._onMouseLeave = this._register(new Emitter());\n        this.onMouseLeave = this._onMouseLeave.event;\n        this._onMouseWheel = this._register(new Emitter());\n        this.onMouseWheel = this._onMouseWheel.event;\n        this._onKeyUp = this._register(new Emitter());\n        this.onKeyUp = this._onKeyUp.event;\n        this._onKeyDown = this._register(new Emitter());\n        this.onKeyDown = this._onKeyDown.event;\n        this._onDidContentSizeChange = this._register(new Emitter());\n        this.onDidContentSizeChange = this._onDidContentSizeChange.event;\n        this._onDidScrollChange = this._register(new Emitter());\n        this.onDidScrollChange = this._onDidScrollChange.event;\n        this._onDidChangeViewZones = this._register(new Emitter());\n        this.onDidChangeViewZones = this._onDidChangeViewZones.event;\n        this._onDidChangeHiddenAreas = this._register(new Emitter());\n        this.onDidChangeHiddenAreas = this._onDidChangeHiddenAreas.event;\n        this._bannerDomNode = null;\n        const options = Object.assign({}, _options);\n        this._domElement = domElement;\n        this._overflowWidgetsDomNode = options.overflowWidgetsDomNode;\n        delete options.overflowWidgetsDomNode;\n        this._id = (++EDITOR_ID);\n        this._decorationTypeKeysToIds = {};\n        this._decorationTypeSubtypes = {};\n        this._telemetryData = codeEditorWidgetOptions.telemetryData;\n        this._configuration = this._register(this._createConfiguration(codeEditorWidgetOptions.isSimpleWidget || false, options, accessibilityService));\n        this._register(this._configuration.onDidChange((e) => {\n            this._onDidChangeConfiguration.fire(e);\n            const options = this._configuration.options;\n            if (e.hasChanged(131 /* layoutInfo */)) {\n                const layoutInfo = options.get(131 /* layoutInfo */);\n                this._onDidLayoutChange.fire(layoutInfo);\n            }\n        }));\n        this._contextKeyService = this._register(contextKeyService.createScoped(this._domElement));\n        this._notificationService = notificationService;\n        this._codeEditorService = codeEditorService;\n        this._commandService = commandService;\n        this._themeService = themeService;\n        this._register(new EditorContextKeysManager(this, this._contextKeyService));\n        this._register(new EditorModeContext(this, this._contextKeyService));\n        this._instantiationService = instantiationService.createChild(new ServiceCollection([IContextKeyService, this._contextKeyService]));\n        this._modelData = null;\n        this._contributions = {};\n        this._actions = {};\n        this._focusTracker = new CodeEditorWidgetFocusTracker(domElement);\n        this._register(this._focusTracker.onChange(() => {\n            this._editorWidgetFocus.setValue(this._focusTracker.hasFocus());\n        }));\n        this._contentWidgets = {};\n        this._overlayWidgets = {};\n        let contributions;\n        if (Array.isArray(codeEditorWidgetOptions.contributions)) {\n            contributions = codeEditorWidgetOptions.contributions;\n        }\n        else {\n            contributions = EditorExtensionsRegistry.getEditorContributions();\n        }\n        for (const desc of contributions) {\n            if (this._contributions[desc.id]) {\n                onUnexpectedError(new Error(`Cannot have two contributions with the same id ${desc.id}`));\n                continue;\n            }\n            try {\n                const contribution = this._instantiationService.createInstance(desc.ctor, this);\n                this._contributions[desc.id] = contribution;\n            }\n            catch (err) {\n                onUnexpectedError(err);\n            }\n        }\n        EditorExtensionsRegistry.getEditorActions().forEach((action) => {\n            if (this._actions[action.id]) {\n                onUnexpectedError(new Error(`Cannot have two actions with the same id ${action.id}`));\n                return;\n            }\n            const internalAction = new InternalEditorAction(action.id, action.label, action.alias, withNullAsUndefined(action.precondition), () => {\n                return this._instantiationService.invokeFunction((accessor) => {\n                    return Promise.resolve(action.runEditorCommand(accessor, this, null));\n                });\n            }, this._contextKeyService);\n            this._actions[internalAction.id] = internalAction;\n        });\n        this._codeEditorService.addCodeEditor(this);\n    }\n    //#endregion\n    get isSimpleWidget() {\n        return this._configuration.isSimpleWidget;\n    }\n    _createConfiguration(isSimpleWidget, options, accessibilityService) {\n        return new EditorConfiguration(isSimpleWidget, options, this._domElement, accessibilityService);\n    }\n    getId() {\n        return this.getEditorType() + ':' + this._id;\n    }\n    getEditorType() {\n        return editorCommon.EditorType.ICodeEditor;\n    }\n    dispose() {\n        this._codeEditorService.removeCodeEditor(this);\n        this._focusTracker.dispose();\n        const keys = Object.keys(this._contributions);\n        for (let i = 0, len = keys.length; i < len; i++) {\n            const contributionId = keys[i];\n            this._contributions[contributionId].dispose();\n        }\n        this._contributions = {};\n        this._actions = {};\n        this._contentWidgets = {};\n        this._overlayWidgets = {};\n        this._removeDecorationTypes();\n        this._postDetachModelCleanup(this._detachModel());\n        this._onDidDispose.fire();\n        super.dispose();\n    }\n    invokeWithinContext(fn) {\n        return this._instantiationService.invokeFunction(fn);\n    }\n    updateOptions(newOptions) {\n        this._configuration.updateOptions(newOptions || {});\n    }\n    getOptions() {\n        return this._configuration.options;\n    }\n    getOption(id) {\n        return this._configuration.options.get(id);\n    }\n    getRawOptions() {\n        return this._configuration.getRawOptions();\n    }\n    getOverflowWidgetsDomNode() {\n        return this._overflowWidgetsDomNode;\n    }\n    getConfiguredWordAtPosition(position) {\n        if (!this._modelData) {\n            return null;\n        }\n        return WordOperations.getWordAtPosition(this._modelData.model, this._configuration.options.get(117 /* wordSeparators */), position);\n    }\n    getValue(options = null) {\n        if (!this._modelData) {\n            return '';\n        }\n        const preserveBOM = (options && options.preserveBOM) ? true : false;\n        let eolPreference = 0 /* TextDefined */;\n        if (options && options.lineEnding && options.lineEnding === '\\n') {\n            eolPreference = 1 /* LF */;\n        }\n        else if (options && options.lineEnding && options.lineEnding === '\\r\\n') {\n            eolPreference = 2 /* CRLF */;\n        }\n        return this._modelData.model.getValue(eolPreference, preserveBOM);\n    }\n    setValue(newValue) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.model.setValue(newValue);\n    }\n    getModel() {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.model;\n    }\n    setModel(_model = null) {\n        const model = _model;\n        if (this._modelData === null && model === null) {\n            // Current model is the new model\n            return;\n        }\n        if (this._modelData && this._modelData.model === model) {\n            // Current model is the new model\n            return;\n        }\n        const hasTextFocus = this.hasTextFocus();\n        const detachedModel = this._detachModel();\n        this._attachModel(model);\n        if (hasTextFocus && this.hasModel()) {\n            this.focus();\n        }\n        const e = {\n            oldModelUrl: detachedModel ? detachedModel.uri : null,\n            newModelUrl: model ? model.uri : null\n        };\n        this._removeDecorationTypes();\n        this._onDidChangeModel.fire(e);\n        this._postDetachModelCleanup(detachedModel);\n    }\n    _removeDecorationTypes() {\n        this._decorationTypeKeysToIds = {};\n        if (this._decorationTypeSubtypes) {\n            for (let decorationType in this._decorationTypeSubtypes) {\n                const subTypes = this._decorationTypeSubtypes[decorationType];\n                for (let subType in subTypes) {\n                    this._removeDecorationType(decorationType + '-' + subType);\n                }\n            }\n            this._decorationTypeSubtypes = {};\n        }\n    }\n    getVisibleRanges() {\n        if (!this._modelData) {\n            return [];\n        }\n        return this._modelData.viewModel.getVisibleRanges();\n    }\n    getVisibleRangesPlusViewportAboveBelow() {\n        if (!this._modelData) {\n            return [];\n        }\n        return this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow();\n    }\n    getWhitespaces() {\n        if (!this._modelData) {\n            return [];\n        }\n        return this._modelData.viewModel.viewLayout.getWhitespaces();\n    }\n    static _getVerticalOffsetForPosition(modelData, modelLineNumber, modelColumn) {\n        const modelPosition = modelData.model.validatePosition({\n            lineNumber: modelLineNumber,\n            column: modelColumn\n        });\n        const viewPosition = modelData.viewModel.coordinatesConverter.convertModelPositionToViewPosition(modelPosition);\n        return modelData.viewModel.viewLayout.getVerticalOffsetForLineNumber(viewPosition.lineNumber);\n    }\n    getTopForLineNumber(lineNumber) {\n        if (!this._modelData) {\n            return -1;\n        }\n        return CodeEditorWidget._getVerticalOffsetForPosition(this._modelData, lineNumber, 1);\n    }\n    getTopForPosition(lineNumber, column) {\n        if (!this._modelData) {\n            return -1;\n        }\n        return CodeEditorWidget._getVerticalOffsetForPosition(this._modelData, lineNumber, column);\n    }\n    setHiddenAreas(ranges) {\n        if (this._modelData) {\n            this._modelData.viewModel.setHiddenAreas(ranges.map(r => Range.lift(r)));\n        }\n    }\n    getVisibleColumnFromPosition(rawPosition) {\n        if (!this._modelData) {\n            return rawPosition.column;\n        }\n        const position = this._modelData.model.validatePosition(rawPosition);\n        const tabSize = this._modelData.model.getOptions().tabSize;\n        return CursorColumns.visibleColumnFromColumn(this._modelData.model.getLineContent(position.lineNumber), position.column, tabSize) + 1;\n    }\n    getPosition() {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.viewModel.getPosition();\n    }\n    setPosition(position) {\n        if (!this._modelData) {\n            return;\n        }\n        if (!Position.isIPosition(position)) {\n            throw new Error('Invalid arguments');\n        }\n        this._modelData.viewModel.setSelections('api', [{\n                selectionStartLineNumber: position.lineNumber,\n                selectionStartColumn: position.column,\n                positionLineNumber: position.lineNumber,\n                positionColumn: position.column\n            }]);\n    }\n    _sendRevealRange(modelRange, verticalType, revealHorizontal, scrollType) {\n        if (!this._modelData) {\n            return;\n        }\n        if (!Range.isIRange(modelRange)) {\n            throw new Error('Invalid arguments');\n        }\n        const validatedModelRange = this._modelData.model.validateRange(modelRange);\n        const viewRange = this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(validatedModelRange);\n        this._modelData.viewModel.revealRange('api', revealHorizontal, viewRange, verticalType, scrollType);\n    }\n    revealLine(lineNumber, scrollType = 0 /* Smooth */) {\n        this._revealLine(lineNumber, 0 /* Simple */, scrollType);\n    }\n    revealLineInCenter(lineNumber, scrollType = 0 /* Smooth */) {\n        this._revealLine(lineNumber, 1 /* Center */, scrollType);\n    }\n    revealLineInCenterIfOutsideViewport(lineNumber, scrollType = 0 /* Smooth */) {\n        this._revealLine(lineNumber, 2 /* CenterIfOutsideViewport */, scrollType);\n    }\n    revealLineNearTop(lineNumber, scrollType = 0 /* Smooth */) {\n        this._revealLine(lineNumber, 5 /* NearTop */, scrollType);\n    }\n    _revealLine(lineNumber, revealType, scrollType) {\n        if (typeof lineNumber !== 'number') {\n            throw new Error('Invalid arguments');\n        }\n        this._sendRevealRange(new Range(lineNumber, 1, lineNumber, 1), revealType, false, scrollType);\n    }\n    revealPosition(position, scrollType = 0 /* Smooth */) {\n        this._revealPosition(position, 0 /* Simple */, true, scrollType);\n    }\n    revealPositionInCenter(position, scrollType = 0 /* Smooth */) {\n        this._revealPosition(position, 1 /* Center */, true, scrollType);\n    }\n    revealPositionInCenterIfOutsideViewport(position, scrollType = 0 /* Smooth */) {\n        this._revealPosition(position, 2 /* CenterIfOutsideViewport */, true, scrollType);\n    }\n    revealPositionNearTop(position, scrollType = 0 /* Smooth */) {\n        this._revealPosition(position, 5 /* NearTop */, true, scrollType);\n    }\n    _revealPosition(position, verticalType, revealHorizontal, scrollType) {\n        if (!Position.isIPosition(position)) {\n            throw new Error('Invalid arguments');\n        }\n        this._sendRevealRange(new Range(position.lineNumber, position.column, position.lineNumber, position.column), verticalType, revealHorizontal, scrollType);\n    }\n    getSelection() {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.viewModel.getSelection();\n    }\n    getSelections() {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.viewModel.getSelections();\n    }\n    setSelection(something) {\n        const isSelection = Selection.isISelection(something);\n        const isRange = Range.isIRange(something);\n        if (!isSelection && !isRange) {\n            throw new Error('Invalid arguments');\n        }\n        if (isSelection) {\n            this._setSelectionImpl(something);\n        }\n        else if (isRange) {\n            // act as if it was an IRange\n            const selection = {\n                selectionStartLineNumber: something.startLineNumber,\n                selectionStartColumn: something.startColumn,\n                positionLineNumber: something.endLineNumber,\n                positionColumn: something.endColumn\n            };\n            this._setSelectionImpl(selection);\n        }\n    }\n    _setSelectionImpl(sel) {\n        if (!this._modelData) {\n            return;\n        }\n        const selection = new Selection(sel.selectionStartLineNumber, sel.selectionStartColumn, sel.positionLineNumber, sel.positionColumn);\n        this._modelData.viewModel.setSelections('api', [selection]);\n    }\n    revealLines(startLineNumber, endLineNumber, scrollType = 0 /* Smooth */) {\n        this._revealLines(startLineNumber, endLineNumber, 0 /* Simple */, scrollType);\n    }\n    revealLinesInCenter(startLineNumber, endLineNumber, scrollType = 0 /* Smooth */) {\n        this._revealLines(startLineNumber, endLineNumber, 1 /* Center */, scrollType);\n    }\n    revealLinesInCenterIfOutsideViewport(startLineNumber, endLineNumber, scrollType = 0 /* Smooth */) {\n        this._revealLines(startLineNumber, endLineNumber, 2 /* CenterIfOutsideViewport */, scrollType);\n    }\n    revealLinesNearTop(startLineNumber, endLineNumber, scrollType = 0 /* Smooth */) {\n        this._revealLines(startLineNumber, endLineNumber, 5 /* NearTop */, scrollType);\n    }\n    _revealLines(startLineNumber, endLineNumber, verticalType, scrollType) {\n        if (typeof startLineNumber !== 'number' || typeof endLineNumber !== 'number') {\n            throw new Error('Invalid arguments');\n        }\n        this._sendRevealRange(new Range(startLineNumber, 1, endLineNumber, 1), verticalType, false, scrollType);\n    }\n    revealRange(range, scrollType = 0 /* Smooth */, revealVerticalInCenter = false, revealHorizontal = true) {\n        this._revealRange(range, revealVerticalInCenter ? 1 /* Center */ : 0 /* Simple */, revealHorizontal, scrollType);\n    }\n    revealRangeInCenter(range, scrollType = 0 /* Smooth */) {\n        this._revealRange(range, 1 /* Center */, true, scrollType);\n    }\n    revealRangeInCenterIfOutsideViewport(range, scrollType = 0 /* Smooth */) {\n        this._revealRange(range, 2 /* CenterIfOutsideViewport */, true, scrollType);\n    }\n    revealRangeNearTop(range, scrollType = 0 /* Smooth */) {\n        this._revealRange(range, 5 /* NearTop */, true, scrollType);\n    }\n    revealRangeNearTopIfOutsideViewport(range, scrollType = 0 /* Smooth */) {\n        this._revealRange(range, 6 /* NearTopIfOutsideViewport */, true, scrollType);\n    }\n    revealRangeAtTop(range, scrollType = 0 /* Smooth */) {\n        this._revealRange(range, 3 /* Top */, true, scrollType);\n    }\n    _revealRange(range, verticalType, revealHorizontal, scrollType) {\n        if (!Range.isIRange(range)) {\n            throw new Error('Invalid arguments');\n        }\n        this._sendRevealRange(Range.lift(range), verticalType, revealHorizontal, scrollType);\n    }\n    setSelections(ranges, source = 'api', reason = 0 /* NotSet */) {\n        if (!this._modelData) {\n            return;\n        }\n        if (!ranges || ranges.length === 0) {\n            throw new Error('Invalid arguments');\n        }\n        for (let i = 0, len = ranges.length; i < len; i++) {\n            if (!Selection.isISelection(ranges[i])) {\n                throw new Error('Invalid arguments');\n            }\n        }\n        this._modelData.viewModel.setSelections(source, ranges, reason);\n    }\n    getContentWidth() {\n        if (!this._modelData) {\n            return -1;\n        }\n        return this._modelData.viewModel.viewLayout.getContentWidth();\n    }\n    getScrollWidth() {\n        if (!this._modelData) {\n            return -1;\n        }\n        return this._modelData.viewModel.viewLayout.getScrollWidth();\n    }\n    getScrollLeft() {\n        if (!this._modelData) {\n            return -1;\n        }\n        return this._modelData.viewModel.viewLayout.getCurrentScrollLeft();\n    }\n    getContentHeight() {\n        if (!this._modelData) {\n            return -1;\n        }\n        return this._modelData.viewModel.viewLayout.getContentHeight();\n    }\n    getScrollHeight() {\n        if (!this._modelData) {\n            return -1;\n        }\n        return this._modelData.viewModel.viewLayout.getScrollHeight();\n    }\n    getScrollTop() {\n        if (!this._modelData) {\n            return -1;\n        }\n        return this._modelData.viewModel.viewLayout.getCurrentScrollTop();\n    }\n    setScrollLeft(newScrollLeft, scrollType = 1 /* Immediate */) {\n        if (!this._modelData) {\n            return;\n        }\n        if (typeof newScrollLeft !== 'number') {\n            throw new Error('Invalid arguments');\n        }\n        this._modelData.viewModel.setScrollPosition({\n            scrollLeft: newScrollLeft\n        }, scrollType);\n    }\n    setScrollTop(newScrollTop, scrollType = 1 /* Immediate */) {\n        if (!this._modelData) {\n            return;\n        }\n        if (typeof newScrollTop !== 'number') {\n            throw new Error('Invalid arguments');\n        }\n        this._modelData.viewModel.setScrollPosition({\n            scrollTop: newScrollTop\n        }, scrollType);\n    }\n    setScrollPosition(position, scrollType = 1 /* Immediate */) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.setScrollPosition(position, scrollType);\n    }\n    saveViewState() {\n        if (!this._modelData) {\n            return null;\n        }\n        const contributionsState = {};\n        const keys = Object.keys(this._contributions);\n        for (const id of keys) {\n            const contribution = this._contributions[id];\n            if (typeof contribution.saveViewState === 'function') {\n                contributionsState[id] = contribution.saveViewState();\n            }\n        }\n        const cursorState = this._modelData.viewModel.saveCursorState();\n        const viewState = this._modelData.viewModel.saveState();\n        return {\n            cursorState: cursorState,\n            viewState: viewState,\n            contributionsState: contributionsState\n        };\n    }\n    restoreViewState(s) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        const codeEditorState = s;\n        if (codeEditorState && codeEditorState.cursorState && codeEditorState.viewState) {\n            const cursorState = codeEditorState.cursorState;\n            if (Array.isArray(cursorState)) {\n                this._modelData.viewModel.restoreCursorState(cursorState);\n            }\n            else {\n                // Backwards compatibility\n                this._modelData.viewModel.restoreCursorState([cursorState]);\n            }\n            const contributionsState = codeEditorState.contributionsState || {};\n            const keys = Object.keys(this._contributions);\n            for (let i = 0, len = keys.length; i < len; i++) {\n                const id = keys[i];\n                const contribution = this._contributions[id];\n                if (typeof contribution.restoreViewState === 'function') {\n                    contribution.restoreViewState(contributionsState[id]);\n                }\n            }\n            const reducedState = this._modelData.viewModel.reduceRestoreState(codeEditorState.viewState);\n            this._modelData.view.restoreState(reducedState);\n        }\n    }\n    getContribution(id) {\n        return (this._contributions[id] || null);\n    }\n    getActions() {\n        const result = [];\n        const keys = Object.keys(this._actions);\n        for (let i = 0, len = keys.length; i < len; i++) {\n            const id = keys[i];\n            result.push(this._actions[id]);\n        }\n        return result;\n    }\n    getSupportedActions() {\n        let result = this.getActions();\n        result = result.filter(action => action.isSupported());\n        return result;\n    }\n    getAction(id) {\n        return this._actions[id] || null;\n    }\n    trigger(source, handlerId, payload) {\n        payload = payload || {};\n        switch (handlerId) {\n            case \"compositionStart\" /* CompositionStart */:\n                this._startComposition();\n                return;\n            case \"compositionEnd\" /* CompositionEnd */:\n                this._endComposition(source);\n                return;\n            case \"type\" /* Type */: {\n                const args = payload;\n                this._type(source, args.text || '');\n                return;\n            }\n            case \"replacePreviousChar\" /* ReplacePreviousChar */: {\n                const args = payload;\n                this._compositionType(source, args.text || '', args.replaceCharCnt || 0, 0, 0);\n                return;\n            }\n            case \"compositionType\" /* CompositionType */: {\n                const args = payload;\n                this._compositionType(source, args.text || '', args.replacePrevCharCnt || 0, args.replaceNextCharCnt || 0, args.positionDelta || 0);\n                return;\n            }\n            case \"paste\" /* Paste */: {\n                const args = payload;\n                this._paste(source, args.text || '', args.pasteOnNewLine || false, args.multicursorText || null, args.mode || null);\n                return;\n            }\n            case \"cut\" /* Cut */:\n                this._cut(source);\n                return;\n        }\n        const action = this.getAction(handlerId);\n        if (action) {\n            Promise.resolve(action.run()).then(undefined, onUnexpectedError);\n            return;\n        }\n        if (!this._modelData) {\n            return;\n        }\n        if (this._triggerEditorCommand(source, handlerId, payload)) {\n            return;\n        }\n        this._triggerCommand(handlerId, payload);\n    }\n    _triggerCommand(handlerId, payload) {\n        this._commandService.executeCommand(handlerId, payload);\n    }\n    _startComposition() {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.startComposition();\n        this._onDidCompositionStart.fire();\n    }\n    _endComposition(source) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.endComposition(source);\n        this._onDidCompositionEnd.fire();\n    }\n    _type(source, text) {\n        if (!this._modelData || text.length === 0) {\n            return;\n        }\n        if (source === 'keyboard') {\n            this._onWillType.fire(text);\n        }\n        this._modelData.viewModel.type(text, source);\n        if (source === 'keyboard') {\n            this._onDidType.fire(text);\n        }\n    }\n    _compositionType(source, text, replacePrevCharCnt, replaceNextCharCnt, positionDelta) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.compositionType(text, replacePrevCharCnt, replaceNextCharCnt, positionDelta, source);\n    }\n    _paste(source, text, pasteOnNewLine, multicursorText, mode) {\n        if (!this._modelData || text.length === 0) {\n            return;\n        }\n        const startPosition = this._modelData.viewModel.getSelection().getStartPosition();\n        this._modelData.viewModel.paste(text, pasteOnNewLine, multicursorText, source);\n        const endPosition = this._modelData.viewModel.getSelection().getStartPosition();\n        if (source === 'keyboard') {\n            this._onDidPaste.fire({\n                range: new Range(startPosition.lineNumber, startPosition.column, endPosition.lineNumber, endPosition.column),\n                languageId: mode\n            });\n        }\n    }\n    _cut(source) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.cut(source);\n    }\n    _triggerEditorCommand(source, handlerId, payload) {\n        const command = EditorExtensionsRegistry.getEditorCommand(handlerId);\n        if (command) {\n            payload = payload || {};\n            payload.source = source;\n            this._instantiationService.invokeFunction((accessor) => {\n                Promise.resolve(command.runEditorCommand(accessor, this, payload)).then(undefined, onUnexpectedError);\n            });\n            return true;\n        }\n        return false;\n    }\n    _getViewModel() {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.viewModel;\n    }\n    pushUndoStop() {\n        if (!this._modelData) {\n            return false;\n        }\n        if (this._configuration.options.get(81 /* readOnly */)) {\n            // read only editor => sorry!\n            return false;\n        }\n        this._modelData.model.pushStackElement();\n        return true;\n    }\n    popUndoStop() {\n        if (!this._modelData) {\n            return false;\n        }\n        if (this._configuration.options.get(81 /* readOnly */)) {\n            // read only editor => sorry!\n            return false;\n        }\n        this._modelData.model.popStackElement();\n        return true;\n    }\n    executeEdits(source, edits, endCursorState) {\n        if (!this._modelData) {\n            return false;\n        }\n        if (this._configuration.options.get(81 /* readOnly */)) {\n            // read only editor => sorry!\n            return false;\n        }\n        let cursorStateComputer;\n        if (!endCursorState) {\n            cursorStateComputer = () => null;\n        }\n        else if (Array.isArray(endCursorState)) {\n            cursorStateComputer = () => endCursorState;\n        }\n        else {\n            cursorStateComputer = endCursorState;\n        }\n        this._modelData.viewModel.executeEdits(source, edits, cursorStateComputer);\n        return true;\n    }\n    executeCommand(source, command) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.executeCommand(command, source);\n    }\n    executeCommands(source, commands) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.executeCommands(commands, source);\n    }\n    changeDecorations(callback) {\n        if (!this._modelData) {\n            // callback will not be called\n            return null;\n        }\n        return this._modelData.model.changeDecorations(callback, this._id);\n    }\n    getLineDecorations(lineNumber) {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.model.getLineDecorations(lineNumber, this._id, filterValidationDecorations(this._configuration.options));\n    }\n    getDecorationsInRange(range) {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.model.getDecorationsInRange(range, this._id, filterValidationDecorations(this._configuration.options));\n    }\n    deltaDecorations(oldDecorations, newDecorations) {\n        if (!this._modelData) {\n            return [];\n        }\n        if (oldDecorations.length === 0 && newDecorations.length === 0) {\n            return oldDecorations;\n        }\n        return this._modelData.model.deltaDecorations(oldDecorations, newDecorations, this._id);\n    }\n    removeDecorations(decorationTypeKey) {\n        // remove decorations for type and sub type\n        const oldDecorationsIds = this._decorationTypeKeysToIds[decorationTypeKey];\n        if (oldDecorationsIds) {\n            this.deltaDecorations(oldDecorationsIds, []);\n        }\n        if (this._decorationTypeKeysToIds.hasOwnProperty(decorationTypeKey)) {\n            delete this._decorationTypeKeysToIds[decorationTypeKey];\n        }\n        if (this._decorationTypeSubtypes.hasOwnProperty(decorationTypeKey)) {\n            delete this._decorationTypeSubtypes[decorationTypeKey];\n        }\n    }\n    getLayoutInfo() {\n        const options = this._configuration.options;\n        const layoutInfo = options.get(131 /* layoutInfo */);\n        return layoutInfo;\n    }\n    createOverviewRuler(cssClassName) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return null;\n        }\n        return this._modelData.view.createOverviewRuler(cssClassName);\n    }\n    getContainerDomNode() {\n        return this._domElement;\n    }\n    getDomNode() {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return null;\n        }\n        return this._modelData.view.domNode.domNode;\n    }\n    delegateVerticalScrollbarMouseDown(browserEvent) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        this._modelData.view.delegateVerticalScrollbarMouseDown(browserEvent);\n    }\n    layout(dimension) {\n        this._configuration.observeContainer(dimension);\n        this.render();\n    }\n    focus() {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        this._modelData.view.focus();\n    }\n    hasTextFocus() {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return false;\n        }\n        return this._modelData.view.isFocused();\n    }\n    hasWidgetFocus() {\n        return this._focusTracker && this._focusTracker.hasFocus();\n    }\n    addContentWidget(widget) {\n        const widgetData = {\n            widget: widget,\n            position: widget.getPosition()\n        };\n        if (this._contentWidgets.hasOwnProperty(widget.getId())) {\n            console.warn('Overwriting a content widget with the same id.');\n        }\n        this._contentWidgets[widget.getId()] = widgetData;\n        if (this._modelData && this._modelData.hasRealView) {\n            this._modelData.view.addContentWidget(widgetData);\n        }\n    }\n    layoutContentWidget(widget) {\n        const widgetId = widget.getId();\n        if (this._contentWidgets.hasOwnProperty(widgetId)) {\n            const widgetData = this._contentWidgets[widgetId];\n            widgetData.position = widget.getPosition();\n            if (this._modelData && this._modelData.hasRealView) {\n                this._modelData.view.layoutContentWidget(widgetData);\n            }\n        }\n    }\n    removeContentWidget(widget) {\n        const widgetId = widget.getId();\n        if (this._contentWidgets.hasOwnProperty(widgetId)) {\n            const widgetData = this._contentWidgets[widgetId];\n            delete this._contentWidgets[widgetId];\n            if (this._modelData && this._modelData.hasRealView) {\n                this._modelData.view.removeContentWidget(widgetData);\n            }\n        }\n    }\n    addOverlayWidget(widget) {\n        const widgetData = {\n            widget: widget,\n            position: widget.getPosition()\n        };\n        if (this._overlayWidgets.hasOwnProperty(widget.getId())) {\n            console.warn('Overwriting an overlay widget with the same id.');\n        }\n        this._overlayWidgets[widget.getId()] = widgetData;\n        if (this._modelData && this._modelData.hasRealView) {\n            this._modelData.view.addOverlayWidget(widgetData);\n        }\n    }\n    layoutOverlayWidget(widget) {\n        const widgetId = widget.getId();\n        if (this._overlayWidgets.hasOwnProperty(widgetId)) {\n            const widgetData = this._overlayWidgets[widgetId];\n            widgetData.position = widget.getPosition();\n            if (this._modelData && this._modelData.hasRealView) {\n                this._modelData.view.layoutOverlayWidget(widgetData);\n            }\n        }\n    }\n    removeOverlayWidget(widget) {\n        const widgetId = widget.getId();\n        if (this._overlayWidgets.hasOwnProperty(widgetId)) {\n            const widgetData = this._overlayWidgets[widgetId];\n            delete this._overlayWidgets[widgetId];\n            if (this._modelData && this._modelData.hasRealView) {\n                this._modelData.view.removeOverlayWidget(widgetData);\n            }\n        }\n    }\n    changeViewZones(callback) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        this._modelData.view.change(callback);\n    }\n    getTargetAtClientPoint(clientX, clientY) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return null;\n        }\n        return this._modelData.view.getTargetAtClientPoint(clientX, clientY);\n    }\n    getScrolledVisiblePosition(rawPosition) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return null;\n        }\n        const position = this._modelData.model.validatePosition(rawPosition);\n        const options = this._configuration.options;\n        const layoutInfo = options.get(131 /* layoutInfo */);\n        const top = CodeEditorWidget._getVerticalOffsetForPosition(this._modelData, position.lineNumber, position.column) - this.getScrollTop();\n        const left = this._modelData.view.getOffsetForColumn(position.lineNumber, position.column) + layoutInfo.glyphMarginWidth + layoutInfo.lineNumbersWidth + layoutInfo.decorationsWidth - this.getScrollLeft();\n        return {\n            top: top,\n            left: left,\n            height: options.get(59 /* lineHeight */)\n        };\n    }\n    getOffsetForColumn(lineNumber, column) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return -1;\n        }\n        return this._modelData.view.getOffsetForColumn(lineNumber, column);\n    }\n    render(forceRedraw = false) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        this._modelData.view.render(true, forceRedraw);\n    }\n    setAriaOptions(options) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        this._modelData.view.setAriaOptions(options);\n    }\n    applyFontInfo(target) {\n        applyFontInfo(target, this._configuration.options.get(44 /* fontInfo */));\n    }\n    setBanner(domNode, domNodeHeight) {\n        if (this._bannerDomNode && this._domElement.contains(this._bannerDomNode)) {\n            this._domElement.removeChild(this._bannerDomNode);\n        }\n        this._bannerDomNode = domNode;\n        this._configuration.setReservedHeight(domNode ? domNodeHeight : 0);\n        if (this._bannerDomNode) {\n            this._domElement.prepend(this._bannerDomNode);\n        }\n    }\n    _attachModel(model) {\n        if (!model) {\n            this._modelData = null;\n            return;\n        }\n        const listenersToRemove = [];\n        this._domElement.setAttribute('data-mode-id', model.getLanguageId());\n        this._configuration.setIsDominatedByLongLines(model.isDominatedByLongLines());\n        this._configuration.setModelLineCount(model.getLineCount());\n        model.onBeforeAttached();\n        const viewModel = new ViewModel(this._id, this._configuration, model, DOMLineBreaksComputerFactory.create(), MonospaceLineBreaksComputerFactory.create(this._configuration.options), (callback) => dom.scheduleAtNextAnimationFrame(callback), this.languageConfigurationService);\n        listenersToRemove.push(model.onDidChangeDecorations((e) => this._onDidChangeModelDecorations.fire(e)));\n        listenersToRemove.push(model.onDidChangeLanguage((e) => {\n            this._domElement.setAttribute('data-mode-id', model.getLanguageId());\n            this._onDidChangeModelLanguage.fire(e);\n        }));\n        listenersToRemove.push(model.onDidChangeLanguageConfiguration((e) => this._onDidChangeModelLanguageConfiguration.fire(e)));\n        listenersToRemove.push(model.onDidChangeContent((e) => this._onDidChangeModelContent.fire(e)));\n        listenersToRemove.push(model.onDidChangeOptions((e) => this._onDidChangeModelOptions.fire(e)));\n        // Someone might destroy the model from under the editor, so prevent any exceptions by setting a null model\n        listenersToRemove.push(model.onWillDispose(() => this.setModel(null)));\n        listenersToRemove.push(viewModel.onEvent((e) => {\n            switch (e.kind) {\n                case 0 /* ContentSizeChanged */:\n                    this._onDidContentSizeChange.fire(e);\n                    break;\n                case 1 /* FocusChanged */:\n                    this._editorTextFocus.setValue(e.hasFocus);\n                    break;\n                case 2 /* ScrollChanged */:\n                    this._onDidScrollChange.fire(e);\n                    break;\n                case 3 /* ViewZonesChanged */:\n                    this._onDidChangeViewZones.fire();\n                    break;\n                case 4 /* HiddenAreasChanged */:\n                    this._onDidChangeHiddenAreas.fire();\n                    break;\n                case 5 /* ReadOnlyEditAttempt */:\n                    this._onDidAttemptReadOnlyEdit.fire();\n                    break;\n                case 6 /* CursorStateChanged */: {\n                    if (e.reachedMaxCursorCount) {\n                        this._notificationService.warn(nls.localize('cursors.maximum', \"The number of cursors has been limited to {0}.\", CursorsController.MAX_CURSOR_COUNT));\n                    }\n                    const positions = [];\n                    for (let i = 0, len = e.selections.length; i < len; i++) {\n                        positions[i] = e.selections[i].getPosition();\n                    }\n                    const e1 = {\n                        position: positions[0],\n                        secondaryPositions: positions.slice(1),\n                        reason: e.reason,\n                        source: e.source\n                    };\n                    this._onDidChangeCursorPosition.fire(e1);\n                    const e2 = {\n                        selection: e.selections[0],\n                        secondarySelections: e.selections.slice(1),\n                        modelVersionId: e.modelVersionId,\n                        oldSelections: e.oldSelections,\n                        oldModelVersionId: e.oldModelVersionId,\n                        source: e.source,\n                        reason: e.reason\n                    };\n                    this._onDidChangeCursorSelection.fire(e2);\n                    break;\n                }\n            }\n        }));\n        const [view, hasRealView] = this._createView(viewModel);\n        if (hasRealView) {\n            this._domElement.appendChild(view.domNode.domNode);\n            let keys = Object.keys(this._contentWidgets);\n            for (let i = 0, len = keys.length; i < len; i++) {\n                const widgetId = keys[i];\n                view.addContentWidget(this._contentWidgets[widgetId]);\n            }\n            keys = Object.keys(this._overlayWidgets);\n            for (let i = 0, len = keys.length; i < len; i++) {\n                const widgetId = keys[i];\n                view.addOverlayWidget(this._overlayWidgets[widgetId]);\n            }\n            view.render(false, true);\n            view.domNode.domNode.setAttribute('data-uri', model.uri.toString());\n        }\n        this._modelData = new ModelData(model, viewModel, view, hasRealView, listenersToRemove);\n    }\n    _createView(viewModel) {\n        let commandDelegate;\n        if (this.isSimpleWidget) {\n            commandDelegate = {\n                paste: (text, pasteOnNewLine, multicursorText, mode) => {\n                    this._paste('keyboard', text, pasteOnNewLine, multicursorText, mode);\n                },\n                type: (text) => {\n                    this._type('keyboard', text);\n                },\n                compositionType: (text, replacePrevCharCnt, replaceNextCharCnt, positionDelta) => {\n                    this._compositionType('keyboard', text, replacePrevCharCnt, replaceNextCharCnt, positionDelta);\n                },\n                startComposition: () => {\n                    this._startComposition();\n                },\n                endComposition: () => {\n                    this._endComposition('keyboard');\n                },\n                cut: () => {\n                    this._cut('keyboard');\n                }\n            };\n        }\n        else {\n            commandDelegate = {\n                paste: (text, pasteOnNewLine, multicursorText, mode) => {\n                    const payload = { text, pasteOnNewLine, multicursorText, mode };\n                    this._commandService.executeCommand(\"paste\" /* Paste */, payload);\n                },\n                type: (text) => {\n                    const payload = { text };\n                    this._commandService.executeCommand(\"type\" /* Type */, payload);\n                },\n                compositionType: (text, replacePrevCharCnt, replaceNextCharCnt, positionDelta) => {\n                    // Try if possible to go through the existing `replacePreviousChar` command\n                    if (replaceNextCharCnt || positionDelta) {\n                        // must be handled through the new command\n                        const payload = { text, replacePrevCharCnt, replaceNextCharCnt, positionDelta };\n                        this._commandService.executeCommand(\"compositionType\" /* CompositionType */, payload);\n                    }\n                    else {\n                        const payload = { text, replaceCharCnt: replacePrevCharCnt };\n                        this._commandService.executeCommand(\"replacePreviousChar\" /* ReplacePreviousChar */, payload);\n                    }\n                },\n                startComposition: () => {\n                    this._commandService.executeCommand(\"compositionStart\" /* CompositionStart */, {});\n                },\n                endComposition: () => {\n                    this._commandService.executeCommand(\"compositionEnd\" /* CompositionEnd */, {});\n                },\n                cut: () => {\n                    this._commandService.executeCommand(\"cut\" /* Cut */, {});\n                }\n            };\n        }\n        const viewUserInputEvents = new ViewUserInputEvents(viewModel.coordinatesConverter);\n        viewUserInputEvents.onKeyDown = (e) => this._onKeyDown.fire(e);\n        viewUserInputEvents.onKeyUp = (e) => this._onKeyUp.fire(e);\n        viewUserInputEvents.onContextMenu = (e) => this._onContextMenu.fire(e);\n        viewUserInputEvents.onMouseMove = (e) => this._onMouseMove.fire(e);\n        viewUserInputEvents.onMouseLeave = (e) => this._onMouseLeave.fire(e);\n        viewUserInputEvents.onMouseDown = (e) => this._onMouseDown.fire(e);\n        viewUserInputEvents.onMouseUp = (e) => this._onMouseUp.fire(e);\n        viewUserInputEvents.onMouseDrag = (e) => this._onMouseDrag.fire(e);\n        viewUserInputEvents.onMouseDrop = (e) => this._onMouseDrop.fire(e);\n        viewUserInputEvents.onMouseDropCanceled = (e) => this._onMouseDropCanceled.fire(e);\n        viewUserInputEvents.onMouseWheel = (e) => this._onMouseWheel.fire(e);\n        const view = new View(commandDelegate, this._configuration, this._themeService, viewModel, viewUserInputEvents, this._overflowWidgetsDomNode);\n        return [view, true];\n    }\n    _postDetachModelCleanup(detachedModel) {\n        if (detachedModel) {\n            detachedModel.removeAllDecorationsWithOwnerId(this._id);\n        }\n    }\n    _detachModel() {\n        if (!this._modelData) {\n            return null;\n        }\n        const model = this._modelData.model;\n        const removeDomNode = this._modelData.hasRealView ? this._modelData.view.domNode.domNode : null;\n        this._modelData.dispose();\n        this._modelData = null;\n        this._domElement.removeAttribute('data-mode-id');\n        if (removeDomNode && this._domElement.contains(removeDomNode)) {\n            this._domElement.removeChild(removeDomNode);\n        }\n        if (this._bannerDomNode && this._domElement.contains(this._bannerDomNode)) {\n            this._domElement.removeChild(this._bannerDomNode);\n        }\n        return model;\n    }\n    _removeDecorationType(key) {\n        this._codeEditorService.removeDecorationType(key);\n    }\n    hasModel() {\n        return (this._modelData !== null);\n    }\n};\nCodeEditorWidget = __decorate([\n    __param(3, IInstantiationService),\n    __param(4, ICodeEditorService),\n    __param(5, ICommandService),\n    __param(6, IContextKeyService),\n    __param(7, IThemeService),\n    __param(8, INotificationService),\n    __param(9, IAccessibilityService),\n    __param(10, ILanguageConfigurationService)\n], CodeEditorWidget);\nexport { CodeEditorWidget };\nexport class BooleanEventEmitter extends Disposable {\n    constructor() {\n        super();\n        this._onDidChangeToTrue = this._register(new Emitter());\n        this.onDidChangeToTrue = this._onDidChangeToTrue.event;\n        this._onDidChangeToFalse = this._register(new Emitter());\n        this.onDidChangeToFalse = this._onDidChangeToFalse.event;\n        this._value = 0 /* NotSet */;\n    }\n    setValue(_value) {\n        const value = (_value ? 2 /* True */ : 1 /* False */);\n        if (this._value === value) {\n            return;\n        }\n        this._value = value;\n        if (this._value === 2 /* True */) {\n            this._onDidChangeToTrue.fire();\n        }\n        else if (this._value === 1 /* False */) {\n            this._onDidChangeToFalse.fire();\n        }\n    }\n}\nclass EditorContextKeysManager extends Disposable {\n    constructor(editor, contextKeyService) {\n        super();\n        this._editor = editor;\n        contextKeyService.createKey('editorId', editor.getId());\n        this._editorSimpleInput = EditorContextKeys.editorSimpleInput.bindTo(contextKeyService);\n        this._editorFocus = EditorContextKeys.focus.bindTo(contextKeyService);\n        this._textInputFocus = EditorContextKeys.textInputFocus.bindTo(contextKeyService);\n        this._editorTextFocus = EditorContextKeys.editorTextFocus.bindTo(contextKeyService);\n        this._editorTabMovesFocus = EditorContextKeys.tabMovesFocus.bindTo(contextKeyService);\n        this._editorReadonly = EditorContextKeys.readOnly.bindTo(contextKeyService);\n        this._inDiffEditor = EditorContextKeys.inDiffEditor.bindTo(contextKeyService);\n        this._editorColumnSelection = EditorContextKeys.columnSelection.bindTo(contextKeyService);\n        this._hasMultipleSelections = EditorContextKeys.hasMultipleSelections.bindTo(contextKeyService);\n        this._hasNonEmptySelection = EditorContextKeys.hasNonEmptySelection.bindTo(contextKeyService);\n        this._canUndo = EditorContextKeys.canUndo.bindTo(contextKeyService);\n        this._canRedo = EditorContextKeys.canRedo.bindTo(contextKeyService);\n        this._register(this._editor.onDidChangeConfiguration(() => this._updateFromConfig()));\n        this._register(this._editor.onDidChangeCursorSelection(() => this._updateFromSelection()));\n        this._register(this._editor.onDidFocusEditorWidget(() => this._updateFromFocus()));\n        this._register(this._editor.onDidBlurEditorWidget(() => this._updateFromFocus()));\n        this._register(this._editor.onDidFocusEditorText(() => this._updateFromFocus()));\n        this._register(this._editor.onDidBlurEditorText(() => this._updateFromFocus()));\n        this._register(this._editor.onDidChangeModel(() => this._updateFromModel()));\n        this._register(this._editor.onDidChangeConfiguration(() => this._updateFromModel()));\n        this._updateFromConfig();\n        this._updateFromSelection();\n        this._updateFromFocus();\n        this._updateFromModel();\n        this._editorSimpleInput.set(this._editor.isSimpleWidget);\n    }\n    _updateFromConfig() {\n        const options = this._editor.getOptions();\n        this._editorTabMovesFocus.set(options.get(130 /* tabFocusMode */));\n        this._editorReadonly.set(options.get(81 /* readOnly */));\n        this._inDiffEditor.set(options.get(54 /* inDiffEditor */));\n        this._editorColumnSelection.set(options.get(18 /* columnSelection */));\n    }\n    _updateFromSelection() {\n        const selections = this._editor.getSelections();\n        if (!selections) {\n            this._hasMultipleSelections.reset();\n            this._hasNonEmptySelection.reset();\n        }\n        else {\n            this._hasMultipleSelections.set(selections.length > 1);\n            this._hasNonEmptySelection.set(selections.some(s => !s.isEmpty()));\n        }\n    }\n    _updateFromFocus() {\n        this._editorFocus.set(this._editor.hasWidgetFocus() && !this._editor.isSimpleWidget);\n        this._editorTextFocus.set(this._editor.hasTextFocus() && !this._editor.isSimpleWidget);\n        this._textInputFocus.set(this._editor.hasTextFocus());\n    }\n    _updateFromModel() {\n        const model = this._editor.getModel();\n        this._canUndo.set(Boolean(model && model.canUndo()));\n        this._canRedo.set(Boolean(model && model.canRedo()));\n    }\n}\nexport class EditorModeContext extends Disposable {\n    constructor(_editor, _contextKeyService) {\n        super();\n        this._editor = _editor;\n        this._contextKeyService = _contextKeyService;\n        this._langId = EditorContextKeys.languageId.bindTo(_contextKeyService);\n        this._hasCompletionItemProvider = EditorContextKeys.hasCompletionItemProvider.bindTo(_contextKeyService);\n        this._hasCodeActionsProvider = EditorContextKeys.hasCodeActionsProvider.bindTo(_contextKeyService);\n        this._hasCodeLensProvider = EditorContextKeys.hasCodeLensProvider.bindTo(_contextKeyService);\n        this._hasDefinitionProvider = EditorContextKeys.hasDefinitionProvider.bindTo(_contextKeyService);\n        this._hasDeclarationProvider = EditorContextKeys.hasDeclarationProvider.bindTo(_contextKeyService);\n        this._hasImplementationProvider = EditorContextKeys.hasImplementationProvider.bindTo(_contextKeyService);\n        this._hasTypeDefinitionProvider = EditorContextKeys.hasTypeDefinitionProvider.bindTo(_contextKeyService);\n        this._hasHoverProvider = EditorContextKeys.hasHoverProvider.bindTo(_contextKeyService);\n        this._hasDocumentHighlightProvider = EditorContextKeys.hasDocumentHighlightProvider.bindTo(_contextKeyService);\n        this._hasDocumentSymbolProvider = EditorContextKeys.hasDocumentSymbolProvider.bindTo(_contextKeyService);\n        this._hasReferenceProvider = EditorContextKeys.hasReferenceProvider.bindTo(_contextKeyService);\n        this._hasRenameProvider = EditorContextKeys.hasRenameProvider.bindTo(_contextKeyService);\n        this._hasSignatureHelpProvider = EditorContextKeys.hasSignatureHelpProvider.bindTo(_contextKeyService);\n        this._hasInlayHintsProvider = EditorContextKeys.hasInlayHintsProvider.bindTo(_contextKeyService);\n        this._hasDocumentFormattingProvider = EditorContextKeys.hasDocumentFormattingProvider.bindTo(_contextKeyService);\n        this._hasDocumentSelectionFormattingProvider = EditorContextKeys.hasDocumentSelectionFormattingProvider.bindTo(_contextKeyService);\n        this._hasMultipleDocumentFormattingProvider = EditorContextKeys.hasMultipleDocumentFormattingProvider.bindTo(_contextKeyService);\n        this._hasMultipleDocumentSelectionFormattingProvider = EditorContextKeys.hasMultipleDocumentSelectionFormattingProvider.bindTo(_contextKeyService);\n        this._isInWalkThrough = EditorContextKeys.isInWalkThroughSnippet.bindTo(_contextKeyService);\n        const update = () => this._update();\n        // update when model/mode changes\n        this._register(_editor.onDidChangeModel(update));\n        this._register(_editor.onDidChangeModelLanguage(update));\n        // update when registries change\n        this._register(modes.CompletionProviderRegistry.onDidChange(update));\n        this._register(modes.CodeActionProviderRegistry.onDidChange(update));\n        this._register(modes.CodeLensProviderRegistry.onDidChange(update));\n        this._register(modes.DefinitionProviderRegistry.onDidChange(update));\n        this._register(modes.DeclarationProviderRegistry.onDidChange(update));\n        this._register(modes.ImplementationProviderRegistry.onDidChange(update));\n        this._register(modes.TypeDefinitionProviderRegistry.onDidChange(update));\n        this._register(modes.HoverProviderRegistry.onDidChange(update));\n        this._register(modes.DocumentHighlightProviderRegistry.onDidChange(update));\n        this._register(modes.DocumentSymbolProviderRegistry.onDidChange(update));\n        this._register(modes.ReferenceProviderRegistry.onDidChange(update));\n        this._register(modes.RenameProviderRegistry.onDidChange(update));\n        this._register(modes.DocumentFormattingEditProviderRegistry.onDidChange(update));\n        this._register(modes.DocumentRangeFormattingEditProviderRegistry.onDidChange(update));\n        this._register(modes.SignatureHelpProviderRegistry.onDidChange(update));\n        this._register(modes.InlayHintsProviderRegistry.onDidChange(update));\n        update();\n    }\n    dispose() {\n        super.dispose();\n    }\n    reset() {\n        this._contextKeyService.bufferChangeEvents(() => {\n            this._langId.reset();\n            this._hasCompletionItemProvider.reset();\n            this._hasCodeActionsProvider.reset();\n            this._hasCodeLensProvider.reset();\n            this._hasDefinitionProvider.reset();\n            this._hasDeclarationProvider.reset();\n            this._hasImplementationProvider.reset();\n            this._hasTypeDefinitionProvider.reset();\n            this._hasHoverProvider.reset();\n            this._hasDocumentHighlightProvider.reset();\n            this._hasDocumentSymbolProvider.reset();\n            this._hasReferenceProvider.reset();\n            this._hasRenameProvider.reset();\n            this._hasDocumentFormattingProvider.reset();\n            this._hasDocumentSelectionFormattingProvider.reset();\n            this._hasSignatureHelpProvider.reset();\n            this._isInWalkThrough.reset();\n        });\n    }\n    _update() {\n        const model = this._editor.getModel();\n        if (!model) {\n            this.reset();\n            return;\n        }\n        this._contextKeyService.bufferChangeEvents(() => {\n            this._langId.set(model.getLanguageId());\n            this._hasCompletionItemProvider.set(modes.CompletionProviderRegistry.has(model));\n            this._hasCodeActionsProvider.set(modes.CodeActionProviderRegistry.has(model));\n            this._hasCodeLensProvider.set(modes.CodeLensProviderRegistry.has(model));\n            this._hasDefinitionProvider.set(modes.DefinitionProviderRegistry.has(model));\n            this._hasDeclarationProvider.set(modes.DeclarationProviderRegistry.has(model));\n            this._hasImplementationProvider.set(modes.ImplementationProviderRegistry.has(model));\n            this._hasTypeDefinitionProvider.set(modes.TypeDefinitionProviderRegistry.has(model));\n            this._hasHoverProvider.set(modes.HoverProviderRegistry.has(model));\n            this._hasDocumentHighlightProvider.set(modes.DocumentHighlightProviderRegistry.has(model));\n            this._hasDocumentSymbolProvider.set(modes.DocumentSymbolProviderRegistry.has(model));\n            this._hasReferenceProvider.set(modes.ReferenceProviderRegistry.has(model));\n            this._hasRenameProvider.set(modes.RenameProviderRegistry.has(model));\n            this._hasSignatureHelpProvider.set(modes.SignatureHelpProviderRegistry.has(model));\n            this._hasInlayHintsProvider.set(modes.InlayHintsProviderRegistry.has(model));\n            this._hasDocumentFormattingProvider.set(modes.DocumentFormattingEditProviderRegistry.has(model) || modes.DocumentRangeFormattingEditProviderRegistry.has(model));\n            this._hasDocumentSelectionFormattingProvider.set(modes.DocumentRangeFormattingEditProviderRegistry.has(model));\n            this._hasMultipleDocumentFormattingProvider.set(modes.DocumentFormattingEditProviderRegistry.all(model).length + modes.DocumentRangeFormattingEditProviderRegistry.all(model).length > 1);\n            this._hasMultipleDocumentSelectionFormattingProvider.set(modes.DocumentRangeFormattingEditProviderRegistry.all(model).length > 1);\n            this._isInWalkThrough.set(model.uri.scheme === Schemas.walkThroughSnippet);\n        });\n    }\n}\nclass CodeEditorWidgetFocusTracker extends Disposable {\n    constructor(domElement) {\n        super();\n        this._onChange = this._register(new Emitter());\n        this.onChange = this._onChange.event;\n        this._hasFocus = false;\n        this._domFocusTracker = this._register(dom.trackFocus(domElement));\n        this._register(this._domFocusTracker.onDidFocus(() => {\n            this._hasFocus = true;\n            this._onChange.fire(undefined);\n        }));\n        this._register(this._domFocusTracker.onDidBlur(() => {\n            this._hasFocus = false;\n            this._onChange.fire(undefined);\n        }));\n    }\n    hasFocus() {\n        return this._hasFocus;\n    }\n}\nconst squigglyStart = encodeURIComponent(`<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='`);\nconst squigglyEnd = encodeURIComponent(`'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>`);\nfunction getSquigglySVGData(color) {\n    return squigglyStart + encodeURIComponent(color.toString()) + squigglyEnd;\n}\nconst dotdotdotStart = encodeURIComponent(`<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"3\" width=\"12\"><g fill=\"`);\nconst dotdotdotEnd = encodeURIComponent(`\"><circle cx=\"1\" cy=\"1\" r=\"1\"/><circle cx=\"5\" cy=\"1\" r=\"1\"/><circle cx=\"9\" cy=\"1\" r=\"1\"/></g></svg>`);\nfunction getDotDotDotSVGData(color) {\n    return dotdotdotStart + encodeURIComponent(color.toString()) + dotdotdotEnd;\n}\nregisterThemingParticipant((theme, collector) => {\n    const errorBorderColor = theme.getColor(editorErrorBorder);\n    if (errorBorderColor) {\n        collector.addRule(`.monaco-editor .${\"squiggly-error\" /* EditorErrorDecoration */} { border-bottom: 4px double ${errorBorderColor}; }`);\n    }\n    const errorForeground = theme.getColor(editorErrorForeground);\n    if (errorForeground) {\n        collector.addRule(`.monaco-editor .${\"squiggly-error\" /* EditorErrorDecoration */} { background: url(\"data:image/svg+xml,${getSquigglySVGData(errorForeground)}\") repeat-x bottom left; }`);\n    }\n    const errorBackground = theme.getColor(editorErrorBackground);\n    if (errorBackground) {\n        collector.addRule(`.monaco-editor .${\"squiggly-error\" /* EditorErrorDecoration */}::before { display: block; content: ''; width: 100%; height: 100%; background: ${errorBackground}; }`);\n    }\n    const warningBorderColor = theme.getColor(editorWarningBorder);\n    if (warningBorderColor) {\n        collector.addRule(`.monaco-editor .${\"squiggly-warning\" /* EditorWarningDecoration */} { border-bottom: 4px double ${warningBorderColor}; }`);\n    }\n    const warningForeground = theme.getColor(editorWarningForeground);\n    if (warningForeground) {\n        collector.addRule(`.monaco-editor .${\"squiggly-warning\" /* EditorWarningDecoration */} { background: url(\"data:image/svg+xml,${getSquigglySVGData(warningForeground)}\") repeat-x bottom left; }`);\n    }\n    const warningBackground = theme.getColor(editorWarningBackground);\n    if (warningBackground) {\n        collector.addRule(`.monaco-editor .${\"squiggly-warning\" /* EditorWarningDecoration */}::before { display: block; content: ''; width: 100%; height: 100%; background: ${warningBackground}; }`);\n    }\n    const infoBorderColor = theme.getColor(editorInfoBorder);\n    if (infoBorderColor) {\n        collector.addRule(`.monaco-editor .${\"squiggly-info\" /* EditorInfoDecoration */} { border-bottom: 4px double ${infoBorderColor}; }`);\n    }\n    const infoForeground = theme.getColor(editorInfoForeground);\n    if (infoForeground) {\n        collector.addRule(`.monaco-editor .${\"squiggly-info\" /* EditorInfoDecoration */} { background: url(\"data:image/svg+xml,${getSquigglySVGData(infoForeground)}\") repeat-x bottom left; }`);\n    }\n    const infoBackground = theme.getColor(editorInfoBackground);\n    if (infoBackground) {\n        collector.addRule(`.monaco-editor .${\"squiggly-info\" /* EditorInfoDecoration */}::before { display: block; content: ''; width: 100%; height: 100%; background: ${infoBackground}; }`);\n    }\n    const hintBorderColor = theme.getColor(editorHintBorder);\n    if (hintBorderColor) {\n        collector.addRule(`.monaco-editor .${\"squiggly-hint\" /* EditorHintDecoration */} { border-bottom: 2px dotted ${hintBorderColor}; }`);\n    }\n    const hintForeground = theme.getColor(editorHintForeground);\n    if (hintForeground) {\n        collector.addRule(`.monaco-editor .${\"squiggly-hint\" /* EditorHintDecoration */} { background: url(\"data:image/svg+xml,${getDotDotDotSVGData(hintForeground)}\") no-repeat bottom left; }`);\n    }\n    const unnecessaryForeground = theme.getColor(editorUnnecessaryCodeOpacity);\n    if (unnecessaryForeground) {\n        collector.addRule(`.monaco-editor.showUnused .${\"squiggly-inline-unnecessary\" /* EditorUnnecessaryInlineDecoration */} { opacity: ${unnecessaryForeground.rgba.a}; }`);\n    }\n    const unnecessaryBorder = theme.getColor(editorUnnecessaryCodeBorder);\n    if (unnecessaryBorder) {\n        collector.addRule(`.monaco-editor.showUnused .${\"squiggly-unnecessary\" /* EditorUnnecessaryDecoration */} { border-bottom: 2px dashed ${unnecessaryBorder}; }`);\n    }\n    const deprecatedForeground = theme.getColor(editorForeground) || 'inherit';\n    collector.addRule(`.monaco-editor.showDeprecated .${\"squiggly-inline-deprecated\" /* EditorDeprecatedInlineDecoration */} { text-decoration: line-through; text-decoration-color: ${deprecatedForeground}}`);\n});\n"]},"metadata":{},"sourceType":"module"}