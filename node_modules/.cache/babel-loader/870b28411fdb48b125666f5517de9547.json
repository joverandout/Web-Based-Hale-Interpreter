{"ast":null,"code":"import { getPathFromState, NavigationContainerRefContext, NavigationHelpersContext } from '@react-navigation/core';\nimport * as React from 'react';\nimport { Platform } from 'react-native';\nimport LinkingContext from './LinkingContext';\nimport useLinkTo from './useLinkTo';\n\nconst getStateFromParams = params => {\n  if (params !== null && params !== void 0 && params.state) {\n    return params.state;\n  }\n\n  if (params !== null && params !== void 0 && params.screen) {\n    return {\n      routes: [{\n        name: params.screen,\n        params: params.params,\n        // @ts-expect-error\n        state: params.screen ? getStateFromParams(params.params) : undefined\n      }]\n    };\n  }\n\n  return undefined;\n};\n/**\n * Hook to get props for an anchor tag so it can work with in page navigation.\n *\n * @param props.to Absolute path to screen (e.g. `/feeds/hot`).\n * @param props.action Optional action to use for in-page navigation. By default, the path is parsed to an action based on linking config.\n */\n\n\nexport default function useLinkProps(_ref) {\n  var _options$getPathFromS;\n\n  let {\n    to,\n    action\n  } = _ref;\n  const root = React.useContext(NavigationContainerRefContext);\n  const navigation = React.useContext(NavigationHelpersContext);\n  const {\n    options\n  } = React.useContext(LinkingContext);\n  const linkTo = useLinkTo();\n\n  const onPress = e => {\n    var _e$currentTarget;\n\n    let shouldHandle = false;\n\n    if (Platform.OS !== 'web' || !e) {\n      shouldHandle = e ? !e.defaultPrevented : true;\n    } else if (!e.defaultPrevented && // onPress prevented default\n    // @ts-expect-error: these properties exist on web, but not in React Native\n    !(e.metaKey || e.altKey || e.ctrlKey || e.shiftKey) && ( // ignore clicks with modifier keys\n    // @ts-expect-error: these properties exist on web, but not in React Native\n    e.button == null || e.button === 0) && // ignore everything but left clicks\n    // @ts-expect-error: these properties exist on web, but not in React Native\n    [undefined, null, '', 'self'].includes((_e$currentTarget = e.currentTarget) === null || _e$currentTarget === void 0 ? void 0 : _e$currentTarget.target) // let browser handle \"target=_blank\" etc.\n    ) {\n      e.preventDefault();\n      shouldHandle = true;\n    }\n\n    if (shouldHandle) {\n      if (action) {\n        if (navigation) {\n          navigation.dispatch(action);\n        } else if (root) {\n          root.dispatch(action);\n        } else {\n          throw new Error(\"Couldn't find a navigation object. Is your component inside NavigationContainer?\");\n        }\n      } else {\n        linkTo(to);\n      }\n    }\n  };\n\n  const getPathFromStateHelper = (_options$getPathFromS = options === null || options === void 0 ? void 0 : options.getPathFromState) !== null && _options$getPathFromS !== void 0 ? _options$getPathFromS : getPathFromState;\n  const href = typeof to === 'string' ? to : getPathFromStateHelper({\n    routes: [{\n      name: to.screen,\n      // @ts-expect-error\n      params: to.params,\n      // @ts-expect-error\n      state: getStateFromParams(to.params)\n    }]\n  }, options === null || options === void 0 ? void 0 : options.config);\n  return {\n    href,\n    accessibilityRole: 'link',\n    onPress\n  };\n}","map":{"version":3,"sources":["useLinkProps.tsx"],"names":["getStateFromParams","params","routes","name","state","undefined","action","root","React","navigation","options","linkTo","useLinkTo","onPress","e","shouldHandle","Platform","getPathFromStateHelper","href","to","accessibilityRole"],"mappings":"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","sourcesContent":["import {\n  getPathFromState,\n  NavigationAction,\n  NavigationContainerRefContext,\n  NavigationHelpersContext,\n  NavigatorScreenParams,\n  ParamListBase,\n} from '@react-navigation/core';\nimport type { NavigationState, PartialState } from '@react-navigation/routers';\nimport * as React from 'react';\nimport { GestureResponderEvent, Platform } from 'react-native';\n\nimport LinkingContext from './LinkingContext';\nimport useLinkTo, { To } from './useLinkTo';\n\ntype Props<ParamList extends ReactNavigation.RootParamList> = {\n  to: To<ParamList>;\n  action?: NavigationAction;\n};\n\nconst getStateFromParams = (\n  params: NavigatorScreenParams<ParamListBase, NavigationState> | undefined\n): PartialState<NavigationState> | NavigationState | undefined => {\n  if (params?.state) {\n    return params.state;\n  }\n\n  if (params?.screen) {\n    return {\n      routes: [\n        {\n          name: params.screen,\n          params: params.params,\n          // @ts-expect-error\n          state: params.screen\n            ? getStateFromParams(\n                params.params as\n                  | NavigatorScreenParams<ParamListBase, NavigationState>\n                  | undefined\n              )\n            : undefined,\n        },\n      ],\n    };\n  }\n\n  return undefined;\n};\n\n/**\n * Hook to get props for an anchor tag so it can work with in page navigation.\n *\n * @param props.to Absolute path to screen (e.g. `/feeds/hot`).\n * @param props.action Optional action to use for in-page navigation. By default, the path is parsed to an action based on linking config.\n */\nexport default function useLinkProps<\n  ParamList extends ReactNavigation.RootParamList\n>({ to, action }: Props<ParamList>) {\n  const root = React.useContext(NavigationContainerRefContext);\n  const navigation = React.useContext(NavigationHelpersContext);\n  const { options } = React.useContext(LinkingContext);\n  const linkTo = useLinkTo<ParamList>();\n\n  const onPress = (\n    e?: React.MouseEvent<HTMLAnchorElement, MouseEvent> | GestureResponderEvent\n  ) => {\n    let shouldHandle = false;\n\n    if (Platform.OS !== 'web' || !e) {\n      shouldHandle = e ? !e.defaultPrevented : true;\n    } else if (\n      !e.defaultPrevented && // onPress prevented default\n      // @ts-expect-error: these properties exist on web, but not in React Native\n      !(e.metaKey || e.altKey || e.ctrlKey || e.shiftKey) && // ignore clicks with modifier keys\n      // @ts-expect-error: these properties exist on web, but not in React Native\n      (e.button == null || e.button === 0) && // ignore everything but left clicks\n      // @ts-expect-error: these properties exist on web, but not in React Native\n      [undefined, null, '', 'self'].includes(e.currentTarget?.target) // let browser handle \"target=_blank\" etc.\n    ) {\n      e.preventDefault();\n      shouldHandle = true;\n    }\n\n    if (shouldHandle) {\n      if (action) {\n        if (navigation) {\n          navigation.dispatch(action);\n        } else if (root) {\n          root.dispatch(action);\n        } else {\n          throw new Error(\n            \"Couldn't find a navigation object. Is your component inside NavigationContainer?\"\n          );\n        }\n      } else {\n        linkTo(to);\n      }\n    }\n  };\n\n  const getPathFromStateHelper = options?.getPathFromState ?? getPathFromState;\n\n  const href =\n    typeof to === 'string'\n      ? to\n      : getPathFromStateHelper(\n          {\n            routes: [\n              {\n                name: to.screen,\n                // @ts-expect-error\n                params: to.params,\n                // @ts-expect-error\n                state: getStateFromParams(to.params),\n              },\n            ],\n          },\n          options?.config\n        );\n\n  return {\n    href,\n    accessibilityRole: 'link' as const,\n    onPress,\n  };\n}\n"]},"metadata":{},"sourceType":"module"}