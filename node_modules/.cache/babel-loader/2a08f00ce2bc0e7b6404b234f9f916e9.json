{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __asyncValues = this && this.__asyncValues || function (o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator],\n      i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () {\n    return this;\n  }, i);\n\n  function verb(n) {\n    i[n] = o[n] && function (v) {\n      return new Promise(function (resolve, reject) {\n        v = o[n](v), settle(resolve, reject, v.done, v.value);\n      });\n    };\n  }\n\n  function settle(resolve, reject, d, v) {\n    Promise.resolve(v).then(function (v) {\n      resolve({\n        value: v,\n        done: d\n      });\n    }, reject);\n  }\n};\n\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { isEmptyMarkdownString, MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Position } from '../../../common/core/position.js';\nimport { HoverProviderRegistry } from '../../../common/languages.js';\nimport { ModelDecorationInjectedTextOptions } from '../../../common/model/textModel.js';\nimport { HoverForeignElementAnchor } from '../../hover/browser/hoverTypes.js';\nimport { ILanguageService } from '../../../common/services/language.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { getHover } from '../../hover/browser/getHover.js';\nimport { MarkdownHover, MarkdownHoverParticipant } from '../../hover/browser/markdownHoverParticipant.js';\nimport { RenderedInlayHintLabelPart, InlayHintsController } from './inlayHintsController.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\n\nclass InlayHintsHoverAnchor extends HoverForeignElementAnchor {\n  constructor(part, owner) {\n    super(10, owner, part.item.anchor.range);\n    this.part = part;\n  }\n\n}\n\nlet InlayHintsHover = class InlayHintsHover extends MarkdownHoverParticipant {\n  constructor(editor, languageService, openerService, configurationService, _resolverService) {\n    super(editor, languageService, openerService, configurationService);\n    this._resolverService = _resolverService;\n  }\n\n  suggestHoverAnchor(mouseEvent) {\n    var _a;\n\n    const controller = InlayHintsController.get(this._editor);\n\n    if (!controller) {\n      return null;\n    }\n\n    if (mouseEvent.target.type !== 6\n    /* CONTENT_TEXT */\n    ) {\n      return null;\n    }\n\n    const options = (_a = mouseEvent.target.detail.injectedText) === null || _a === void 0 ? void 0 : _a.options;\n\n    if (!(options instanceof ModelDecorationInjectedTextOptions && options.attachedData instanceof RenderedInlayHintLabelPart)) {\n      return null;\n    }\n\n    return new InlayHintsHoverAnchor(options.attachedData, this);\n  }\n\n  computeSync() {\n    return [];\n  }\n\n  computeAsync(anchor, _lineDecorations, token) {\n    if (!(anchor instanceof InlayHintsHoverAnchor)) {\n      return AsyncIterableObject.EMPTY;\n    }\n\n    return new AsyncIterableObject(executor => __awaiter(this, void 0, void 0, function* () {\n      var e_1, _a;\n\n      const {\n        part\n      } = anchor;\n      yield part.item.resolve(token);\n\n      if (token.isCancellationRequested) {\n        return;\n      } // (1) Inlay Tooltip\n\n\n      let itemTooltip;\n\n      if (typeof part.item.hint.tooltip === 'string') {\n        itemTooltip = new MarkdownString().appendText(part.item.hint.tooltip);\n      } else if (part.item.hint.tooltip) {\n        itemTooltip = part.item.hint.tooltip;\n      }\n\n      if (itemTooltip) {\n        executor.emitOne(new MarkdownHover(this, anchor.range, [itemTooltip], 0));\n      } // (2) Inlay Label Part Tooltip\n\n\n      let partTooltip;\n\n      if (typeof part.part.tooltip === 'string') {\n        partTooltip = new MarkdownString().appendText(part.part.tooltip);\n      } else if (part.part.tooltip) {\n        partTooltip = part.part.tooltip;\n      }\n\n      if (partTooltip) {\n        executor.emitOne(new MarkdownHover(this, anchor.range, [partTooltip], 1));\n      } // (3) Inlay Label Part Location tooltip\n\n\n      const iterable = yield this._resolveInlayHintLabelPartHover(part, token);\n\n      try {\n        for (var iterable_1 = __asyncValues(iterable), iterable_1_1; iterable_1_1 = yield iterable_1.next(), !iterable_1_1.done;) {\n          let item = iterable_1_1.value;\n          executor.emitOne(item);\n        }\n      } catch (e_1_1) {\n        e_1 = {\n          error: e_1_1\n        };\n      } finally {\n        try {\n          if (iterable_1_1 && !iterable_1_1.done && (_a = iterable_1.return)) yield _a.call(iterable_1);\n        } finally {\n          if (e_1) throw e_1.error;\n        }\n      }\n    }));\n  }\n\n  _resolveInlayHintLabelPartHover(part, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n      if (!part.part.location) {\n        return AsyncIterableObject.EMPTY;\n      }\n\n      const {\n        uri,\n        range\n      } = part.part.location;\n      const ref = yield this._resolverService.createModelReference(uri);\n\n      try {\n        const model = ref.object.textEditorModel;\n\n        if (!HoverProviderRegistry.has(model)) {\n          return AsyncIterableObject.EMPTY;\n        }\n\n        return getHover(model, new Position(range.startLineNumber, range.startColumn), token).filter(item => !isEmptyMarkdownString(item.hover.contents)).map(item => new MarkdownHover(this, part.item.anchor.range, item.hover.contents, 2 + item.ordinal));\n      } finally {\n        ref.dispose();\n      }\n    });\n  }\n\n};\nInlayHintsHover = __decorate([__param(1, ILanguageService), __param(2, IOpenerService), __param(3, IConfigurationService), __param(4, ITextModelService)], InlayHintsHover);\nexport { InlayHintsHover };","map":{"version":3,"sources":["/home/joe/DISSY/flask_test_1/react-flask-app/node_modules/monaco-editor/esm/vs/editor/contrib/inlayHints/browser/inlayHintsHover.js"],"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__asyncValues","o","Symbol","asyncIterator","TypeError","m","call","__values","iterator","verb","n","v","settle","AsyncIterableObject","isEmptyMarkdownString","MarkdownString","Position","HoverProviderRegistry","ModelDecorationInjectedTextOptions","HoverForeignElementAnchor","ILanguageService","ITextModelService","getHover","MarkdownHover","MarkdownHoverParticipant","RenderedInlayHintLabelPart","InlayHintsController","IConfigurationService","IOpenerService","InlayHintsHoverAnchor","constructor","part","owner","item","anchor","range","InlayHintsHover","editor","languageService","openerService","configurationService","_resolverService","suggestHoverAnchor","mouseEvent","_a","controller","get","_editor","type","options","detail","injectedText","attachedData","computeSync","computeAsync","_lineDecorations","token","EMPTY","executor","e_1","isCancellationRequested","itemTooltip","hint","tooltip","appendText","emitOne","partTooltip","iterable","_resolveInlayHintLabelPartHover","iterable_1","iterable_1_1","e_1_1","error","return","location","uri","ref","createModelReference","model","object","textEditorModel","has","startLineNumber","startColumn","filter","hover","contents","map","ordinal","dispose"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __asyncValues = (this && this.__asyncValues) || function (o) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var m = o[Symbol.asyncIterator], i;\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n};\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { isEmptyMarkdownString, MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Position } from '../../../common/core/position.js';\nimport { HoverProviderRegistry } from '../../../common/languages.js';\nimport { ModelDecorationInjectedTextOptions } from '../../../common/model/textModel.js';\nimport { HoverForeignElementAnchor } from '../../hover/browser/hoverTypes.js';\nimport { ILanguageService } from '../../../common/services/language.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { getHover } from '../../hover/browser/getHover.js';\nimport { MarkdownHover, MarkdownHoverParticipant } from '../../hover/browser/markdownHoverParticipant.js';\nimport { RenderedInlayHintLabelPart, InlayHintsController } from './inlayHintsController.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nclass InlayHintsHoverAnchor extends HoverForeignElementAnchor {\n    constructor(part, owner) {\n        super(10, owner, part.item.anchor.range);\n        this.part = part;\n    }\n}\nlet InlayHintsHover = class InlayHintsHover extends MarkdownHoverParticipant {\n    constructor(editor, languageService, openerService, configurationService, _resolverService) {\n        super(editor, languageService, openerService, configurationService);\n        this._resolverService = _resolverService;\n    }\n    suggestHoverAnchor(mouseEvent) {\n        var _a;\n        const controller = InlayHintsController.get(this._editor);\n        if (!controller) {\n            return null;\n        }\n        if (mouseEvent.target.type !== 6 /* CONTENT_TEXT */) {\n            return null;\n        }\n        const options = (_a = mouseEvent.target.detail.injectedText) === null || _a === void 0 ? void 0 : _a.options;\n        if (!(options instanceof ModelDecorationInjectedTextOptions && options.attachedData instanceof RenderedInlayHintLabelPart)) {\n            return null;\n        }\n        return new InlayHintsHoverAnchor(options.attachedData, this);\n    }\n    computeSync() {\n        return [];\n    }\n    computeAsync(anchor, _lineDecorations, token) {\n        if (!(anchor instanceof InlayHintsHoverAnchor)) {\n            return AsyncIterableObject.EMPTY;\n        }\n        return new AsyncIterableObject((executor) => __awaiter(this, void 0, void 0, function* () {\n            var e_1, _a;\n            const { part } = anchor;\n            yield part.item.resolve(token);\n            if (token.isCancellationRequested) {\n                return;\n            }\n            // (1) Inlay Tooltip\n            let itemTooltip;\n            if (typeof part.item.hint.tooltip === 'string') {\n                itemTooltip = new MarkdownString().appendText(part.item.hint.tooltip);\n            }\n            else if (part.item.hint.tooltip) {\n                itemTooltip = part.item.hint.tooltip;\n            }\n            if (itemTooltip) {\n                executor.emitOne(new MarkdownHover(this, anchor.range, [itemTooltip], 0));\n            }\n            // (2) Inlay Label Part Tooltip\n            let partTooltip;\n            if (typeof part.part.tooltip === 'string') {\n                partTooltip = new MarkdownString().appendText(part.part.tooltip);\n            }\n            else if (part.part.tooltip) {\n                partTooltip = part.part.tooltip;\n            }\n            if (partTooltip) {\n                executor.emitOne(new MarkdownHover(this, anchor.range, [partTooltip], 1));\n            }\n            // (3) Inlay Label Part Location tooltip\n            const iterable = yield this._resolveInlayHintLabelPartHover(part, token);\n            try {\n                for (var iterable_1 = __asyncValues(iterable), iterable_1_1; iterable_1_1 = yield iterable_1.next(), !iterable_1_1.done;) {\n                    let item = iterable_1_1.value;\n                    executor.emitOne(item);\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (iterable_1_1 && !iterable_1_1.done && (_a = iterable_1.return)) yield _a.call(iterable_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        }));\n    }\n    _resolveInlayHintLabelPartHover(part, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!part.part.location) {\n                return AsyncIterableObject.EMPTY;\n            }\n            const { uri, range } = part.part.location;\n            const ref = yield this._resolverService.createModelReference(uri);\n            try {\n                const model = ref.object.textEditorModel;\n                if (!HoverProviderRegistry.has(model)) {\n                    return AsyncIterableObject.EMPTY;\n                }\n                return getHover(model, new Position(range.startLineNumber, range.startColumn), token)\n                    .filter(item => !isEmptyMarkdownString(item.hover.contents))\n                    .map(item => new MarkdownHover(this, part.item.anchor.range, item.hover.contents, 2 + item.ordinal));\n            }\n            finally {\n                ref.dispose();\n            }\n        });\n    }\n};\nInlayHintsHover = __decorate([\n    __param(1, ILanguageService),\n    __param(2, IOpenerService),\n    __param(3, IConfigurationService),\n    __param(4, ITextModelService)\n], InlayHintsHover);\nexport { InlayHintsHover };\n"]},"metadata":{},"sourceType":"module"}