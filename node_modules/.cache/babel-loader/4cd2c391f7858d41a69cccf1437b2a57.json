{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport * as dom from '../../../../base/browser/dom.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { createCancelablePromise, disposableTimeout } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { basename } from '../../../../base/common/resources.js';\nimport { Range } from '../../../common/core/range.js';\nimport { IMarkerDecorationsService } from '../../../common/services/markerDecorations.js';\nimport { getCodeActions } from '../../codeAction/browser/codeAction.js';\nimport { QuickFixAction, QuickFixController } from '../../codeAction/browser/codeActionCommands.js';\nimport { CodeActionKind } from '../../codeAction/browser/types.js';\nimport { MarkerController, NextMarkerAction } from '../../gotoError/browser/gotoError.js';\nimport * as nls from '../../../../nls.js';\nimport { IMarkerData, MarkerSeverity } from '../../../../platform/markers/common/markers.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { Progress } from '../../../../platform/progress/common/progress.js';\nimport { textLinkActiveForeground, textLinkForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nconst $ = dom.$;\nexport class MarkerHover {\n  constructor(owner, range, marker) {\n    this.owner = owner;\n    this.range = range;\n    this.marker = marker;\n  }\n\n  isValidForHoverAnchor(anchor) {\n    return anchor.type === 1\n    /* Range */\n    && this.range.startColumn <= anchor.range.startColumn && this.range.endColumn >= anchor.range.endColumn;\n  }\n\n}\nconst markerCodeActionTrigger = {\n  type: 1\n  /* Invoke */\n  ,\n  filter: {\n    include: CodeActionKind.QuickFix\n  }\n};\nlet MarkerHoverParticipant = class MarkerHoverParticipant {\n  constructor(_editor, _markerDecorationsService, _openerService) {\n    this._editor = _editor;\n    this._markerDecorationsService = _markerDecorationsService;\n    this._openerService = _openerService;\n    this.recentMarkerCodeActionsInfo = undefined;\n  }\n\n  computeSync(anchor, lineDecorations) {\n    if (!this._editor.hasModel() || anchor.type !== 1\n    /* Range */\n    ) {\n      return [];\n    }\n\n    const model = this._editor.getModel();\n\n    const lineNumber = anchor.range.startLineNumber;\n    const maxColumn = model.getLineMaxColumn(lineNumber);\n    const result = [];\n\n    for (const d of lineDecorations) {\n      const startColumn = d.range.startLineNumber === lineNumber ? d.range.startColumn : 1;\n      const endColumn = d.range.endLineNumber === lineNumber ? d.range.endColumn : maxColumn;\n\n      const marker = this._markerDecorationsService.getMarker(model.uri, d);\n\n      if (!marker) {\n        continue;\n      }\n\n      const range = new Range(anchor.range.startLineNumber, startColumn, anchor.range.startLineNumber, endColumn);\n      result.push(new MarkerHover(this, range, marker));\n    }\n\n    return result;\n  }\n\n  renderHoverParts(context, hoverParts) {\n    if (!hoverParts.length) {\n      return Disposable.None;\n    }\n\n    const disposables = new DisposableStore();\n    hoverParts.forEach(msg => context.fragment.appendChild(this.renderMarkerHover(msg, disposables)));\n    const markerHoverForStatusbar = hoverParts.length === 1 ? hoverParts[0] : hoverParts.sort((a, b) => MarkerSeverity.compare(a.marker.severity, b.marker.severity))[0];\n    this.renderMarkerStatusbar(context, markerHoverForStatusbar, disposables);\n    return disposables;\n  }\n\n  renderMarkerHover(markerHover, disposables) {\n    const hoverElement = $('div.hover-row');\n    const markerElement = dom.append(hoverElement, $('div.marker.hover-contents'));\n    const {\n      source,\n      message,\n      code,\n      relatedInformation\n    } = markerHover.marker;\n\n    this._editor.applyFontInfo(markerElement);\n\n    const messageElement = dom.append(markerElement, $('span'));\n    messageElement.style.whiteSpace = 'pre-wrap';\n    messageElement.innerText = message;\n\n    if (source || code) {\n      // Code has link\n      if (code && typeof code !== 'string') {\n        const sourceAndCodeElement = $('span');\n\n        if (source) {\n          const sourceElement = dom.append(sourceAndCodeElement, $('span'));\n          sourceElement.innerText = source;\n        }\n\n        const codeLink = dom.append(sourceAndCodeElement, $('a.code-link'));\n        codeLink.setAttribute('href', code.target.toString());\n        disposables.add(dom.addDisposableListener(codeLink, 'click', e => {\n          this._openerService.open(code.target, {\n            allowCommands: true\n          });\n\n          e.preventDefault();\n          e.stopPropagation();\n        }));\n        const codeElement = dom.append(codeLink, $('span'));\n        codeElement.innerText = code.value;\n        const detailsElement = dom.append(markerElement, sourceAndCodeElement);\n        detailsElement.style.opacity = '0.6';\n        detailsElement.style.paddingLeft = '6px';\n      } else {\n        const detailsElement = dom.append(markerElement, $('span'));\n        detailsElement.style.opacity = '0.6';\n        detailsElement.style.paddingLeft = '6px';\n        detailsElement.innerText = source && code ? `${source}(${code})` : source ? source : `(${code})`;\n      }\n    }\n\n    if (isNonEmptyArray(relatedInformation)) {\n      for (const {\n        message,\n        resource,\n        startLineNumber,\n        startColumn\n      } of relatedInformation) {\n        const relatedInfoContainer = dom.append(markerElement, $('div'));\n        relatedInfoContainer.style.marginTop = '8px';\n        const a = dom.append(relatedInfoContainer, $('a'));\n        a.innerText = `${basename(resource)}(${startLineNumber}, ${startColumn}): `;\n        a.style.cursor = 'pointer';\n        disposables.add(dom.addDisposableListener(a, 'click', e => {\n          e.stopPropagation();\n          e.preventDefault();\n\n          if (this._openerService) {\n            this._openerService.open(resource, {\n              fromUserGesture: true,\n              editorOptions: {\n                selection: {\n                  startLineNumber,\n                  startColumn\n                }\n              }\n            }).catch(onUnexpectedError);\n          }\n        }));\n        const messageElement = dom.append(relatedInfoContainer, $('span'));\n        messageElement.innerText = message;\n\n        this._editor.applyFontInfo(messageElement);\n      }\n    }\n\n    return hoverElement;\n  }\n\n  renderMarkerStatusbar(context, markerHover, disposables) {\n    if (markerHover.marker.severity === MarkerSeverity.Error || markerHover.marker.severity === MarkerSeverity.Warning || markerHover.marker.severity === MarkerSeverity.Info) {\n      context.statusBar.addAction({\n        label: nls.localize('view problem', \"View Problem\"),\n        commandId: NextMarkerAction.ID,\n        run: () => {\n          var _a;\n\n          context.hide();\n          (_a = MarkerController.get(this._editor)) === null || _a === void 0 ? void 0 : _a.showAtMarker(markerHover.marker);\n\n          this._editor.focus();\n        }\n      });\n    }\n\n    if (!this._editor.getOption(81\n    /* readOnly */\n    )) {\n      const quickfixPlaceholderElement = context.statusBar.append($('div'));\n\n      if (this.recentMarkerCodeActionsInfo) {\n        if (IMarkerData.makeKey(this.recentMarkerCodeActionsInfo.marker) === IMarkerData.makeKey(markerHover.marker)) {\n          if (!this.recentMarkerCodeActionsInfo.hasCodeActions) {\n            quickfixPlaceholderElement.textContent = nls.localize('noQuickFixes', \"No quick fixes available\");\n          }\n        } else {\n          this.recentMarkerCodeActionsInfo = undefined;\n        }\n      }\n\n      const updatePlaceholderDisposable = this.recentMarkerCodeActionsInfo && !this.recentMarkerCodeActionsInfo.hasCodeActions ? Disposable.None : disposables.add(disposableTimeout(() => quickfixPlaceholderElement.textContent = nls.localize('checkingForQuickFixes', \"Checking for quick fixes...\"), 200));\n\n      if (!quickfixPlaceholderElement.textContent) {\n        // Have some content in here to avoid flickering\n        quickfixPlaceholderElement.textContent = String.fromCharCode(0xA0); // &nbsp;\n      }\n\n      const codeActionsPromise = this.getCodeActions(markerHover.marker);\n      disposables.add(toDisposable(() => codeActionsPromise.cancel()));\n      codeActionsPromise.then(actions => {\n        updatePlaceholderDisposable.dispose();\n        this.recentMarkerCodeActionsInfo = {\n          marker: markerHover.marker,\n          hasCodeActions: actions.validActions.length > 0\n        };\n\n        if (!this.recentMarkerCodeActionsInfo.hasCodeActions) {\n          actions.dispose();\n          quickfixPlaceholderElement.textContent = nls.localize('noQuickFixes', \"No quick fixes available\");\n          return;\n        }\n\n        quickfixPlaceholderElement.style.display = 'none';\n        let showing = false;\n        disposables.add(toDisposable(() => {\n          if (!showing) {\n            actions.dispose();\n          }\n        }));\n        context.statusBar.addAction({\n          label: nls.localize('quick fixes', \"Quick Fix...\"),\n          commandId: QuickFixAction.Id,\n          run: target => {\n            showing = true;\n            const controller = QuickFixController.get(this._editor);\n            const elementPosition = dom.getDomNodePagePosition(target); // Hide the hover pre-emptively, otherwise the editor can close the code actions\n            // context menu as well when using keyboard navigation\n\n            context.hide();\n            controller === null || controller === void 0 ? void 0 : controller.showCodeActions(markerCodeActionTrigger, actions, {\n              x: elementPosition.left + 6,\n              y: elementPosition.top + elementPosition.height + 6\n            });\n          }\n        });\n      }, onUnexpectedError);\n    }\n  }\n\n  getCodeActions(marker) {\n    return createCancelablePromise(cancellationToken => {\n      return getCodeActions(this._editor.getModel(), new Range(marker.startLineNumber, marker.startColumn, marker.endLineNumber, marker.endColumn), markerCodeActionTrigger, Progress.None, cancellationToken);\n    });\n  }\n\n};\nMarkerHoverParticipant = __decorate([__param(1, IMarkerDecorationsService), __param(2, IOpenerService)], MarkerHoverParticipant);\nexport { MarkerHoverParticipant };\nregisterThemingParticipant((theme, collector) => {\n  const linkFg = theme.getColor(textLinkForeground);\n\n  if (linkFg) {\n    collector.addRule(`.monaco-hover .hover-contents a.code-link span { color: ${linkFg}; }`);\n  }\n\n  const activeLinkFg = theme.getColor(textLinkActiveForeground);\n\n  if (activeLinkFg) {\n    collector.addRule(`.monaco-hover .hover-contents a.code-link span:hover { color: ${activeLinkFg}; }`);\n  }\n});","map":{"version":3,"sources":["/home/joe/DISSY/flask_test_1/react-flask-app/node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/markerHoverParticipant.js"],"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","dom","isNonEmptyArray","createCancelablePromise","disposableTimeout","onUnexpectedError","Disposable","DisposableStore","toDisposable","basename","Range","IMarkerDecorationsService","getCodeActions","QuickFixAction","QuickFixController","CodeActionKind","MarkerController","NextMarkerAction","nls","IMarkerData","MarkerSeverity","IOpenerService","Progress","textLinkActiveForeground","textLinkForeground","registerThemingParticipant","$","MarkerHover","constructor","owner","range","marker","isValidForHoverAnchor","anchor","type","startColumn","endColumn","markerCodeActionTrigger","filter","include","QuickFix","MarkerHoverParticipant","_editor","_markerDecorationsService","_openerService","recentMarkerCodeActionsInfo","undefined","computeSync","lineDecorations","hasModel","model","getModel","lineNumber","startLineNumber","maxColumn","getLineMaxColumn","result","endLineNumber","getMarker","uri","push","renderHoverParts","context","hoverParts","None","disposables","forEach","msg","fragment","appendChild","renderMarkerHover","markerHoverForStatusbar","sort","a","b","compare","severity","renderMarkerStatusbar","markerHover","hoverElement","markerElement","append","source","message","code","relatedInformation","applyFontInfo","messageElement","style","whiteSpace","innerText","sourceAndCodeElement","sourceElement","codeLink","setAttribute","toString","add","addDisposableListener","e","open","allowCommands","preventDefault","stopPropagation","codeElement","value","detailsElement","opacity","paddingLeft","resource","relatedInfoContainer","marginTop","cursor","fromUserGesture","editorOptions","selection","catch","Error","Warning","Info","statusBar","addAction","label","localize","commandId","ID","run","_a","hide","get","showAtMarker","focus","getOption","quickfixPlaceholderElement","makeKey","hasCodeActions","textContent","updatePlaceholderDisposable","String","fromCharCode","codeActionsPromise","cancel","then","actions","dispose","validActions","display","showing","Id","controller","elementPosition","getDomNodePagePosition","showCodeActions","x","left","y","top","height","cancellationToken","theme","collector","linkFg","getColor","addRule","activeLinkFg"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { createCancelablePromise, disposableTimeout } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { basename } from '../../../../base/common/resources.js';\nimport { Range } from '../../../common/core/range.js';\nimport { IMarkerDecorationsService } from '../../../common/services/markerDecorations.js';\nimport { getCodeActions } from '../../codeAction/browser/codeAction.js';\nimport { QuickFixAction, QuickFixController } from '../../codeAction/browser/codeActionCommands.js';\nimport { CodeActionKind } from '../../codeAction/browser/types.js';\nimport { MarkerController, NextMarkerAction } from '../../gotoError/browser/gotoError.js';\nimport * as nls from '../../../../nls.js';\nimport { IMarkerData, MarkerSeverity } from '../../../../platform/markers/common/markers.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { Progress } from '../../../../platform/progress/common/progress.js';\nimport { textLinkActiveForeground, textLinkForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nconst $ = dom.$;\nexport class MarkerHover {\n    constructor(owner, range, marker) {\n        this.owner = owner;\n        this.range = range;\n        this.marker = marker;\n    }\n    isValidForHoverAnchor(anchor) {\n        return (anchor.type === 1 /* Range */\n            && this.range.startColumn <= anchor.range.startColumn\n            && this.range.endColumn >= anchor.range.endColumn);\n    }\n}\nconst markerCodeActionTrigger = {\n    type: 1 /* Invoke */,\n    filter: { include: CodeActionKind.QuickFix }\n};\nlet MarkerHoverParticipant = class MarkerHoverParticipant {\n    constructor(_editor, _markerDecorationsService, _openerService) {\n        this._editor = _editor;\n        this._markerDecorationsService = _markerDecorationsService;\n        this._openerService = _openerService;\n        this.recentMarkerCodeActionsInfo = undefined;\n    }\n    computeSync(anchor, lineDecorations) {\n        if (!this._editor.hasModel() || anchor.type !== 1 /* Range */) {\n            return [];\n        }\n        const model = this._editor.getModel();\n        const lineNumber = anchor.range.startLineNumber;\n        const maxColumn = model.getLineMaxColumn(lineNumber);\n        const result = [];\n        for (const d of lineDecorations) {\n            const startColumn = (d.range.startLineNumber === lineNumber) ? d.range.startColumn : 1;\n            const endColumn = (d.range.endLineNumber === lineNumber) ? d.range.endColumn : maxColumn;\n            const marker = this._markerDecorationsService.getMarker(model.uri, d);\n            if (!marker) {\n                continue;\n            }\n            const range = new Range(anchor.range.startLineNumber, startColumn, anchor.range.startLineNumber, endColumn);\n            result.push(new MarkerHover(this, range, marker));\n        }\n        return result;\n    }\n    renderHoverParts(context, hoverParts) {\n        if (!hoverParts.length) {\n            return Disposable.None;\n        }\n        const disposables = new DisposableStore();\n        hoverParts.forEach(msg => context.fragment.appendChild(this.renderMarkerHover(msg, disposables)));\n        const markerHoverForStatusbar = hoverParts.length === 1 ? hoverParts[0] : hoverParts.sort((a, b) => MarkerSeverity.compare(a.marker.severity, b.marker.severity))[0];\n        this.renderMarkerStatusbar(context, markerHoverForStatusbar, disposables);\n        return disposables;\n    }\n    renderMarkerHover(markerHover, disposables) {\n        const hoverElement = $('div.hover-row');\n        const markerElement = dom.append(hoverElement, $('div.marker.hover-contents'));\n        const { source, message, code, relatedInformation } = markerHover.marker;\n        this._editor.applyFontInfo(markerElement);\n        const messageElement = dom.append(markerElement, $('span'));\n        messageElement.style.whiteSpace = 'pre-wrap';\n        messageElement.innerText = message;\n        if (source || code) {\n            // Code has link\n            if (code && typeof code !== 'string') {\n                const sourceAndCodeElement = $('span');\n                if (source) {\n                    const sourceElement = dom.append(sourceAndCodeElement, $('span'));\n                    sourceElement.innerText = source;\n                }\n                const codeLink = dom.append(sourceAndCodeElement, $('a.code-link'));\n                codeLink.setAttribute('href', code.target.toString());\n                disposables.add(dom.addDisposableListener(codeLink, 'click', (e) => {\n                    this._openerService.open(code.target, { allowCommands: true });\n                    e.preventDefault();\n                    e.stopPropagation();\n                }));\n                const codeElement = dom.append(codeLink, $('span'));\n                codeElement.innerText = code.value;\n                const detailsElement = dom.append(markerElement, sourceAndCodeElement);\n                detailsElement.style.opacity = '0.6';\n                detailsElement.style.paddingLeft = '6px';\n            }\n            else {\n                const detailsElement = dom.append(markerElement, $('span'));\n                detailsElement.style.opacity = '0.6';\n                detailsElement.style.paddingLeft = '6px';\n                detailsElement.innerText = source && code ? `${source}(${code})` : source ? source : `(${code})`;\n            }\n        }\n        if (isNonEmptyArray(relatedInformation)) {\n            for (const { message, resource, startLineNumber, startColumn } of relatedInformation) {\n                const relatedInfoContainer = dom.append(markerElement, $('div'));\n                relatedInfoContainer.style.marginTop = '8px';\n                const a = dom.append(relatedInfoContainer, $('a'));\n                a.innerText = `${basename(resource)}(${startLineNumber}, ${startColumn}): `;\n                a.style.cursor = 'pointer';\n                disposables.add(dom.addDisposableListener(a, 'click', (e) => {\n                    e.stopPropagation();\n                    e.preventDefault();\n                    if (this._openerService) {\n                        this._openerService.open(resource, {\n                            fromUserGesture: true,\n                            editorOptions: { selection: { startLineNumber, startColumn } }\n                        }).catch(onUnexpectedError);\n                    }\n                }));\n                const messageElement = dom.append(relatedInfoContainer, $('span'));\n                messageElement.innerText = message;\n                this._editor.applyFontInfo(messageElement);\n            }\n        }\n        return hoverElement;\n    }\n    renderMarkerStatusbar(context, markerHover, disposables) {\n        if (markerHover.marker.severity === MarkerSeverity.Error || markerHover.marker.severity === MarkerSeverity.Warning || markerHover.marker.severity === MarkerSeverity.Info) {\n            context.statusBar.addAction({\n                label: nls.localize('view problem', \"View Problem\"),\n                commandId: NextMarkerAction.ID,\n                run: () => {\n                    var _a;\n                    context.hide();\n                    (_a = MarkerController.get(this._editor)) === null || _a === void 0 ? void 0 : _a.showAtMarker(markerHover.marker);\n                    this._editor.focus();\n                }\n            });\n        }\n        if (!this._editor.getOption(81 /* readOnly */)) {\n            const quickfixPlaceholderElement = context.statusBar.append($('div'));\n            if (this.recentMarkerCodeActionsInfo) {\n                if (IMarkerData.makeKey(this.recentMarkerCodeActionsInfo.marker) === IMarkerData.makeKey(markerHover.marker)) {\n                    if (!this.recentMarkerCodeActionsInfo.hasCodeActions) {\n                        quickfixPlaceholderElement.textContent = nls.localize('noQuickFixes', \"No quick fixes available\");\n                    }\n                }\n                else {\n                    this.recentMarkerCodeActionsInfo = undefined;\n                }\n            }\n            const updatePlaceholderDisposable = this.recentMarkerCodeActionsInfo && !this.recentMarkerCodeActionsInfo.hasCodeActions ? Disposable.None : disposables.add(disposableTimeout(() => quickfixPlaceholderElement.textContent = nls.localize('checkingForQuickFixes', \"Checking for quick fixes...\"), 200));\n            if (!quickfixPlaceholderElement.textContent) {\n                // Have some content in here to avoid flickering\n                quickfixPlaceholderElement.textContent = String.fromCharCode(0xA0); // &nbsp;\n            }\n            const codeActionsPromise = this.getCodeActions(markerHover.marker);\n            disposables.add(toDisposable(() => codeActionsPromise.cancel()));\n            codeActionsPromise.then(actions => {\n                updatePlaceholderDisposable.dispose();\n                this.recentMarkerCodeActionsInfo = { marker: markerHover.marker, hasCodeActions: actions.validActions.length > 0 };\n                if (!this.recentMarkerCodeActionsInfo.hasCodeActions) {\n                    actions.dispose();\n                    quickfixPlaceholderElement.textContent = nls.localize('noQuickFixes', \"No quick fixes available\");\n                    return;\n                }\n                quickfixPlaceholderElement.style.display = 'none';\n                let showing = false;\n                disposables.add(toDisposable(() => {\n                    if (!showing) {\n                        actions.dispose();\n                    }\n                }));\n                context.statusBar.addAction({\n                    label: nls.localize('quick fixes', \"Quick Fix...\"),\n                    commandId: QuickFixAction.Id,\n                    run: (target) => {\n                        showing = true;\n                        const controller = QuickFixController.get(this._editor);\n                        const elementPosition = dom.getDomNodePagePosition(target);\n                        // Hide the hover pre-emptively, otherwise the editor can close the code actions\n                        // context menu as well when using keyboard navigation\n                        context.hide();\n                        controller === null || controller === void 0 ? void 0 : controller.showCodeActions(markerCodeActionTrigger, actions, {\n                            x: elementPosition.left + 6,\n                            y: elementPosition.top + elementPosition.height + 6\n                        });\n                    }\n                });\n            }, onUnexpectedError);\n        }\n    }\n    getCodeActions(marker) {\n        return createCancelablePromise(cancellationToken => {\n            return getCodeActions(this._editor.getModel(), new Range(marker.startLineNumber, marker.startColumn, marker.endLineNumber, marker.endColumn), markerCodeActionTrigger, Progress.None, cancellationToken);\n        });\n    }\n};\nMarkerHoverParticipant = __decorate([\n    __param(1, IMarkerDecorationsService),\n    __param(2, IOpenerService)\n], MarkerHoverParticipant);\nexport { MarkerHoverParticipant };\nregisterThemingParticipant((theme, collector) => {\n    const linkFg = theme.getColor(textLinkForeground);\n    if (linkFg) {\n        collector.addRule(`.monaco-hover .hover-contents a.code-link span { color: ${linkFg}; }`);\n    }\n    const activeLinkFg = theme.getColor(textLinkActiveForeground);\n    if (activeLinkFg) {\n        collector.addRule(`.monaco-hover .hover-contents a.code-link span:hover { color: ${activeLinkFg}; }`);\n    }\n});\n"]},"metadata":{},"sourceType":"module"}