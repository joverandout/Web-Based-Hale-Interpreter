{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport * as monaco from \"monaco-editor/esm/vs/editor/editor.api\";\nimport * as PropTypes from \"prop-types\";\nimport * as React from \"react\";\nimport { noop, processSize } from \"./utils\";\n\nvar MonacoDiffEditor =\n/** @class */\nfunction (_super) {\n  __extends(MonacoDiffEditor, _super);\n\n  function MonacoDiffEditor(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.assignRef = function (component) {\n      _this.containerElement = component;\n    };\n\n    _this.containerElement = undefined;\n    return _this;\n  }\n\n  MonacoDiffEditor.prototype.componentDidMount = function () {\n    this.initMonaco();\n  };\n\n  MonacoDiffEditor.prototype.componentDidUpdate = function (prevProps) {\n    var _a = this.props,\n        language = _a.language,\n        theme = _a.theme,\n        height = _a.height,\n        options = _a.options,\n        width = _a.width,\n        className = _a.className;\n\n    var _b = this.editor.getModel(),\n        original = _b.original,\n        modified = _b.modified;\n\n    if (this.props.original !== original.getValue()) {\n      original.setValue(this.props.original);\n    }\n\n    if (this.props.value != null && this.props.value !== modified.getValue()) {\n      this.__prevent_trigger_change_event = true; // modifiedEditor is not in the public API for diff editors\n\n      this.editor.getModifiedEditor().pushUndoStop(); // pushEditOperations says it expects a cursorComputer, but doesn't seem to need one.\n      // @ts-expect-error\n\n      modified.pushEditOperations([], [{\n        range: modified.getFullModelRange(),\n        text: this.props.value\n      }]); // modifiedEditor is not in the public API for diff editors\n\n      this.editor.getModifiedEditor().pushUndoStop();\n      this.__prevent_trigger_change_event = false;\n    }\n\n    if (prevProps.language !== language) {\n      monaco.editor.setModelLanguage(original, language);\n      monaco.editor.setModelLanguage(modified, language);\n    }\n\n    if (prevProps.theme !== theme) {\n      monaco.editor.setTheme(theme);\n    }\n\n    if (this.editor && (width !== prevProps.width || height !== prevProps.height)) {\n      this.editor.layout();\n    }\n\n    if (prevProps.options !== options) {\n      this.editor.updateOptions(__assign(__assign({}, className ? {\n        extraEditorClassName: className\n      } : {}), options));\n    }\n  };\n\n  MonacoDiffEditor.prototype.componentWillUnmount = function () {\n    this.destroyMonaco();\n  };\n\n  MonacoDiffEditor.prototype.editorWillMount = function () {\n    var editorWillMount = this.props.editorWillMount;\n    var options = editorWillMount(monaco);\n    return options || {};\n  };\n\n  MonacoDiffEditor.prototype.editorDidMount = function (editor) {\n    var _this = this;\n\n    this.props.editorDidMount(editor, monaco);\n    var modified = editor.getModel().modified;\n    this._subscription = modified.onDidChangeContent(function (event) {\n      if (!_this.__prevent_trigger_change_event) {\n        _this.props.onChange(modified.getValue(), event);\n      }\n    });\n  };\n\n  MonacoDiffEditor.prototype.editorWillUnmount = function (editor) {\n    var editorWillUnmount = this.props.editorWillUnmount;\n    editorWillUnmount(editor, monaco);\n  };\n\n  MonacoDiffEditor.prototype.initModels = function (value, original) {\n    var language = this.props.language;\n    var originalModel = monaco.editor.createModel(original, language);\n    var modifiedModel = monaco.editor.createModel(value, language);\n    this.editor.setModel({\n      original: originalModel,\n      modified: modifiedModel\n    });\n  };\n\n  MonacoDiffEditor.prototype.initMonaco = function () {\n    var value = this.props.value != null ? this.props.value : this.props.defaultValue;\n    var _a = this.props,\n        original = _a.original,\n        theme = _a.theme,\n        options = _a.options,\n        overrideServices = _a.overrideServices,\n        className = _a.className;\n\n    if (this.containerElement) {\n      // Before initializing monaco editor\n      this.editorWillMount();\n      this.editor = monaco.editor.createDiffEditor(this.containerElement, __assign(__assign(__assign({}, className ? {\n        extraEditorClassName: className\n      } : {}), options), theme ? {\n        theme: theme\n      } : {}), overrideServices); // After initializing monaco editor\n\n      this.initModels(value, original);\n      this.editorDidMount(this.editor);\n    }\n  };\n\n  MonacoDiffEditor.prototype.destroyMonaco = function () {\n    if (this.editor) {\n      this.editorWillUnmount(this.editor);\n      this.editor.dispose();\n\n      var _a = this.editor.getModel(),\n          original = _a.original,\n          modified = _a.modified;\n\n      if (original) {\n        original.dispose();\n      }\n\n      if (modified) {\n        modified.dispose();\n      }\n    }\n\n    if (this._subscription) {\n      this._subscription.dispose();\n    }\n  };\n\n  MonacoDiffEditor.prototype.render = function () {\n    var _a = this.props,\n        width = _a.width,\n        height = _a.height;\n    var fixedWidth = processSize(width);\n    var fixedHeight = processSize(height);\n    var style = {\n      width: fixedWidth,\n      height: fixedHeight\n    };\n    return React.createElement(\"div\", {\n      ref: this.assignRef,\n      style: style,\n      className: \"react-monaco-editor-container\"\n    });\n  };\n\n  MonacoDiffEditor.propTypes = {\n    width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    original: PropTypes.string,\n    value: PropTypes.string,\n    defaultValue: PropTypes.string,\n    language: PropTypes.string,\n    theme: PropTypes.string,\n    options: PropTypes.object,\n    overrideServices: PropTypes.object,\n    editorWillMount: PropTypes.func,\n    editorDidMount: PropTypes.func,\n    editorWillUnmount: PropTypes.func,\n    onChange: PropTypes.func,\n    className: PropTypes.string\n  };\n  MonacoDiffEditor.defaultProps = {\n    width: \"100%\",\n    height: \"100%\",\n    original: null,\n    value: null,\n    defaultValue: \"\",\n    language: \"javascript\",\n    theme: null,\n    options: {},\n    overrideServices: {},\n    editorWillMount: noop,\n    editorDidMount: noop,\n    editorWillUnmount: noop,\n    onChange: noop,\n    className: null\n  };\n  return MonacoDiffEditor;\n}(React.Component);\n\nexport default MonacoDiffEditor;","map":{"version":3,"sources":["../src/diff.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as monaco from \"monaco-editor/esm/vs/editor/editor.api\";\nimport * as PropTypes from \"prop-types\";\nimport * as React from \"react\";\nimport { noop, processSize } from \"./utils\";\nvar MonacoDiffEditor = /** @class */ (function (_super) {\n    __extends(MonacoDiffEditor, _super);\n    function MonacoDiffEditor(props) {\n        var _this = _super.call(this, props) || this;\n        _this.assignRef = function (component) {\n            _this.containerElement = component;\n        };\n        _this.containerElement = undefined;\n        return _this;\n    }\n    MonacoDiffEditor.prototype.componentDidMount = function () {\n        this.initMonaco();\n    };\n    MonacoDiffEditor.prototype.componentDidUpdate = function (prevProps) {\n        var _a = this.props, language = _a.language, theme = _a.theme, height = _a.height, options = _a.options, width = _a.width, className = _a.className;\n        var _b = this.editor.getModel(), original = _b.original, modified = _b.modified;\n        if (this.props.original !== original.getValue()) {\n            original.setValue(this.props.original);\n        }\n        if (this.props.value != null && this.props.value !== modified.getValue()) {\n            this.__prevent_trigger_change_event = true;\n            // modifiedEditor is not in the public API for diff editors\n            this.editor.getModifiedEditor().pushUndoStop();\n            // pushEditOperations says it expects a cursorComputer, but doesn't seem to need one.\n            // @ts-expect-error\n            modified.pushEditOperations([], [\n                {\n                    range: modified.getFullModelRange(),\n                    text: this.props.value,\n                },\n            ]);\n            // modifiedEditor is not in the public API for diff editors\n            this.editor.getModifiedEditor().pushUndoStop();\n            this.__prevent_trigger_change_event = false;\n        }\n        if (prevProps.language !== language) {\n            monaco.editor.setModelLanguage(original, language);\n            monaco.editor.setModelLanguage(modified, language);\n        }\n        if (prevProps.theme !== theme) {\n            monaco.editor.setTheme(theme);\n        }\n        if (this.editor &&\n            (width !== prevProps.width || height !== prevProps.height)) {\n            this.editor.layout();\n        }\n        if (prevProps.options !== options) {\n            this.editor.updateOptions(__assign(__assign({}, (className ? { extraEditorClassName: className } : {})), options));\n        }\n    };\n    MonacoDiffEditor.prototype.componentWillUnmount = function () {\n        this.destroyMonaco();\n    };\n    MonacoDiffEditor.prototype.editorWillMount = function () {\n        var editorWillMount = this.props.editorWillMount;\n        var options = editorWillMount(monaco);\n        return options || {};\n    };\n    MonacoDiffEditor.prototype.editorDidMount = function (editor) {\n        var _this = this;\n        this.props.editorDidMount(editor, monaco);\n        var modified = editor.getModel().modified;\n        this._subscription = modified.onDidChangeContent(function (event) {\n            if (!_this.__prevent_trigger_change_event) {\n                _this.props.onChange(modified.getValue(), event);\n            }\n        });\n    };\n    MonacoDiffEditor.prototype.editorWillUnmount = function (editor) {\n        var editorWillUnmount = this.props.editorWillUnmount;\n        editorWillUnmount(editor, monaco);\n    };\n    MonacoDiffEditor.prototype.initModels = function (value, original) {\n        var language = this.props.language;\n        var originalModel = monaco.editor.createModel(original, language);\n        var modifiedModel = monaco.editor.createModel(value, language);\n        this.editor.setModel({\n            original: originalModel,\n            modified: modifiedModel,\n        });\n    };\n    MonacoDiffEditor.prototype.initMonaco = function () {\n        var value = this.props.value != null ? this.props.value : this.props.defaultValue;\n        var _a = this.props, original = _a.original, theme = _a.theme, options = _a.options, overrideServices = _a.overrideServices, className = _a.className;\n        if (this.containerElement) {\n            // Before initializing monaco editor\n            this.editorWillMount();\n            this.editor = monaco.editor.createDiffEditor(this.containerElement, __assign(__assign(__assign({}, (className ? { extraEditorClassName: className } : {})), options), (theme ? { theme: theme } : {})), overrideServices);\n            // After initializing monaco editor\n            this.initModels(value, original);\n            this.editorDidMount(this.editor);\n        }\n    };\n    MonacoDiffEditor.prototype.destroyMonaco = function () {\n        if (this.editor) {\n            this.editorWillUnmount(this.editor);\n            this.editor.dispose();\n            var _a = this.editor.getModel(), original = _a.original, modified = _a.modified;\n            if (original) {\n                original.dispose();\n            }\n            if (modified) {\n                modified.dispose();\n            }\n        }\n        if (this._subscription) {\n            this._subscription.dispose();\n        }\n    };\n    MonacoDiffEditor.prototype.render = function () {\n        var _a = this.props, width = _a.width, height = _a.height;\n        var fixedWidth = processSize(width);\n        var fixedHeight = processSize(height);\n        var style = {\n            width: fixedWidth,\n            height: fixedHeight,\n        };\n        return (React.createElement(\"div\", { ref: this.assignRef, style: style, className: \"react-monaco-editor-container\" }));\n    };\n    MonacoDiffEditor.propTypes = {\n        width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n        height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n        original: PropTypes.string,\n        value: PropTypes.string,\n        defaultValue: PropTypes.string,\n        language: PropTypes.string,\n        theme: PropTypes.string,\n        options: PropTypes.object,\n        overrideServices: PropTypes.object,\n        editorWillMount: PropTypes.func,\n        editorDidMount: PropTypes.func,\n        editorWillUnmount: PropTypes.func,\n        onChange: PropTypes.func,\n        className: PropTypes.string,\n    };\n    MonacoDiffEditor.defaultProps = {\n        width: \"100%\",\n        height: \"100%\",\n        original: null,\n        value: null,\n        defaultValue: \"\",\n        language: \"javascript\",\n        theme: null,\n        options: {},\n        overrideServices: {},\n        editorWillMount: noop,\n        editorDidMount: noop,\n        editorWillUnmount: noop,\n        onChange: noop,\n        className: null,\n    };\n    return MonacoDiffEditor;\n}(React.Component));\nexport default MonacoDiffEditor;\n//# sourceMappingURL=diff.js.map"]},"metadata":{},"sourceType":"module"}