{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport './inspectTokens.css';\nimport { $, append, reset } from '../../../../base/browser/dom.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { TokenMetadata, TokenizationRegistry } from '../../../common/languages.js';\nimport { NullState, nullTokenize, nullTokenizeEncoded } from '../../../common/languages/nullMode.js';\nimport { ILanguageService } from '../../../common/services/language.js';\nimport { IStandaloneThemeService } from '../../common/standaloneTheme.js';\nimport { editorHoverBackground, editorHoverBorder, editorHoverForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { InspectTokensNLS } from '../../../common/standaloneStrings.js';\nimport { ColorScheme } from '../../../../platform/theme/common/theme.js';\nlet InspectTokensController = class InspectTokensController extends Disposable {\n  constructor(editor, standaloneColorService, languageService) {\n    super();\n    this._editor = editor;\n    this._languageService = languageService;\n    this._widget = null;\n\n    this._register(this._editor.onDidChangeModel(e => this.stop()));\n\n    this._register(this._editor.onDidChangeModelLanguage(e => this.stop()));\n\n    this._register(TokenizationRegistry.onDidChange(e => this.stop()));\n\n    this._register(this._editor.onKeyUp(e => e.keyCode === 9\n    /* Escape */\n    && this.stop()));\n  }\n\n  static get(editor) {\n    return editor.getContribution(InspectTokensController.ID);\n  }\n\n  dispose() {\n    this.stop();\n    super.dispose();\n  }\n\n  launch() {\n    if (this._widget) {\n      return;\n    }\n\n    if (!this._editor.hasModel()) {\n      return;\n    }\n\n    this._widget = new InspectTokensWidget(this._editor, this._languageService);\n  }\n\n  stop() {\n    if (this._widget) {\n      this._widget.dispose();\n\n      this._widget = null;\n    }\n  }\n\n};\nInspectTokensController.ID = 'editor.contrib.inspectTokens';\nInspectTokensController = __decorate([__param(1, IStandaloneThemeService), __param(2, ILanguageService)], InspectTokensController);\n\nclass InspectTokens extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.inspectTokens',\n      label: InspectTokensNLS.inspectTokensAction,\n      alias: 'Developer: Inspect Tokens',\n      precondition: undefined\n    });\n  }\n\n  run(accessor, editor) {\n    const controller = InspectTokensController.get(editor);\n\n    if (controller) {\n      controller.launch();\n    }\n  }\n\n}\n\nfunction renderTokenText(tokenText) {\n  let result = '';\n\n  for (let charIndex = 0, len = tokenText.length; charIndex < len; charIndex++) {\n    const charCode = tokenText.charCodeAt(charIndex);\n\n    switch (charCode) {\n      case 9\n      /* Tab */\n      :\n        result += '\\u2192'; // &rarr;\n\n        break;\n\n      case 32\n      /* Space */\n      :\n        result += '\\u00B7'; // &middot;\n\n        break;\n\n      default:\n        result += String.fromCharCode(charCode);\n    }\n  }\n\n  return result;\n}\n\nfunction getSafeTokenizationSupport(languageIdCodec, languageId) {\n  const tokenizationSupport = TokenizationRegistry.get(languageId);\n\n  if (tokenizationSupport) {\n    return tokenizationSupport;\n  }\n\n  const encodedLanguageId = languageIdCodec.encodeLanguageId(languageId);\n  return {\n    getInitialState: () => NullState,\n    tokenize: (line, hasEOL, state) => nullTokenize(languageId, state),\n    tokenizeEncoded: (line, hasEOL, state) => nullTokenizeEncoded(encodedLanguageId, state)\n  };\n}\n\nclass InspectTokensWidget extends Disposable {\n  constructor(editor, languageService) {\n    super(); // Editor.IContentWidget.allowEditorOverflow\n\n    this.allowEditorOverflow = true;\n    this._editor = editor;\n    this._languageService = languageService;\n    this._model = this._editor.getModel();\n    this._domNode = document.createElement('div');\n    this._domNode.className = 'tokens-inspect-widget';\n    this._tokenizationSupport = getSafeTokenizationSupport(this._languageService.languageIdCodec, this._model.getLanguageId());\n\n    this._compute(this._editor.getPosition());\n\n    this._register(this._editor.onDidChangeCursorPosition(e => this._compute(this._editor.getPosition())));\n\n    this._editor.addContentWidget(this);\n  }\n\n  dispose() {\n    this._editor.removeContentWidget(this);\n\n    super.dispose();\n  }\n\n  getId() {\n    return InspectTokensWidget._ID;\n  }\n\n  _compute(position) {\n    const data = this._getTokensAtLine(position.lineNumber);\n\n    let token1Index = 0;\n\n    for (let i = data.tokens1.length - 1; i >= 0; i--) {\n      const t = data.tokens1[i];\n\n      if (position.column - 1 >= t.offset) {\n        token1Index = i;\n        break;\n      }\n    }\n\n    let token2Index = 0;\n\n    for (let i = data.tokens2.length >>> 1; i >= 0; i--) {\n      if (position.column - 1 >= data.tokens2[i << 1]) {\n        token2Index = i;\n        break;\n      }\n    }\n\n    const lineContent = this._model.getLineContent(position.lineNumber);\n\n    let tokenText = '';\n\n    if (token1Index < data.tokens1.length) {\n      const tokenStartIndex = data.tokens1[token1Index].offset;\n      const tokenEndIndex = token1Index + 1 < data.tokens1.length ? data.tokens1[token1Index + 1].offset : lineContent.length;\n      tokenText = lineContent.substring(tokenStartIndex, tokenEndIndex);\n    }\n\n    reset(this._domNode, $('h2.tm-token', undefined, renderTokenText(tokenText), $('span.tm-token-length', undefined, `${tokenText.length} ${tokenText.length === 1 ? 'char' : 'chars'}`)));\n    append(this._domNode, $('hr.tokens-inspect-separator', {\n      'style': 'clear:both'\n    }));\n    const metadata = (token2Index << 1) + 1 < data.tokens2.length ? this._decodeMetadata(data.tokens2[(token2Index << 1) + 1]) : null;\n    append(this._domNode, $('table.tm-metadata-table', undefined, $('tbody', undefined, $('tr', undefined, $('td.tm-metadata-key', undefined, 'language'), $('td.tm-metadata-value', undefined, `${metadata ? metadata.languageId : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'token type'), $('td.tm-metadata-value', undefined, `${metadata ? this._tokenTypeToString(metadata.tokenType) : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'font style'), $('td.tm-metadata-value', undefined, `${metadata ? this._fontStyleToString(metadata.fontStyle) : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'foreground'), $('td.tm-metadata-value', undefined, `${metadata ? Color.Format.CSS.formatHex(metadata.foreground) : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'background'), $('td.tm-metadata-value', undefined, `${metadata ? Color.Format.CSS.formatHex(metadata.background) : '-?-'}`)))));\n    append(this._domNode, $('hr.tokens-inspect-separator'));\n\n    if (token1Index < data.tokens1.length) {\n      append(this._domNode, $('span.tm-token-type', undefined, data.tokens1[token1Index].type));\n    }\n\n    this._editor.layoutContentWidget(this);\n  }\n\n  _decodeMetadata(metadata) {\n    const colorMap = TokenizationRegistry.getColorMap();\n    const languageId = TokenMetadata.getLanguageId(metadata);\n    const tokenType = TokenMetadata.getTokenType(metadata);\n    const fontStyle = TokenMetadata.getFontStyle(metadata);\n    const foreground = TokenMetadata.getForeground(metadata);\n    const background = TokenMetadata.getBackground(metadata);\n    return {\n      languageId: this._languageService.languageIdCodec.decodeLanguageId(languageId),\n      tokenType: tokenType,\n      fontStyle: fontStyle,\n      foreground: colorMap[foreground],\n      background: colorMap[background]\n    };\n  }\n\n  _tokenTypeToString(tokenType) {\n    switch (tokenType) {\n      case 0\n      /* Other */\n      :\n        return 'Other';\n\n      case 1\n      /* Comment */\n      :\n        return 'Comment';\n\n      case 2\n      /* String */\n      :\n        return 'String';\n\n      case 3\n      /* RegEx */\n      :\n        return 'RegEx';\n\n      default:\n        return '??';\n    }\n  }\n\n  _fontStyleToString(fontStyle) {\n    let r = '';\n\n    if (fontStyle & 1\n    /* Italic */\n    ) {\n      r += 'italic ';\n    }\n\n    if (fontStyle & 2\n    /* Bold */\n    ) {\n      r += 'bold ';\n    }\n\n    if (fontStyle & 4\n    /* Underline */\n    ) {\n      r += 'underline ';\n    }\n\n    if (fontStyle & 8\n    /* Strikethrough */\n    ) {\n      r += 'strikethrough ';\n    }\n\n    if (r.length === 0) {\n      r = '---';\n    }\n\n    return r;\n  }\n\n  _getTokensAtLine(lineNumber) {\n    const stateBeforeLine = this._getStateBeforeLine(lineNumber);\n\n    const tokenizationResult1 = this._tokenizationSupport.tokenize(this._model.getLineContent(lineNumber), true, stateBeforeLine);\n\n    const tokenizationResult2 = this._tokenizationSupport.tokenizeEncoded(this._model.getLineContent(lineNumber), true, stateBeforeLine);\n\n    return {\n      startState: stateBeforeLine,\n      tokens1: tokenizationResult1.tokens,\n      tokens2: tokenizationResult2.tokens,\n      endState: tokenizationResult1.endState\n    };\n  }\n\n  _getStateBeforeLine(lineNumber) {\n    let state = this._tokenizationSupport.getInitialState();\n\n    for (let i = 1; i < lineNumber; i++) {\n      const tokenizationResult = this._tokenizationSupport.tokenize(this._model.getLineContent(i), true, state);\n\n      state = tokenizationResult.endState;\n    }\n\n    return state;\n  }\n\n  getDomNode() {\n    return this._domNode;\n  }\n\n  getPosition() {\n    return {\n      position: this._editor.getPosition(),\n      preference: [2\n      /* BELOW */\n      , 1\n      /* ABOVE */\n      ]\n    };\n  }\n\n}\n\nInspectTokensWidget._ID = 'editor.contrib.inspectTokensWidget';\nregisterEditorContribution(InspectTokensController.ID, InspectTokensController);\nregisterEditorAction(InspectTokens);\nregisterThemingParticipant((theme, collector) => {\n  const border = theme.getColor(editorHoverBorder);\n\n  if (border) {\n    const borderWidth = theme.type === ColorScheme.HIGH_CONTRAST ? 2 : 1;\n    collector.addRule(`.monaco-editor .tokens-inspect-widget { border: ${borderWidth}px solid ${border}; }`);\n    collector.addRule(`.monaco-editor .tokens-inspect-widget .tokens-inspect-separator { background-color: ${border}; }`);\n  }\n\n  const background = theme.getColor(editorHoverBackground);\n\n  if (background) {\n    collector.addRule(`.monaco-editor .tokens-inspect-widget { background-color: ${background}; }`);\n  }\n\n  const foreground = theme.getColor(editorHoverForeground);\n\n  if (foreground) {\n    collector.addRule(`.monaco-editor .tokens-inspect-widget { color: ${foreground}; }`);\n  }\n});","map":{"version":3,"sources":["/home/joe/DISSY/flask_test_1/react-flask-app/node_modules/monaco-editor/esm/vs/editor/standalone/browser/inspectTokens/inspectTokens.js"],"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","$","append","reset","Color","Disposable","EditorAction","registerEditorAction","registerEditorContribution","TokenMetadata","TokenizationRegistry","NullState","nullTokenize","nullTokenizeEncoded","ILanguageService","IStandaloneThemeService","editorHoverBackground","editorHoverBorder","editorHoverForeground","registerThemingParticipant","InspectTokensNLS","ColorScheme","InspectTokensController","constructor","editor","standaloneColorService","languageService","_editor","_languageService","_widget","_register","onDidChangeModel","e","stop","onDidChangeModelLanguage","onDidChange","onKeyUp","keyCode","get","getContribution","ID","dispose","launch","hasModel","InspectTokensWidget","InspectTokens","id","label","inspectTokensAction","alias","precondition","undefined","run","accessor","controller","renderTokenText","tokenText","result","charIndex","len","charCode","charCodeAt","String","fromCharCode","getSafeTokenizationSupport","languageIdCodec","languageId","tokenizationSupport","encodedLanguageId","encodeLanguageId","getInitialState","tokenize","line","hasEOL","state","tokenizeEncoded","allowEditorOverflow","_model","getModel","_domNode","document","createElement","className","_tokenizationSupport","getLanguageId","_compute","getPosition","onDidChangeCursorPosition","addContentWidget","removeContentWidget","getId","_ID","position","data","_getTokensAtLine","lineNumber","token1Index","tokens1","t","column","offset","token2Index","tokens2","lineContent","getLineContent","tokenStartIndex","tokenEndIndex","substring","metadata","_decodeMetadata","_tokenTypeToString","tokenType","_fontStyleToString","fontStyle","Format","CSS","formatHex","foreground","background","type","layoutContentWidget","colorMap","getColorMap","getTokenType","getFontStyle","getForeground","getBackground","decodeLanguageId","stateBeforeLine","_getStateBeforeLine","tokenizationResult1","tokenizationResult2","startState","tokens","endState","tokenizationResult","getDomNode","preference","theme","collector","border","getColor","borderWidth","HIGH_CONTRAST","addRule"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport './inspectTokens.css';\nimport { $, append, reset } from '../../../../base/browser/dom.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { TokenMetadata, TokenizationRegistry } from '../../../common/languages.js';\nimport { NullState, nullTokenize, nullTokenizeEncoded } from '../../../common/languages/nullMode.js';\nimport { ILanguageService } from '../../../common/services/language.js';\nimport { IStandaloneThemeService } from '../../common/standaloneTheme.js';\nimport { editorHoverBackground, editorHoverBorder, editorHoverForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { InspectTokensNLS } from '../../../common/standaloneStrings.js';\nimport { ColorScheme } from '../../../../platform/theme/common/theme.js';\nlet InspectTokensController = class InspectTokensController extends Disposable {\n    constructor(editor, standaloneColorService, languageService) {\n        super();\n        this._editor = editor;\n        this._languageService = languageService;\n        this._widget = null;\n        this._register(this._editor.onDidChangeModel((e) => this.stop()));\n        this._register(this._editor.onDidChangeModelLanguage((e) => this.stop()));\n        this._register(TokenizationRegistry.onDidChange((e) => this.stop()));\n        this._register(this._editor.onKeyUp((e) => e.keyCode === 9 /* Escape */ && this.stop()));\n    }\n    static get(editor) {\n        return editor.getContribution(InspectTokensController.ID);\n    }\n    dispose() {\n        this.stop();\n        super.dispose();\n    }\n    launch() {\n        if (this._widget) {\n            return;\n        }\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        this._widget = new InspectTokensWidget(this._editor, this._languageService);\n    }\n    stop() {\n        if (this._widget) {\n            this._widget.dispose();\n            this._widget = null;\n        }\n    }\n};\nInspectTokensController.ID = 'editor.contrib.inspectTokens';\nInspectTokensController = __decorate([\n    __param(1, IStandaloneThemeService),\n    __param(2, ILanguageService)\n], InspectTokensController);\nclass InspectTokens extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.inspectTokens',\n            label: InspectTokensNLS.inspectTokensAction,\n            alias: 'Developer: Inspect Tokens',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        const controller = InspectTokensController.get(editor);\n        if (controller) {\n            controller.launch();\n        }\n    }\n}\nfunction renderTokenText(tokenText) {\n    let result = '';\n    for (let charIndex = 0, len = tokenText.length; charIndex < len; charIndex++) {\n        const charCode = tokenText.charCodeAt(charIndex);\n        switch (charCode) {\n            case 9 /* Tab */:\n                result += '\\u2192'; // &rarr;\n                break;\n            case 32 /* Space */:\n                result += '\\u00B7'; // &middot;\n                break;\n            default:\n                result += String.fromCharCode(charCode);\n        }\n    }\n    return result;\n}\nfunction getSafeTokenizationSupport(languageIdCodec, languageId) {\n    const tokenizationSupport = TokenizationRegistry.get(languageId);\n    if (tokenizationSupport) {\n        return tokenizationSupport;\n    }\n    const encodedLanguageId = languageIdCodec.encodeLanguageId(languageId);\n    return {\n        getInitialState: () => NullState,\n        tokenize: (line, hasEOL, state) => nullTokenize(languageId, state),\n        tokenizeEncoded: (line, hasEOL, state) => nullTokenizeEncoded(encodedLanguageId, state)\n    };\n}\nclass InspectTokensWidget extends Disposable {\n    constructor(editor, languageService) {\n        super();\n        // Editor.IContentWidget.allowEditorOverflow\n        this.allowEditorOverflow = true;\n        this._editor = editor;\n        this._languageService = languageService;\n        this._model = this._editor.getModel();\n        this._domNode = document.createElement('div');\n        this._domNode.className = 'tokens-inspect-widget';\n        this._tokenizationSupport = getSafeTokenizationSupport(this._languageService.languageIdCodec, this._model.getLanguageId());\n        this._compute(this._editor.getPosition());\n        this._register(this._editor.onDidChangeCursorPosition((e) => this._compute(this._editor.getPosition())));\n        this._editor.addContentWidget(this);\n    }\n    dispose() {\n        this._editor.removeContentWidget(this);\n        super.dispose();\n    }\n    getId() {\n        return InspectTokensWidget._ID;\n    }\n    _compute(position) {\n        const data = this._getTokensAtLine(position.lineNumber);\n        let token1Index = 0;\n        for (let i = data.tokens1.length - 1; i >= 0; i--) {\n            const t = data.tokens1[i];\n            if (position.column - 1 >= t.offset) {\n                token1Index = i;\n                break;\n            }\n        }\n        let token2Index = 0;\n        for (let i = (data.tokens2.length >>> 1); i >= 0; i--) {\n            if (position.column - 1 >= data.tokens2[(i << 1)]) {\n                token2Index = i;\n                break;\n            }\n        }\n        const lineContent = this._model.getLineContent(position.lineNumber);\n        let tokenText = '';\n        if (token1Index < data.tokens1.length) {\n            const tokenStartIndex = data.tokens1[token1Index].offset;\n            const tokenEndIndex = token1Index + 1 < data.tokens1.length ? data.tokens1[token1Index + 1].offset : lineContent.length;\n            tokenText = lineContent.substring(tokenStartIndex, tokenEndIndex);\n        }\n        reset(this._domNode, $('h2.tm-token', undefined, renderTokenText(tokenText), $('span.tm-token-length', undefined, `${tokenText.length} ${tokenText.length === 1 ? 'char' : 'chars'}`)));\n        append(this._domNode, $('hr.tokens-inspect-separator', { 'style': 'clear:both' }));\n        const metadata = (token2Index << 1) + 1 < data.tokens2.length ? this._decodeMetadata(data.tokens2[(token2Index << 1) + 1]) : null;\n        append(this._domNode, $('table.tm-metadata-table', undefined, $('tbody', undefined, $('tr', undefined, $('td.tm-metadata-key', undefined, 'language'), $('td.tm-metadata-value', undefined, `${metadata ? metadata.languageId : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'token type'), $('td.tm-metadata-value', undefined, `${metadata ? this._tokenTypeToString(metadata.tokenType) : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'font style'), $('td.tm-metadata-value', undefined, `${metadata ? this._fontStyleToString(metadata.fontStyle) : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'foreground'), $('td.tm-metadata-value', undefined, `${metadata ? Color.Format.CSS.formatHex(metadata.foreground) : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'background'), $('td.tm-metadata-value', undefined, `${metadata ? Color.Format.CSS.formatHex(metadata.background) : '-?-'}`)))));\n        append(this._domNode, $('hr.tokens-inspect-separator'));\n        if (token1Index < data.tokens1.length) {\n            append(this._domNode, $('span.tm-token-type', undefined, data.tokens1[token1Index].type));\n        }\n        this._editor.layoutContentWidget(this);\n    }\n    _decodeMetadata(metadata) {\n        const colorMap = TokenizationRegistry.getColorMap();\n        const languageId = TokenMetadata.getLanguageId(metadata);\n        const tokenType = TokenMetadata.getTokenType(metadata);\n        const fontStyle = TokenMetadata.getFontStyle(metadata);\n        const foreground = TokenMetadata.getForeground(metadata);\n        const background = TokenMetadata.getBackground(metadata);\n        return {\n            languageId: this._languageService.languageIdCodec.decodeLanguageId(languageId),\n            tokenType: tokenType,\n            fontStyle: fontStyle,\n            foreground: colorMap[foreground],\n            background: colorMap[background]\n        };\n    }\n    _tokenTypeToString(tokenType) {\n        switch (tokenType) {\n            case 0 /* Other */: return 'Other';\n            case 1 /* Comment */: return 'Comment';\n            case 2 /* String */: return 'String';\n            case 3 /* RegEx */: return 'RegEx';\n            default: return '??';\n        }\n    }\n    _fontStyleToString(fontStyle) {\n        let r = '';\n        if (fontStyle & 1 /* Italic */) {\n            r += 'italic ';\n        }\n        if (fontStyle & 2 /* Bold */) {\n            r += 'bold ';\n        }\n        if (fontStyle & 4 /* Underline */) {\n            r += 'underline ';\n        }\n        if (fontStyle & 8 /* Strikethrough */) {\n            r += 'strikethrough ';\n        }\n        if (r.length === 0) {\n            r = '---';\n        }\n        return r;\n    }\n    _getTokensAtLine(lineNumber) {\n        const stateBeforeLine = this._getStateBeforeLine(lineNumber);\n        const tokenizationResult1 = this._tokenizationSupport.tokenize(this._model.getLineContent(lineNumber), true, stateBeforeLine);\n        const tokenizationResult2 = this._tokenizationSupport.tokenizeEncoded(this._model.getLineContent(lineNumber), true, stateBeforeLine);\n        return {\n            startState: stateBeforeLine,\n            tokens1: tokenizationResult1.tokens,\n            tokens2: tokenizationResult2.tokens,\n            endState: tokenizationResult1.endState\n        };\n    }\n    _getStateBeforeLine(lineNumber) {\n        let state = this._tokenizationSupport.getInitialState();\n        for (let i = 1; i < lineNumber; i++) {\n            const tokenizationResult = this._tokenizationSupport.tokenize(this._model.getLineContent(i), true, state);\n            state = tokenizationResult.endState;\n        }\n        return state;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return {\n            position: this._editor.getPosition(),\n            preference: [2 /* BELOW */, 1 /* ABOVE */]\n        };\n    }\n}\nInspectTokensWidget._ID = 'editor.contrib.inspectTokensWidget';\nregisterEditorContribution(InspectTokensController.ID, InspectTokensController);\nregisterEditorAction(InspectTokens);\nregisterThemingParticipant((theme, collector) => {\n    const border = theme.getColor(editorHoverBorder);\n    if (border) {\n        const borderWidth = theme.type === ColorScheme.HIGH_CONTRAST ? 2 : 1;\n        collector.addRule(`.monaco-editor .tokens-inspect-widget { border: ${borderWidth}px solid ${border}; }`);\n        collector.addRule(`.monaco-editor .tokens-inspect-widget .tokens-inspect-separator { background-color: ${border}; }`);\n    }\n    const background = theme.getColor(editorHoverBackground);\n    if (background) {\n        collector.addRule(`.monaco-editor .tokens-inspect-widget { background-color: ${background}; }`);\n    }\n    const foreground = theme.getColor(editorHoverForeground);\n    if (foreground) {\n        collector.addRule(`.monaco-editor .tokens-inspect-widget { color: ${foreground}; }`);\n    }\n});\n"]},"metadata":{},"sourceType":"module"}