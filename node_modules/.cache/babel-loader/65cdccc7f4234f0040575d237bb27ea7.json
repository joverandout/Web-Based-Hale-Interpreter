{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport * as dom from '../../../../../base/browser/dom.js';\nimport { CountBadge } from '../../../../../base/browser/ui/countBadge/countBadge.js';\nimport { HighlightedLabel } from '../../../../../base/browser/ui/highlightedlabel/highlightedLabel.js';\nimport { IconLabel } from '../../../../../base/browser/ui/iconLabel/iconLabel.js';\nimport { createMatches, FuzzyScore } from '../../../../../base/common/filters.js';\nimport { getBaseLabel } from '../../../../../base/common/labels.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { basename, dirname } from '../../../../../base/common/resources.js';\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\nimport { localize } from '../../../../../nls.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../../platform/keybinding/common/keybinding.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { attachBadgeStyler } from '../../../../../platform/theme/common/styler.js';\nimport { IThemeService } from '../../../../../platform/theme/common/themeService.js';\nimport { FileReferences, OneReference, ReferencesModel } from '../referencesModel.js';\nlet DataSource = class DataSource {\n  constructor(_resolverService) {\n    this._resolverService = _resolverService;\n  }\n\n  hasChildren(element) {\n    if (element instanceof ReferencesModel) {\n      return true;\n    }\n\n    if (element instanceof FileReferences) {\n      return true;\n    }\n\n    return false;\n  }\n\n  getChildren(element) {\n    if (element instanceof ReferencesModel) {\n      return element.groups;\n    }\n\n    if (element instanceof FileReferences) {\n      return element.resolve(this._resolverService).then(val => {\n        // if (element.failure) {\n        // \t// refresh the element on failure so that\n        // \t// we can update its rendering\n        // \treturn tree.refresh(element).then(() => val.children);\n        // }\n        return val.children;\n      });\n    }\n\n    throw new Error('bad tree');\n  }\n\n};\nDataSource = __decorate([__param(0, ITextModelService)], DataSource);\nexport { DataSource }; //#endregion\n\nexport class Delegate {\n  getHeight() {\n    return 23;\n  }\n\n  getTemplateId(element) {\n    if (element instanceof FileReferences) {\n      return FileReferencesRenderer.id;\n    } else {\n      return OneReferenceRenderer.id;\n    }\n  }\n\n}\nlet StringRepresentationProvider = class StringRepresentationProvider {\n  constructor(_keybindingService) {\n    this._keybindingService = _keybindingService;\n  }\n\n  getKeyboardNavigationLabel(element) {\n    var _a;\n\n    if (element instanceof OneReference) {\n      const parts = (_a = element.parent.getPreview(element)) === null || _a === void 0 ? void 0 : _a.preview(element.range);\n\n      if (parts) {\n        return parts.value;\n      }\n    } // FileReferences or unresolved OneReference\n\n\n    return basename(element.uri);\n  }\n\n};\nStringRepresentationProvider = __decorate([__param(0, IKeybindingService)], StringRepresentationProvider);\nexport { StringRepresentationProvider };\nexport class IdentityProvider {\n  getId(element) {\n    return element instanceof OneReference ? element.id : element.uri;\n  }\n\n} //#region render: File\n\nlet FileReferencesTemplate = class FileReferencesTemplate extends Disposable {\n  constructor(container, _uriLabel, themeService) {\n    super();\n    this._uriLabel = _uriLabel;\n    const parent = document.createElement('div');\n    parent.classList.add('reference-file');\n    this.file = this._register(new IconLabel(parent, {\n      supportHighlights: true\n    }));\n    this.badge = new CountBadge(dom.append(parent, dom.$('.count')));\n\n    this._register(attachBadgeStyler(this.badge, themeService));\n\n    container.appendChild(parent);\n  }\n\n  set(element, matches) {\n    let parent = dirname(element.uri);\n    this.file.setLabel(getBaseLabel(element.uri), this._uriLabel.getUriLabel(parent, {\n      relative: true\n    }), {\n      title: this._uriLabel.getUriLabel(element.uri),\n      matches\n    });\n    const len = element.children.length;\n    this.badge.setCount(len);\n\n    if (len > 1) {\n      this.badge.setTitleFormat(localize('referencesCount', \"{0} references\", len));\n    } else {\n      this.badge.setTitleFormat(localize('referenceCount', \"{0} reference\", len));\n    }\n  }\n\n};\nFileReferencesTemplate = __decorate([__param(1, ILabelService), __param(2, IThemeService)], FileReferencesTemplate);\nlet FileReferencesRenderer = class FileReferencesRenderer {\n  constructor(_instantiationService) {\n    this._instantiationService = _instantiationService;\n    this.templateId = FileReferencesRenderer.id;\n  }\n\n  renderTemplate(container) {\n    return this._instantiationService.createInstance(FileReferencesTemplate, container);\n  }\n\n  renderElement(node, index, template) {\n    template.set(node.element, createMatches(node.filterData));\n  }\n\n  disposeTemplate(templateData) {\n    templateData.dispose();\n  }\n\n};\nFileReferencesRenderer.id = 'FileReferencesRenderer';\nFileReferencesRenderer = __decorate([__param(0, IInstantiationService)], FileReferencesRenderer);\nexport { FileReferencesRenderer }; //#endregion\n//#region render: Reference\n\nclass OneReferenceTemplate {\n  constructor(container) {\n    this.label = new HighlightedLabel(container);\n  }\n\n  set(element, score) {\n    var _a;\n\n    const preview = (_a = element.parent.getPreview(element)) === null || _a === void 0 ? void 0 : _a.preview(element.range);\n\n    if (!preview || !preview.value) {\n      // this means we FAILED to resolve the document or the value is the empty string\n      this.label.set(`${basename(element.uri)}:${element.range.startLineNumber + 1}:${element.range.startColumn + 1}`);\n    } else {\n      // render search match as highlight unless\n      // we have score, then render the score\n      const {\n        value,\n        highlight\n      } = preview;\n\n      if (score && !FuzzyScore.isDefault(score)) {\n        this.label.element.classList.toggle('referenceMatch', false);\n        this.label.set(value, createMatches(score));\n      } else {\n        this.label.element.classList.toggle('referenceMatch', true);\n        this.label.set(value, [highlight]);\n      }\n    }\n  }\n\n}\n\nexport class OneReferenceRenderer {\n  constructor() {\n    this.templateId = OneReferenceRenderer.id;\n  }\n\n  renderTemplate(container) {\n    return new OneReferenceTemplate(container);\n  }\n\n  renderElement(node, index, templateData) {\n    templateData.set(node.element, node.filterData);\n  }\n\n  disposeTemplate() {}\n\n}\nOneReferenceRenderer.id = 'OneReferenceRenderer'; //#endregion\n\nexport class AccessibilityProvider {\n  getWidgetAriaLabel() {\n    return localize('treeAriaLabel', \"References\");\n  }\n\n  getAriaLabel(element) {\n    return element.ariaMessage;\n  }\n\n}","map":{"version":3,"sources":["/home/joe/DISSY/flask_test_1/react-flask-app/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/peek/referencesTree.js"],"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","dom","CountBadge","HighlightedLabel","IconLabel","createMatches","FuzzyScore","getBaseLabel","Disposable","basename","dirname","ITextModelService","localize","IInstantiationService","IKeybindingService","ILabelService","attachBadgeStyler","IThemeService","FileReferences","OneReference","ReferencesModel","DataSource","constructor","_resolverService","hasChildren","element","getChildren","groups","resolve","then","val","children","Error","Delegate","getHeight","getTemplateId","FileReferencesRenderer","id","OneReferenceRenderer","StringRepresentationProvider","_keybindingService","getKeyboardNavigationLabel","_a","parts","parent","getPreview","preview","range","value","uri","IdentityProvider","getId","FileReferencesTemplate","container","_uriLabel","themeService","document","createElement","classList","add","file","_register","supportHighlights","badge","append","$","appendChild","set","matches","setLabel","getUriLabel","relative","title","len","setCount","setTitleFormat","_instantiationService","templateId","renderTemplate","createInstance","renderElement","node","index","template","filterData","disposeTemplate","templateData","dispose","OneReferenceTemplate","label","score","startLineNumber","startColumn","highlight","isDefault","toggle","AccessibilityProvider","getWidgetAriaLabel","getAriaLabel","ariaMessage"],"mappings":"AAAA;AACA;AACA;AACA;AACA,IAAIA,UAAU,GAAI,QAAQ,KAAKA,UAAd,IAA6B,UAAUC,UAAV,EAAsBC,MAAtB,EAA8BC,GAA9B,EAAmCC,IAAnC,EAAyC;AACnF,MAAIC,CAAC,GAAGC,SAAS,CAACC,MAAlB;AAAA,MAA0BC,CAAC,GAAGH,CAAC,GAAG,CAAJ,GAAQH,MAAR,GAAiBE,IAAI,KAAK,IAAT,GAAgBA,IAAI,GAAGK,MAAM,CAACC,wBAAP,CAAgCR,MAAhC,EAAwCC,GAAxC,CAAvB,GAAsEC,IAArH;AAAA,MAA2HO,CAA3H;AACA,MAAI,OAAOC,OAAP,KAAmB,QAAnB,IAA+B,OAAOA,OAAO,CAACC,QAAf,KAA4B,UAA/D,EAA2EL,CAAC,GAAGI,OAAO,CAACC,QAAR,CAAiBZ,UAAjB,EAA6BC,MAA7B,EAAqCC,GAArC,EAA0CC,IAA1C,CAAJ,CAA3E,KACK,KAAK,IAAIU,CAAC,GAAGb,UAAU,CAACM,MAAX,GAAoB,CAAjC,EAAoCO,CAAC,IAAI,CAAzC,EAA4CA,CAAC,EAA7C,EAAiD,IAAIH,CAAC,GAAGV,UAAU,CAACa,CAAD,CAAlB,EAAuBN,CAAC,GAAG,CAACH,CAAC,GAAG,CAAJ,GAAQM,CAAC,CAACH,CAAD,CAAT,GAAeH,CAAC,GAAG,CAAJ,GAAQM,CAAC,CAACT,MAAD,EAASC,GAAT,EAAcK,CAAd,CAAT,GAA4BG,CAAC,CAACT,MAAD,EAASC,GAAT,CAA7C,KAA+DK,CAAnE;AAC7E,SAAOH,CAAC,GAAG,CAAJ,IAASG,CAAT,IAAcC,MAAM,CAACM,cAAP,CAAsBb,MAAtB,EAA8BC,GAA9B,EAAmCK,CAAnC,CAAd,EAAqDA,CAA5D;AACH,CALD;;AAMA,IAAIQ,OAAO,GAAI,QAAQ,KAAKA,OAAd,IAA0B,UAAUC,UAAV,EAAsBC,SAAtB,EAAiC;AACrE,SAAO,UAAUhB,MAAV,EAAkBC,GAAlB,EAAuB;AAAEe,IAAAA,SAAS,CAAChB,MAAD,EAASC,GAAT,EAAcc,UAAd,CAAT;AAAqC,GAArE;AACH,CAFD;;AAGA,OAAO,KAAKE,GAAZ,MAAqB,oCAArB;AACA,SAASC,UAAT,QAA2B,yDAA3B;AACA,SAASC,gBAAT,QAAiC,qEAAjC;AACA,SAASC,SAAT,QAA0B,uDAA1B;AACA,SAASC,aAAT,EAAwBC,UAAxB,QAA0C,uCAA1C;AACA,SAASC,YAAT,QAA6B,sCAA7B;AACA,SAASC,UAAT,QAA2B,yCAA3B;AACA,SAASC,QAAT,EAAmBC,OAAnB,QAAkC,yCAAlC;AACA,SAASC,iBAAT,QAAkC,gDAAlC;AACA,SAASC,QAAT,QAAyB,uBAAzB;AACA,SAASC,qBAAT,QAAsC,+DAAtC;AACA,SAASC,kBAAT,QAAmC,yDAAnC;AACA,SAASC,aAAT,QAA8B,+CAA9B;AACA,SAASC,iBAAT,QAAkC,gDAAlC;AACA,SAASC,aAAT,QAA8B,sDAA9B;AACA,SAASC,cAAT,EAAyBC,YAAzB,EAAuCC,eAAvC,QAA8D,uBAA9D;AACA,IAAIC,UAAU,GAAG,MAAMA,UAAN,CAAiB;AAC9BC,EAAAA,WAAW,CAACC,gBAAD,EAAmB;AAC1B,SAAKA,gBAAL,GAAwBA,gBAAxB;AACH;;AACDC,EAAAA,WAAW,CAACC,OAAD,EAAU;AACjB,QAAIA,OAAO,YAAYL,eAAvB,EAAwC;AACpC,aAAO,IAAP;AACH;;AACD,QAAIK,OAAO,YAAYP,cAAvB,EAAuC;AACnC,aAAO,IAAP;AACH;;AACD,WAAO,KAAP;AACH;;AACDQ,EAAAA,WAAW,CAACD,OAAD,EAAU;AACjB,QAAIA,OAAO,YAAYL,eAAvB,EAAwC;AACpC,aAAOK,OAAO,CAACE,MAAf;AACH;;AACD,QAAIF,OAAO,YAAYP,cAAvB,EAAuC;AACnC,aAAOO,OAAO,CAACG,OAAR,CAAgB,KAAKL,gBAArB,EAAuCM,IAAvC,CAA4CC,GAAG,IAAI;AACtD;AACA;AACA;AACA;AACA;AACA,eAAOA,GAAG,CAACC,QAAX;AACH,OAPM,CAAP;AAQH;;AACD,UAAM,IAAIC,KAAJ,CAAU,UAAV,CAAN;AACH;;AA5B6B,CAAlC;AA8BAX,UAAU,GAAGvC,UAAU,CAAC,CACpBgB,OAAO,CAAC,CAAD,EAAIa,iBAAJ,CADa,CAAD,EAEpBU,UAFoB,CAAvB;AAGA,SAASA,UAAT,G,CACA;;AACA,OAAO,MAAMY,QAAN,CAAe;AAClBC,EAAAA,SAAS,GAAG;AACR,WAAO,EAAP;AACH;;AACDC,EAAAA,aAAa,CAACV,OAAD,EAAU;AACnB,QAAIA,OAAO,YAAYP,cAAvB,EAAuC;AACnC,aAAOkB,sBAAsB,CAACC,EAA9B;AACH,KAFD,MAGK;AACD,aAAOC,oBAAoB,CAACD,EAA5B;AACH;AACJ;;AAXiB;AAatB,IAAIE,4BAA4B,GAAG,MAAMA,4BAAN,CAAmC;AAClEjB,EAAAA,WAAW,CAACkB,kBAAD,EAAqB;AAC5B,SAAKA,kBAAL,GAA0BA,kBAA1B;AACH;;AACDC,EAAAA,0BAA0B,CAAChB,OAAD,EAAU;AAChC,QAAIiB,EAAJ;;AACA,QAAIjB,OAAO,YAAYN,YAAvB,EAAqC;AACjC,YAAMwB,KAAK,GAAG,CAACD,EAAE,GAAGjB,OAAO,CAACmB,MAAR,CAAeC,UAAf,CAA0BpB,OAA1B,CAAN,MAA8C,IAA9C,IAAsDiB,EAAE,KAAK,KAAK,CAAlE,GAAsE,KAAK,CAA3E,GAA+EA,EAAE,CAACI,OAAH,CAAWrB,OAAO,CAACsB,KAAnB,CAA7F;;AACA,UAAIJ,KAAJ,EAAW;AACP,eAAOA,KAAK,CAACK,KAAb;AACH;AACJ,KAP+B,CAQhC;;;AACA,WAAOvC,QAAQ,CAACgB,OAAO,CAACwB,GAAT,CAAf;AACH;;AAdiE,CAAtE;AAgBAV,4BAA4B,GAAGzD,UAAU,CAAC,CACtCgB,OAAO,CAAC,CAAD,EAAIgB,kBAAJ,CAD+B,CAAD,EAEtCyB,4BAFsC,CAAzC;AAGA,SAASA,4BAAT;AACA,OAAO,MAAMW,gBAAN,CAAuB;AAC1BC,EAAAA,KAAK,CAAC1B,OAAD,EAAU;AACX,WAAOA,OAAO,YAAYN,YAAnB,GAAkCM,OAAO,CAACY,EAA1C,GAA+CZ,OAAO,CAACwB,GAA9D;AACH;;AAHyB,C,CAK9B;;AACA,IAAIG,sBAAsB,GAAG,MAAMA,sBAAN,SAAqC5C,UAArC,CAAgD;AACzEc,EAAAA,WAAW,CAAC+B,SAAD,EAAYC,SAAZ,EAAuBC,YAAvB,EAAqC;AAC5C;AACA,SAAKD,SAAL,GAAiBA,SAAjB;AACA,UAAMV,MAAM,GAAGY,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAf;AACAb,IAAAA,MAAM,CAACc,SAAP,CAAiBC,GAAjB,CAAqB,gBAArB;AACA,SAAKC,IAAL,GAAY,KAAKC,SAAL,CAAe,IAAIzD,SAAJ,CAAcwC,MAAd,EAAsB;AAAEkB,MAAAA,iBAAiB,EAAE;AAArB,KAAtB,CAAf,CAAZ;AACA,SAAKC,KAAL,GAAa,IAAI7D,UAAJ,CAAeD,GAAG,CAAC+D,MAAJ,CAAWpB,MAAX,EAAmB3C,GAAG,CAACgE,CAAJ,CAAM,QAAN,CAAnB,CAAf,CAAb;;AACA,SAAKJ,SAAL,CAAe7C,iBAAiB,CAAC,KAAK+C,KAAN,EAAaR,YAAb,CAAhC;;AACAF,IAAAA,SAAS,CAACa,WAAV,CAAsBtB,MAAtB;AACH;;AACDuB,EAAAA,GAAG,CAAC1C,OAAD,EAAU2C,OAAV,EAAmB;AAClB,QAAIxB,MAAM,GAAGlC,OAAO,CAACe,OAAO,CAACwB,GAAT,CAApB;AACA,SAAKW,IAAL,CAAUS,QAAV,CAAmB9D,YAAY,CAACkB,OAAO,CAACwB,GAAT,CAA/B,EAA8C,KAAKK,SAAL,CAAegB,WAAf,CAA2B1B,MAA3B,EAAmC;AAAE2B,MAAAA,QAAQ,EAAE;AAAZ,KAAnC,CAA9C,EAAsG;AAAEC,MAAAA,KAAK,EAAE,KAAKlB,SAAL,CAAegB,WAAf,CAA2B7C,OAAO,CAACwB,GAAnC,CAAT;AAAkDmB,MAAAA;AAAlD,KAAtG;AACA,UAAMK,GAAG,GAAGhD,OAAO,CAACM,QAAR,CAAiB1C,MAA7B;AACA,SAAK0E,KAAL,CAAWW,QAAX,CAAoBD,GAApB;;AACA,QAAIA,GAAG,GAAG,CAAV,EAAa;AACT,WAAKV,KAAL,CAAWY,cAAX,CAA0B/D,QAAQ,CAAC,iBAAD,EAAoB,gBAApB,EAAsC6D,GAAtC,CAAlC;AACH,KAFD,MAGK;AACD,WAAKV,KAAL,CAAWY,cAAX,CAA0B/D,QAAQ,CAAC,gBAAD,EAAmB,eAAnB,EAAoC6D,GAApC,CAAlC;AACH;AACJ;;AAtBwE,CAA7E;AAwBArB,sBAAsB,GAAGtE,UAAU,CAAC,CAChCgB,OAAO,CAAC,CAAD,EAAIiB,aAAJ,CADyB,EAEhCjB,OAAO,CAAC,CAAD,EAAImB,aAAJ,CAFyB,CAAD,EAGhCmC,sBAHgC,CAAnC;AAIA,IAAIhB,sBAAsB,GAAG,MAAMA,sBAAN,CAA6B;AACtDd,EAAAA,WAAW,CAACsD,qBAAD,EAAwB;AAC/B,SAAKA,qBAAL,GAA6BA,qBAA7B;AACA,SAAKC,UAAL,GAAkBzC,sBAAsB,CAACC,EAAzC;AACH;;AACDyC,EAAAA,cAAc,CAACzB,SAAD,EAAY;AACtB,WAAO,KAAKuB,qBAAL,CAA2BG,cAA3B,CAA0C3B,sBAA1C,EAAkEC,SAAlE,CAAP;AACH;;AACD2B,EAAAA,aAAa,CAACC,IAAD,EAAOC,KAAP,EAAcC,QAAd,EAAwB;AACjCA,IAAAA,QAAQ,CAAChB,GAAT,CAAac,IAAI,CAACxD,OAAlB,EAA2BpB,aAAa,CAAC4E,IAAI,CAACG,UAAN,CAAxC;AACH;;AACDC,EAAAA,eAAe,CAACC,YAAD,EAAe;AAC1BA,IAAAA,YAAY,CAACC,OAAb;AACH;;AAbqD,CAA1D;AAeAnD,sBAAsB,CAACC,EAAvB,GAA4B,wBAA5B;AACAD,sBAAsB,GAAGtD,UAAU,CAAC,CAChCgB,OAAO,CAAC,CAAD,EAAIe,qBAAJ,CADyB,CAAD,EAEhCuB,sBAFgC,CAAnC;AAGA,SAASA,sBAAT,G,CACA;AACA;;AACA,MAAMoD,oBAAN,CAA2B;AACvBlE,EAAAA,WAAW,CAAC+B,SAAD,EAAY;AACnB,SAAKoC,KAAL,GAAa,IAAItF,gBAAJ,CAAqBkD,SAArB,CAAb;AACH;;AACDc,EAAAA,GAAG,CAAC1C,OAAD,EAAUiE,KAAV,EAAiB;AAChB,QAAIhD,EAAJ;;AACA,UAAMI,OAAO,GAAG,CAACJ,EAAE,GAAGjB,OAAO,CAACmB,MAAR,CAAeC,UAAf,CAA0BpB,OAA1B,CAAN,MAA8C,IAA9C,IAAsDiB,EAAE,KAAK,KAAK,CAAlE,GAAsE,KAAK,CAA3E,GAA+EA,EAAE,CAACI,OAAH,CAAWrB,OAAO,CAACsB,KAAnB,CAA/F;;AACA,QAAI,CAACD,OAAD,IAAY,CAACA,OAAO,CAACE,KAAzB,EAAgC;AAC5B;AACA,WAAKyC,KAAL,CAAWtB,GAAX,CAAgB,GAAE1D,QAAQ,CAACgB,OAAO,CAACwB,GAAT,CAAc,IAAGxB,OAAO,CAACsB,KAAR,CAAc4C,eAAd,GAAgC,CAAE,IAAGlE,OAAO,CAACsB,KAAR,CAAc6C,WAAd,GAA4B,CAAE,EAA9G;AACH,KAHD,MAIK;AACD;AACA;AACA,YAAM;AAAE5C,QAAAA,KAAF;AAAS6C,QAAAA;AAAT,UAAuB/C,OAA7B;;AACA,UAAI4C,KAAK,IAAI,CAACpF,UAAU,CAACwF,SAAX,CAAqBJ,KAArB,CAAd,EAA2C;AACvC,aAAKD,KAAL,CAAWhE,OAAX,CAAmBiC,SAAnB,CAA6BqC,MAA7B,CAAoC,gBAApC,EAAsD,KAAtD;AACA,aAAKN,KAAL,CAAWtB,GAAX,CAAenB,KAAf,EAAsB3C,aAAa,CAACqF,KAAD,CAAnC;AACH,OAHD,MAIK;AACD,aAAKD,KAAL,CAAWhE,OAAX,CAAmBiC,SAAnB,CAA6BqC,MAA7B,CAAoC,gBAApC,EAAsD,IAAtD;AACA,aAAKN,KAAL,CAAWtB,GAAX,CAAenB,KAAf,EAAsB,CAAC6C,SAAD,CAAtB;AACH;AACJ;AACJ;;AAxBsB;;AA0B3B,OAAO,MAAMvD,oBAAN,CAA2B;AAC9BhB,EAAAA,WAAW,GAAG;AACV,SAAKuD,UAAL,GAAkBvC,oBAAoB,CAACD,EAAvC;AACH;;AACDyC,EAAAA,cAAc,CAACzB,SAAD,EAAY;AACtB,WAAO,IAAImC,oBAAJ,CAAyBnC,SAAzB,CAAP;AACH;;AACD2B,EAAAA,aAAa,CAACC,IAAD,EAAOC,KAAP,EAAcI,YAAd,EAA4B;AACrCA,IAAAA,YAAY,CAACnB,GAAb,CAAiBc,IAAI,CAACxD,OAAtB,EAA+BwD,IAAI,CAACG,UAApC;AACH;;AACDC,EAAAA,eAAe,GAAG,CACjB;;AAX6B;AAalC/C,oBAAoB,CAACD,EAArB,GAA0B,sBAA1B,C,CACA;;AACA,OAAO,MAAM2D,qBAAN,CAA4B;AAC/BC,EAAAA,kBAAkB,GAAG;AACjB,WAAOrF,QAAQ,CAAC,eAAD,EAAkB,YAAlB,CAAf;AACH;;AACDsF,EAAAA,YAAY,CAACzE,OAAD,EAAU;AAClB,WAAOA,OAAO,CAAC0E,WAAf;AACH;;AAN8B","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../../base/browser/dom.js';\nimport { CountBadge } from '../../../../../base/browser/ui/countBadge/countBadge.js';\nimport { HighlightedLabel } from '../../../../../base/browser/ui/highlightedlabel/highlightedLabel.js';\nimport { IconLabel } from '../../../../../base/browser/ui/iconLabel/iconLabel.js';\nimport { createMatches, FuzzyScore } from '../../../../../base/common/filters.js';\nimport { getBaseLabel } from '../../../../../base/common/labels.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { basename, dirname } from '../../../../../base/common/resources.js';\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\nimport { localize } from '../../../../../nls.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../../platform/keybinding/common/keybinding.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { attachBadgeStyler } from '../../../../../platform/theme/common/styler.js';\nimport { IThemeService } from '../../../../../platform/theme/common/themeService.js';\nimport { FileReferences, OneReference, ReferencesModel } from '../referencesModel.js';\nlet DataSource = class DataSource {\n    constructor(_resolverService) {\n        this._resolverService = _resolverService;\n    }\n    hasChildren(element) {\n        if (element instanceof ReferencesModel) {\n            return true;\n        }\n        if (element instanceof FileReferences) {\n            return true;\n        }\n        return false;\n    }\n    getChildren(element) {\n        if (element instanceof ReferencesModel) {\n            return element.groups;\n        }\n        if (element instanceof FileReferences) {\n            return element.resolve(this._resolverService).then(val => {\n                // if (element.failure) {\n                // \t// refresh the element on failure so that\n                // \t// we can update its rendering\n                // \treturn tree.refresh(element).then(() => val.children);\n                // }\n                return val.children;\n            });\n        }\n        throw new Error('bad tree');\n    }\n};\nDataSource = __decorate([\n    __param(0, ITextModelService)\n], DataSource);\nexport { DataSource };\n//#endregion\nexport class Delegate {\n    getHeight() {\n        return 23;\n    }\n    getTemplateId(element) {\n        if (element instanceof FileReferences) {\n            return FileReferencesRenderer.id;\n        }\n        else {\n            return OneReferenceRenderer.id;\n        }\n    }\n}\nlet StringRepresentationProvider = class StringRepresentationProvider {\n    constructor(_keybindingService) {\n        this._keybindingService = _keybindingService;\n    }\n    getKeyboardNavigationLabel(element) {\n        var _a;\n        if (element instanceof OneReference) {\n            const parts = (_a = element.parent.getPreview(element)) === null || _a === void 0 ? void 0 : _a.preview(element.range);\n            if (parts) {\n                return parts.value;\n            }\n        }\n        // FileReferences or unresolved OneReference\n        return basename(element.uri);\n    }\n};\nStringRepresentationProvider = __decorate([\n    __param(0, IKeybindingService)\n], StringRepresentationProvider);\nexport { StringRepresentationProvider };\nexport class IdentityProvider {\n    getId(element) {\n        return element instanceof OneReference ? element.id : element.uri;\n    }\n}\n//#region render: File\nlet FileReferencesTemplate = class FileReferencesTemplate extends Disposable {\n    constructor(container, _uriLabel, themeService) {\n        super();\n        this._uriLabel = _uriLabel;\n        const parent = document.createElement('div');\n        parent.classList.add('reference-file');\n        this.file = this._register(new IconLabel(parent, { supportHighlights: true }));\n        this.badge = new CountBadge(dom.append(parent, dom.$('.count')));\n        this._register(attachBadgeStyler(this.badge, themeService));\n        container.appendChild(parent);\n    }\n    set(element, matches) {\n        let parent = dirname(element.uri);\n        this.file.setLabel(getBaseLabel(element.uri), this._uriLabel.getUriLabel(parent, { relative: true }), { title: this._uriLabel.getUriLabel(element.uri), matches });\n        const len = element.children.length;\n        this.badge.setCount(len);\n        if (len > 1) {\n            this.badge.setTitleFormat(localize('referencesCount', \"{0} references\", len));\n        }\n        else {\n            this.badge.setTitleFormat(localize('referenceCount', \"{0} reference\", len));\n        }\n    }\n};\nFileReferencesTemplate = __decorate([\n    __param(1, ILabelService),\n    __param(2, IThemeService)\n], FileReferencesTemplate);\nlet FileReferencesRenderer = class FileReferencesRenderer {\n    constructor(_instantiationService) {\n        this._instantiationService = _instantiationService;\n        this.templateId = FileReferencesRenderer.id;\n    }\n    renderTemplate(container) {\n        return this._instantiationService.createInstance(FileReferencesTemplate, container);\n    }\n    renderElement(node, index, template) {\n        template.set(node.element, createMatches(node.filterData));\n    }\n    disposeTemplate(templateData) {\n        templateData.dispose();\n    }\n};\nFileReferencesRenderer.id = 'FileReferencesRenderer';\nFileReferencesRenderer = __decorate([\n    __param(0, IInstantiationService)\n], FileReferencesRenderer);\nexport { FileReferencesRenderer };\n//#endregion\n//#region render: Reference\nclass OneReferenceTemplate {\n    constructor(container) {\n        this.label = new HighlightedLabel(container);\n    }\n    set(element, score) {\n        var _a;\n        const preview = (_a = element.parent.getPreview(element)) === null || _a === void 0 ? void 0 : _a.preview(element.range);\n        if (!preview || !preview.value) {\n            // this means we FAILED to resolve the document or the value is the empty string\n            this.label.set(`${basename(element.uri)}:${element.range.startLineNumber + 1}:${element.range.startColumn + 1}`);\n        }\n        else {\n            // render search match as highlight unless\n            // we have score, then render the score\n            const { value, highlight } = preview;\n            if (score && !FuzzyScore.isDefault(score)) {\n                this.label.element.classList.toggle('referenceMatch', false);\n                this.label.set(value, createMatches(score));\n            }\n            else {\n                this.label.element.classList.toggle('referenceMatch', true);\n                this.label.set(value, [highlight]);\n            }\n        }\n    }\n}\nexport class OneReferenceRenderer {\n    constructor() {\n        this.templateId = OneReferenceRenderer.id;\n    }\n    renderTemplate(container) {\n        return new OneReferenceTemplate(container);\n    }\n    renderElement(node, index, templateData) {\n        templateData.set(node.element, node.filterData);\n    }\n    disposeTemplate() {\n    }\n}\nOneReferenceRenderer.id = 'OneReferenceRenderer';\n//#endregion\nexport class AccessibilityProvider {\n    getWidgetAriaLabel() {\n        return localize('treeAriaLabel', \"References\");\n    }\n    getAriaLabel(element) {\n        return element.ariaMessage;\n    }\n}\n"]},"metadata":{},"sourceType":"module"}