{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { BrowserFeatures } from '../../canIUse.js';\nimport * as DOM from '../../dom.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../common/lifecycle.js';\nimport * as platform from '../../../common/platform.js';\nimport { Range } from '../../../common/range.js';\nimport './contextview.css';\nexport var LayoutAnchorMode;\n\n(function (LayoutAnchorMode) {\n  LayoutAnchorMode[LayoutAnchorMode[\"AVOID\"] = 0] = \"AVOID\";\n  LayoutAnchorMode[LayoutAnchorMode[\"ALIGN\"] = 1] = \"ALIGN\";\n})(LayoutAnchorMode || (LayoutAnchorMode = {}));\n/**\n * Lays out a one dimensional view next to an anchor in a viewport.\n *\n * @returns The view offset within the viewport.\n */\n\n\nexport function layout(viewportSize, viewSize, anchor) {\n  const layoutAfterAnchorBoundary = anchor.mode === LayoutAnchorMode.ALIGN ? anchor.offset : anchor.offset + anchor.size;\n  const layoutBeforeAnchorBoundary = anchor.mode === LayoutAnchorMode.ALIGN ? anchor.offset + anchor.size : anchor.offset;\n\n  if (anchor.position === 0\n  /* Before */\n  ) {\n    if (viewSize <= viewportSize - layoutAfterAnchorBoundary) {\n      return layoutAfterAnchorBoundary; // happy case, lay it out after the anchor\n    }\n\n    if (viewSize <= layoutBeforeAnchorBoundary) {\n      return layoutBeforeAnchorBoundary - viewSize; // ok case, lay it out before the anchor\n    }\n\n    return Math.max(viewportSize - viewSize, 0); // sad case, lay it over the anchor\n  } else {\n    if (viewSize <= layoutBeforeAnchorBoundary) {\n      return layoutBeforeAnchorBoundary - viewSize; // happy case, lay it out before the anchor\n    }\n\n    if (viewSize <= viewportSize - layoutAfterAnchorBoundary) {\n      return layoutAfterAnchorBoundary; // ok case, lay it out after the anchor\n    }\n\n    return 0; // sad case, lay it over the anchor\n  }\n}\nexport class ContextView extends Disposable {\n  constructor(container, domPosition) {\n    super();\n    this.container = null;\n    this.delegate = null;\n    this.toDisposeOnClean = Disposable.None;\n    this.toDisposeOnSetContainer = Disposable.None;\n    this.shadowRoot = null;\n    this.shadowRootHostElement = null;\n    this.view = DOM.$('.context-view');\n    this.useFixedPosition = false;\n    this.useShadowDOM = false;\n    DOM.hide(this.view);\n    this.setContainer(container, domPosition);\n\n    this._register(toDisposable(() => this.setContainer(null, 1\n    /* ABSOLUTE */\n    )));\n  }\n\n  setContainer(container, domPosition) {\n    var _a;\n\n    if (this.container) {\n      this.toDisposeOnSetContainer.dispose();\n\n      if (this.shadowRoot) {\n        this.shadowRoot.removeChild(this.view);\n        this.shadowRoot = null;\n        (_a = this.shadowRootHostElement) === null || _a === void 0 ? void 0 : _a.remove();\n        this.shadowRootHostElement = null;\n      } else {\n        this.container.removeChild(this.view);\n      }\n\n      this.container = null;\n    }\n\n    if (container) {\n      this.container = container;\n      this.useFixedPosition = domPosition !== 1\n      /* ABSOLUTE */\n      ;\n      this.useShadowDOM = domPosition === 3\n      /* FIXED_SHADOW */\n      ;\n\n      if (this.useShadowDOM) {\n        this.shadowRootHostElement = DOM.$('.shadow-root-host');\n        this.container.appendChild(this.shadowRootHostElement);\n        this.shadowRoot = this.shadowRootHostElement.attachShadow({\n          mode: 'open'\n        });\n        const style = document.createElement('style');\n        style.textContent = SHADOW_ROOT_CSS;\n        this.shadowRoot.appendChild(style);\n        this.shadowRoot.appendChild(this.view);\n        this.shadowRoot.appendChild(DOM.$('slot'));\n      } else {\n        this.container.appendChild(this.view);\n      }\n\n      const toDisposeOnSetContainer = new DisposableStore();\n      ContextView.BUBBLE_UP_EVENTS.forEach(event => {\n        toDisposeOnSetContainer.add(DOM.addStandardDisposableListener(this.container, event, e => {\n          this.onDOMEvent(e, false);\n        }));\n      });\n      ContextView.BUBBLE_DOWN_EVENTS.forEach(event => {\n        toDisposeOnSetContainer.add(DOM.addStandardDisposableListener(this.container, event, e => {\n          this.onDOMEvent(e, true);\n        }, true));\n      });\n      this.toDisposeOnSetContainer = toDisposeOnSetContainer;\n    }\n  }\n\n  show(delegate) {\n    if (this.isVisible()) {\n      this.hide();\n    } // Show static box\n\n\n    DOM.clearNode(this.view);\n    this.view.className = 'context-view';\n    this.view.style.top = '0px';\n    this.view.style.left = '0px';\n    this.view.style.zIndex = '2500';\n    this.view.style.position = this.useFixedPosition ? 'fixed' : 'absolute';\n    DOM.show(this.view); // Render content\n\n    this.toDisposeOnClean = delegate.render(this.view) || Disposable.None; // Set active delegate\n\n    this.delegate = delegate; // Layout\n\n    this.doLayout(); // Focus\n\n    if (this.delegate.focus) {\n      this.delegate.focus();\n    }\n  }\n\n  getViewElement() {\n    return this.view;\n  }\n\n  layout() {\n    if (!this.isVisible()) {\n      return;\n    }\n\n    if (this.delegate.canRelayout === false && !(platform.isIOS && BrowserFeatures.pointerEvents)) {\n      this.hide();\n      return;\n    }\n\n    if (this.delegate.layout) {\n      this.delegate.layout();\n    }\n\n    this.doLayout();\n  }\n\n  doLayout() {\n    // Check that we still have a delegate - this.delegate.layout may have hidden\n    if (!this.isVisible()) {\n      return;\n    } // Get anchor\n\n\n    let anchor = this.delegate.getAnchor(); // Compute around\n\n    let around; // Get the element's position and size (to anchor the view)\n\n    if (DOM.isHTMLElement(anchor)) {\n      let elementPosition = DOM.getDomNodePagePosition(anchor);\n      around = {\n        top: elementPosition.top,\n        left: elementPosition.left,\n        width: elementPosition.width,\n        height: elementPosition.height\n      };\n    } else {\n      around = {\n        top: anchor.y,\n        left: anchor.x,\n        width: anchor.width || 1,\n        height: anchor.height || 2\n      };\n    }\n\n    const viewSizeWidth = DOM.getTotalWidth(this.view);\n    const viewSizeHeight = DOM.getTotalHeight(this.view);\n    const anchorPosition = this.delegate.anchorPosition || 0\n    /* BELOW */\n    ;\n    const anchorAlignment = this.delegate.anchorAlignment || 0\n    /* LEFT */\n    ;\n    const anchorAxisAlignment = this.delegate.anchorAxisAlignment || 0\n    /* VERTICAL */\n    ;\n    let top;\n    let left;\n\n    if (anchorAxisAlignment === 0\n    /* VERTICAL */\n    ) {\n      const verticalAnchor = {\n        offset: around.top - window.pageYOffset,\n        size: around.height,\n        position: anchorPosition === 0\n        /* BELOW */\n        ? 0\n        /* Before */\n        : 1\n        /* After */\n\n      };\n      const horizontalAnchor = {\n        offset: around.left,\n        size: around.width,\n        position: anchorAlignment === 0\n        /* LEFT */\n        ? 0\n        /* Before */\n        : 1\n        /* After */\n        ,\n        mode: LayoutAnchorMode.ALIGN\n      };\n      top = layout(window.innerHeight, viewSizeHeight, verticalAnchor) + window.pageYOffset; // if view intersects vertically with anchor,  we must avoid the anchor\n\n      if (Range.intersects({\n        start: top,\n        end: top + viewSizeHeight\n      }, {\n        start: verticalAnchor.offset,\n        end: verticalAnchor.offset + verticalAnchor.size\n      })) {\n        horizontalAnchor.mode = LayoutAnchorMode.AVOID;\n      }\n\n      left = layout(window.innerWidth, viewSizeWidth, horizontalAnchor);\n    } else {\n      const horizontalAnchor = {\n        offset: around.left,\n        size: around.width,\n        position: anchorAlignment === 0\n        /* LEFT */\n        ? 0\n        /* Before */\n        : 1\n        /* After */\n\n      };\n      const verticalAnchor = {\n        offset: around.top,\n        size: around.height,\n        position: anchorPosition === 0\n        /* BELOW */\n        ? 0\n        /* Before */\n        : 1\n        /* After */\n        ,\n        mode: LayoutAnchorMode.ALIGN\n      };\n      left = layout(window.innerWidth, viewSizeWidth, horizontalAnchor); // if view intersects horizontally with anchor, we must avoid the anchor\n\n      if (Range.intersects({\n        start: left,\n        end: left + viewSizeWidth\n      }, {\n        start: horizontalAnchor.offset,\n        end: horizontalAnchor.offset + horizontalAnchor.size\n      })) {\n        verticalAnchor.mode = LayoutAnchorMode.AVOID;\n      }\n\n      top = layout(window.innerHeight, viewSizeHeight, verticalAnchor) + window.pageYOffset;\n    }\n\n    this.view.classList.remove('top', 'bottom', 'left', 'right');\n    this.view.classList.add(anchorPosition === 0\n    /* BELOW */\n    ? 'bottom' : 'top');\n    this.view.classList.add(anchorAlignment === 0\n    /* LEFT */\n    ? 'left' : 'right');\n    this.view.classList.toggle('fixed', this.useFixedPosition);\n    const containerPosition = DOM.getDomNodePagePosition(this.container);\n    this.view.style.top = `${top - (this.useFixedPosition ? DOM.getDomNodePagePosition(this.view).top : containerPosition.top)}px`;\n    this.view.style.left = `${left - (this.useFixedPosition ? DOM.getDomNodePagePosition(this.view).left : containerPosition.left)}px`;\n    this.view.style.width = 'initial';\n  }\n\n  hide(data) {\n    const delegate = this.delegate;\n    this.delegate = null;\n\n    if (delegate === null || delegate === void 0 ? void 0 : delegate.onHide) {\n      delegate.onHide(data);\n    }\n\n    this.toDisposeOnClean.dispose();\n    DOM.hide(this.view);\n  }\n\n  isVisible() {\n    return !!this.delegate;\n  }\n\n  onDOMEvent(e, onCapture) {\n    if (this.delegate) {\n      if (this.delegate.onDOMEvent) {\n        this.delegate.onDOMEvent(e, document.activeElement);\n      } else if (onCapture && !DOM.isAncestor(e.target, this.container)) {\n        this.hide();\n      }\n    }\n  }\n\n  dispose() {\n    this.hide();\n    super.dispose();\n  }\n\n}\nContextView.BUBBLE_UP_EVENTS = ['click', 'keydown', 'focus', 'blur'];\nContextView.BUBBLE_DOWN_EVENTS = ['click'];\nlet SHADOW_ROOT_CSS =\n/* css */\n`\n\t:host {\n\t\tall: initial; /* 1st rule so subsequent properties are reset. */\n\t}\n\n\t@font-face {\n\t\tfont-family: \"codicon\";\n\t\tfont-display: block;\n\t\tsrc: url(\"./codicon.ttf?5d4d76ab2ce5108968ad644d591a16a6\") format(\"truetype\");\n\t}\n\n\t.codicon[class*='codicon-'] {\n\t\tfont: normal normal normal 16px/1 codicon;\n\t\tdisplay: inline-block;\n\t\ttext-decoration: none;\n\t\ttext-rendering: auto;\n\t\ttext-align: center;\n\t\t-webkit-font-smoothing: antialiased;\n\t\t-moz-osx-font-smoothing: grayscale;\n\t\tuser-select: none;\n\t\t-webkit-user-select: none;\n\t\t-ms-user-select: none;\n\t}\n\n\t:host {\n\t\tfont-family: -apple-system, BlinkMacSystemFont, \"Segoe WPC\", \"Segoe UI\", \"HelveticaNeue-Light\", system-ui, \"Ubuntu\", \"Droid Sans\", sans-serif;\n\t}\n\n\t:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }\n\t:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, \"PingFang SC\", \"Hiragino Sans GB\", sans-serif; }\n\t:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, \"PingFang TC\", sans-serif; }\n\t:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, \"Hiragino Kaku Gothic Pro\", sans-serif; }\n\t:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, \"Nanum Gothic\", \"Apple SD Gothic Neo\", \"AppleGothic\", sans-serif; }\n\n\t:host-context(.windows) { font-family: \"Segoe WPC\", \"Segoe UI\", sans-serif; }\n\t:host-context(.windows:lang(zh-Hans)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Microsoft YaHei\", sans-serif; }\n\t:host-context(.windows:lang(zh-Hant)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Microsoft Jhenghei\", sans-serif; }\n\t:host-context(.windows:lang(ja)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Yu Gothic UI\", \"Meiryo UI\", sans-serif; }\n\t:host-context(.windows:lang(ko)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Malgun Gothic\", \"Dotom\", sans-serif; }\n\n\t:host-context(.linux) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", sans-serif; }\n\t:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans SC\", \"Source Han Sans CN\", \"Source Han Sans\", sans-serif; }\n\t:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans TC\", \"Source Han Sans TW\", \"Source Han Sans\", sans-serif; }\n\t:host-context(.linux:lang(ja)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans J\", \"Source Han Sans JP\", \"Source Han Sans\", sans-serif; }\n\t:host-context(.linux:lang(ko)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans K\", \"Source Han Sans JR\", \"Source Han Sans\", \"UnDotum\", \"FBaekmuk Gulim\", sans-serif; }\n`;","map":{"version":3,"sources":["/home/joe/DISSY/flask_test_1/react-flask-app/node_modules/monaco-editor/esm/vs/base/browser/ui/contextview/contextview.js"],"names":["BrowserFeatures","DOM","Disposable","DisposableStore","toDisposable","platform","Range","LayoutAnchorMode","layout","viewportSize","viewSize","anchor","layoutAfterAnchorBoundary","mode","ALIGN","offset","size","layoutBeforeAnchorBoundary","position","Math","max","ContextView","constructor","container","domPosition","delegate","toDisposeOnClean","None","toDisposeOnSetContainer","shadowRoot","shadowRootHostElement","view","$","useFixedPosition","useShadowDOM","hide","setContainer","_register","_a","dispose","removeChild","remove","appendChild","attachShadow","style","document","createElement","textContent","SHADOW_ROOT_CSS","BUBBLE_UP_EVENTS","forEach","event","add","addStandardDisposableListener","e","onDOMEvent","BUBBLE_DOWN_EVENTS","show","isVisible","clearNode","className","top","left","zIndex","render","doLayout","focus","getViewElement","canRelayout","isIOS","pointerEvents","getAnchor","around","isHTMLElement","elementPosition","getDomNodePagePosition","width","height","y","x","viewSizeWidth","getTotalWidth","viewSizeHeight","getTotalHeight","anchorPosition","anchorAlignment","anchorAxisAlignment","verticalAnchor","window","pageYOffset","horizontalAnchor","innerHeight","intersects","start","end","AVOID","innerWidth","classList","toggle","containerPosition","data","onHide","onCapture","activeElement","isAncestor","target"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { BrowserFeatures } from '../../canIUse.js';\nimport * as DOM from '../../dom.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../common/lifecycle.js';\nimport * as platform from '../../../common/platform.js';\nimport { Range } from '../../../common/range.js';\nimport './contextview.css';\nexport var LayoutAnchorMode;\n(function (LayoutAnchorMode) {\n    LayoutAnchorMode[LayoutAnchorMode[\"AVOID\"] = 0] = \"AVOID\";\n    LayoutAnchorMode[LayoutAnchorMode[\"ALIGN\"] = 1] = \"ALIGN\";\n})(LayoutAnchorMode || (LayoutAnchorMode = {}));\n/**\n * Lays out a one dimensional view next to an anchor in a viewport.\n *\n * @returns The view offset within the viewport.\n */\nexport function layout(viewportSize, viewSize, anchor) {\n    const layoutAfterAnchorBoundary = anchor.mode === LayoutAnchorMode.ALIGN ? anchor.offset : anchor.offset + anchor.size;\n    const layoutBeforeAnchorBoundary = anchor.mode === LayoutAnchorMode.ALIGN ? anchor.offset + anchor.size : anchor.offset;\n    if (anchor.position === 0 /* Before */) {\n        if (viewSize <= viewportSize - layoutAfterAnchorBoundary) {\n            return layoutAfterAnchorBoundary; // happy case, lay it out after the anchor\n        }\n        if (viewSize <= layoutBeforeAnchorBoundary) {\n            return layoutBeforeAnchorBoundary - viewSize; // ok case, lay it out before the anchor\n        }\n        return Math.max(viewportSize - viewSize, 0); // sad case, lay it over the anchor\n    }\n    else {\n        if (viewSize <= layoutBeforeAnchorBoundary) {\n            return layoutBeforeAnchorBoundary - viewSize; // happy case, lay it out before the anchor\n        }\n        if (viewSize <= viewportSize - layoutAfterAnchorBoundary) {\n            return layoutAfterAnchorBoundary; // ok case, lay it out after the anchor\n        }\n        return 0; // sad case, lay it over the anchor\n    }\n}\nexport class ContextView extends Disposable {\n    constructor(container, domPosition) {\n        super();\n        this.container = null;\n        this.delegate = null;\n        this.toDisposeOnClean = Disposable.None;\n        this.toDisposeOnSetContainer = Disposable.None;\n        this.shadowRoot = null;\n        this.shadowRootHostElement = null;\n        this.view = DOM.$('.context-view');\n        this.useFixedPosition = false;\n        this.useShadowDOM = false;\n        DOM.hide(this.view);\n        this.setContainer(container, domPosition);\n        this._register(toDisposable(() => this.setContainer(null, 1 /* ABSOLUTE */)));\n    }\n    setContainer(container, domPosition) {\n        var _a;\n        if (this.container) {\n            this.toDisposeOnSetContainer.dispose();\n            if (this.shadowRoot) {\n                this.shadowRoot.removeChild(this.view);\n                this.shadowRoot = null;\n                (_a = this.shadowRootHostElement) === null || _a === void 0 ? void 0 : _a.remove();\n                this.shadowRootHostElement = null;\n            }\n            else {\n                this.container.removeChild(this.view);\n            }\n            this.container = null;\n        }\n        if (container) {\n            this.container = container;\n            this.useFixedPosition = domPosition !== 1 /* ABSOLUTE */;\n            this.useShadowDOM = domPosition === 3 /* FIXED_SHADOW */;\n            if (this.useShadowDOM) {\n                this.shadowRootHostElement = DOM.$('.shadow-root-host');\n                this.container.appendChild(this.shadowRootHostElement);\n                this.shadowRoot = this.shadowRootHostElement.attachShadow({ mode: 'open' });\n                const style = document.createElement('style');\n                style.textContent = SHADOW_ROOT_CSS;\n                this.shadowRoot.appendChild(style);\n                this.shadowRoot.appendChild(this.view);\n                this.shadowRoot.appendChild(DOM.$('slot'));\n            }\n            else {\n                this.container.appendChild(this.view);\n            }\n            const toDisposeOnSetContainer = new DisposableStore();\n            ContextView.BUBBLE_UP_EVENTS.forEach(event => {\n                toDisposeOnSetContainer.add(DOM.addStandardDisposableListener(this.container, event, (e) => {\n                    this.onDOMEvent(e, false);\n                }));\n            });\n            ContextView.BUBBLE_DOWN_EVENTS.forEach(event => {\n                toDisposeOnSetContainer.add(DOM.addStandardDisposableListener(this.container, event, (e) => {\n                    this.onDOMEvent(e, true);\n                }, true));\n            });\n            this.toDisposeOnSetContainer = toDisposeOnSetContainer;\n        }\n    }\n    show(delegate) {\n        if (this.isVisible()) {\n            this.hide();\n        }\n        // Show static box\n        DOM.clearNode(this.view);\n        this.view.className = 'context-view';\n        this.view.style.top = '0px';\n        this.view.style.left = '0px';\n        this.view.style.zIndex = '2500';\n        this.view.style.position = this.useFixedPosition ? 'fixed' : 'absolute';\n        DOM.show(this.view);\n        // Render content\n        this.toDisposeOnClean = delegate.render(this.view) || Disposable.None;\n        // Set active delegate\n        this.delegate = delegate;\n        // Layout\n        this.doLayout();\n        // Focus\n        if (this.delegate.focus) {\n            this.delegate.focus();\n        }\n    }\n    getViewElement() {\n        return this.view;\n    }\n    layout() {\n        if (!this.isVisible()) {\n            return;\n        }\n        if (this.delegate.canRelayout === false && !(platform.isIOS && BrowserFeatures.pointerEvents)) {\n            this.hide();\n            return;\n        }\n        if (this.delegate.layout) {\n            this.delegate.layout();\n        }\n        this.doLayout();\n    }\n    doLayout() {\n        // Check that we still have a delegate - this.delegate.layout may have hidden\n        if (!this.isVisible()) {\n            return;\n        }\n        // Get anchor\n        let anchor = this.delegate.getAnchor();\n        // Compute around\n        let around;\n        // Get the element's position and size (to anchor the view)\n        if (DOM.isHTMLElement(anchor)) {\n            let elementPosition = DOM.getDomNodePagePosition(anchor);\n            around = {\n                top: elementPosition.top,\n                left: elementPosition.left,\n                width: elementPosition.width,\n                height: elementPosition.height\n            };\n        }\n        else {\n            around = {\n                top: anchor.y,\n                left: anchor.x,\n                width: anchor.width || 1,\n                height: anchor.height || 2\n            };\n        }\n        const viewSizeWidth = DOM.getTotalWidth(this.view);\n        const viewSizeHeight = DOM.getTotalHeight(this.view);\n        const anchorPosition = this.delegate.anchorPosition || 0 /* BELOW */;\n        const anchorAlignment = this.delegate.anchorAlignment || 0 /* LEFT */;\n        const anchorAxisAlignment = this.delegate.anchorAxisAlignment || 0 /* VERTICAL */;\n        let top;\n        let left;\n        if (anchorAxisAlignment === 0 /* VERTICAL */) {\n            const verticalAnchor = { offset: around.top - window.pageYOffset, size: around.height, position: anchorPosition === 0 /* BELOW */ ? 0 /* Before */ : 1 /* After */ };\n            const horizontalAnchor = { offset: around.left, size: around.width, position: anchorAlignment === 0 /* LEFT */ ? 0 /* Before */ : 1 /* After */, mode: LayoutAnchorMode.ALIGN };\n            top = layout(window.innerHeight, viewSizeHeight, verticalAnchor) + window.pageYOffset;\n            // if view intersects vertically with anchor,  we must avoid the anchor\n            if (Range.intersects({ start: top, end: top + viewSizeHeight }, { start: verticalAnchor.offset, end: verticalAnchor.offset + verticalAnchor.size })) {\n                horizontalAnchor.mode = LayoutAnchorMode.AVOID;\n            }\n            left = layout(window.innerWidth, viewSizeWidth, horizontalAnchor);\n        }\n        else {\n            const horizontalAnchor = { offset: around.left, size: around.width, position: anchorAlignment === 0 /* LEFT */ ? 0 /* Before */ : 1 /* After */ };\n            const verticalAnchor = { offset: around.top, size: around.height, position: anchorPosition === 0 /* BELOW */ ? 0 /* Before */ : 1 /* After */, mode: LayoutAnchorMode.ALIGN };\n            left = layout(window.innerWidth, viewSizeWidth, horizontalAnchor);\n            // if view intersects horizontally with anchor, we must avoid the anchor\n            if (Range.intersects({ start: left, end: left + viewSizeWidth }, { start: horizontalAnchor.offset, end: horizontalAnchor.offset + horizontalAnchor.size })) {\n                verticalAnchor.mode = LayoutAnchorMode.AVOID;\n            }\n            top = layout(window.innerHeight, viewSizeHeight, verticalAnchor) + window.pageYOffset;\n        }\n        this.view.classList.remove('top', 'bottom', 'left', 'right');\n        this.view.classList.add(anchorPosition === 0 /* BELOW */ ? 'bottom' : 'top');\n        this.view.classList.add(anchorAlignment === 0 /* LEFT */ ? 'left' : 'right');\n        this.view.classList.toggle('fixed', this.useFixedPosition);\n        const containerPosition = DOM.getDomNodePagePosition(this.container);\n        this.view.style.top = `${top - (this.useFixedPosition ? DOM.getDomNodePagePosition(this.view).top : containerPosition.top)}px`;\n        this.view.style.left = `${left - (this.useFixedPosition ? DOM.getDomNodePagePosition(this.view).left : containerPosition.left)}px`;\n        this.view.style.width = 'initial';\n    }\n    hide(data) {\n        const delegate = this.delegate;\n        this.delegate = null;\n        if (delegate === null || delegate === void 0 ? void 0 : delegate.onHide) {\n            delegate.onHide(data);\n        }\n        this.toDisposeOnClean.dispose();\n        DOM.hide(this.view);\n    }\n    isVisible() {\n        return !!this.delegate;\n    }\n    onDOMEvent(e, onCapture) {\n        if (this.delegate) {\n            if (this.delegate.onDOMEvent) {\n                this.delegate.onDOMEvent(e, document.activeElement);\n            }\n            else if (onCapture && !DOM.isAncestor(e.target, this.container)) {\n                this.hide();\n            }\n        }\n    }\n    dispose() {\n        this.hide();\n        super.dispose();\n    }\n}\nContextView.BUBBLE_UP_EVENTS = ['click', 'keydown', 'focus', 'blur'];\nContextView.BUBBLE_DOWN_EVENTS = ['click'];\nlet SHADOW_ROOT_CSS = /* css */ `\n\t:host {\n\t\tall: initial; /* 1st rule so subsequent properties are reset. */\n\t}\n\n\t@font-face {\n\t\tfont-family: \"codicon\";\n\t\tfont-display: block;\n\t\tsrc: url(\"./codicon.ttf?5d4d76ab2ce5108968ad644d591a16a6\") format(\"truetype\");\n\t}\n\n\t.codicon[class*='codicon-'] {\n\t\tfont: normal normal normal 16px/1 codicon;\n\t\tdisplay: inline-block;\n\t\ttext-decoration: none;\n\t\ttext-rendering: auto;\n\t\ttext-align: center;\n\t\t-webkit-font-smoothing: antialiased;\n\t\t-moz-osx-font-smoothing: grayscale;\n\t\tuser-select: none;\n\t\t-webkit-user-select: none;\n\t\t-ms-user-select: none;\n\t}\n\n\t:host {\n\t\tfont-family: -apple-system, BlinkMacSystemFont, \"Segoe WPC\", \"Segoe UI\", \"HelveticaNeue-Light\", system-ui, \"Ubuntu\", \"Droid Sans\", sans-serif;\n\t}\n\n\t:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }\n\t:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, \"PingFang SC\", \"Hiragino Sans GB\", sans-serif; }\n\t:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, \"PingFang TC\", sans-serif; }\n\t:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, \"Hiragino Kaku Gothic Pro\", sans-serif; }\n\t:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, \"Nanum Gothic\", \"Apple SD Gothic Neo\", \"AppleGothic\", sans-serif; }\n\n\t:host-context(.windows) { font-family: \"Segoe WPC\", \"Segoe UI\", sans-serif; }\n\t:host-context(.windows:lang(zh-Hans)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Microsoft YaHei\", sans-serif; }\n\t:host-context(.windows:lang(zh-Hant)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Microsoft Jhenghei\", sans-serif; }\n\t:host-context(.windows:lang(ja)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Yu Gothic UI\", \"Meiryo UI\", sans-serif; }\n\t:host-context(.windows:lang(ko)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Malgun Gothic\", \"Dotom\", sans-serif; }\n\n\t:host-context(.linux) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", sans-serif; }\n\t:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans SC\", \"Source Han Sans CN\", \"Source Han Sans\", sans-serif; }\n\t:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans TC\", \"Source Han Sans TW\", \"Source Han Sans\", sans-serif; }\n\t:host-context(.linux:lang(ja)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans J\", \"Source Han Sans JP\", \"Source Han Sans\", sans-serif; }\n\t:host-context(.linux:lang(ko)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans K\", \"Source Han Sans JR\", \"Source Han Sans\", \"UnDotum\", \"FBaekmuk Gulim\", sans-serif; }\n`;\n"]},"metadata":{},"sourceType":"module"}