{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IMarkerNavigationService } from './markerNavigationService.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { MarkerNavigationWidget } from './gotoErrorWidget.js';\nlet MarkerController = class MarkerController {\n  constructor(editor, _markerNavigationService, _contextKeyService, _editorService, _instantiationService) {\n    this._markerNavigationService = _markerNavigationService;\n    this._contextKeyService = _contextKeyService;\n    this._editorService = _editorService;\n    this._instantiationService = _instantiationService;\n    this._sessionDispoables = new DisposableStore();\n    this._editor = editor;\n    this._widgetVisible = CONTEXT_MARKERS_NAVIGATION_VISIBLE.bindTo(this._contextKeyService);\n  }\n\n  static get(editor) {\n    return editor.getContribution(MarkerController.ID);\n  }\n\n  dispose() {\n    this._cleanUp();\n\n    this._sessionDispoables.dispose();\n  }\n\n  _cleanUp() {\n    this._widgetVisible.reset();\n\n    this._sessionDispoables.clear();\n\n    this._widget = undefined;\n    this._model = undefined;\n  }\n\n  _getOrCreateModel(uri) {\n    if (this._model && this._model.matches(uri)) {\n      return this._model;\n    }\n\n    let reusePosition = false;\n\n    if (this._model) {\n      reusePosition = true;\n\n      this._cleanUp();\n    }\n\n    this._model = this._markerNavigationService.getMarkerList(uri);\n\n    if (reusePosition) {\n      this._model.move(true, this._editor.getModel(), this._editor.getPosition());\n    }\n\n    this._widget = this._instantiationService.createInstance(MarkerNavigationWidget, this._editor);\n\n    this._widget.onDidClose(() => this.close(), this, this._sessionDispoables);\n\n    this._widgetVisible.set(true);\n\n    this._sessionDispoables.add(this._model);\n\n    this._sessionDispoables.add(this._widget); // follow cursor\n\n\n    this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(e => {\n      var _a, _b, _c;\n\n      if (!((_a = this._model) === null || _a === void 0 ? void 0 : _a.selected) || !Range.containsPosition((_b = this._model) === null || _b === void 0 ? void 0 : _b.selected.marker, e.position)) {\n        (_c = this._model) === null || _c === void 0 ? void 0 : _c.resetIndex();\n      }\n    })); // update markers\n\n\n    this._sessionDispoables.add(this._model.onDidChange(() => {\n      if (!this._widget || !this._widget.position || !this._model) {\n        return;\n      }\n\n      const info = this._model.find(this._editor.getModel().uri, this._widget.position);\n\n      if (info) {\n        this._widget.updateMarker(info.marker);\n      } else {\n        this._widget.showStale();\n      }\n    })); // open related\n\n\n    this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(related => {\n      this._editorService.openCodeEditor({\n        resource: related.resource,\n        options: {\n          pinned: true,\n          revealIfOpened: true,\n          selection: Range.lift(related).collapseToStart()\n        }\n      }, this._editor);\n\n      this.close(false);\n    }));\n\n    this._sessionDispoables.add(this._editor.onDidChangeModel(() => this._cleanUp()));\n\n    return this._model;\n  }\n\n  close(focusEditor = true) {\n    this._cleanUp();\n\n    if (focusEditor) {\n      this._editor.focus();\n    }\n  }\n\n  showAtMarker(marker) {\n    if (this._editor.hasModel()) {\n      const model = this._getOrCreateModel(this._editor.getModel().uri);\n\n      model.resetIndex();\n      model.move(true, this._editor.getModel(), new Position(marker.startLineNumber, marker.startColumn));\n\n      if (model.selected) {\n        this._widget.showAtMarker(model.selected.marker, model.selected.index, model.selected.total);\n      }\n    }\n  }\n\n  nagivate(next, multiFile) {\n    var _a, _b;\n\n    return __awaiter(this, void 0, void 0, function* () {\n      if (this._editor.hasModel()) {\n        const model = this._getOrCreateModel(multiFile ? undefined : this._editor.getModel().uri);\n\n        model.move(next, this._editor.getModel(), this._editor.getPosition());\n\n        if (!model.selected) {\n          return;\n        }\n\n        if (model.selected.marker.resource.toString() !== this._editor.getModel().uri.toString()) {\n          // show in different editor\n          this._cleanUp();\n\n          const otherEditor = yield this._editorService.openCodeEditor({\n            resource: model.selected.marker.resource,\n            options: {\n              pinned: false,\n              revealIfOpened: true,\n              selectionRevealType: 2\n              /* NearTop */\n              ,\n              selection: model.selected.marker\n            }\n          }, this._editor);\n\n          if (otherEditor) {\n            (_a = MarkerController.get(otherEditor)) === null || _a === void 0 ? void 0 : _a.close();\n            (_b = MarkerController.get(otherEditor)) === null || _b === void 0 ? void 0 : _b.nagivate(next, multiFile);\n          }\n        } else {\n          // show in this editor\n          this._widget.showAtMarker(model.selected.marker, model.selected.index, model.selected.total);\n        }\n      }\n    });\n  }\n\n};\nMarkerController.ID = 'editor.contrib.markerController';\nMarkerController = __decorate([__param(1, IMarkerNavigationService), __param(2, IContextKeyService), __param(3, ICodeEditorService), __param(4, IInstantiationService)], MarkerController);\nexport { MarkerController };\n\nclass MarkerNavigationAction extends EditorAction {\n  constructor(_next, _multiFile, opts) {\n    super(opts);\n    this._next = _next;\n    this._multiFile = _multiFile;\n  }\n\n  run(_accessor, editor) {\n    var _a;\n\n    return __awaiter(this, void 0, void 0, function* () {\n      if (editor.hasModel()) {\n        (_a = MarkerController.get(editor)) === null || _a === void 0 ? void 0 : _a.nagivate(this._next, this._multiFile);\n      }\n    });\n  }\n\n}\n\nexport class NextMarkerAction extends MarkerNavigationAction {\n  constructor() {\n    super(true, false, {\n      id: NextMarkerAction.ID,\n      label: NextMarkerAction.LABEL,\n      alias: 'Go to Next Problem (Error, Warning, Info)',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.focus,\n        primary: 512\n        /* Alt */\n        | 66\n        /* F8 */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      },\n      menuOpts: {\n        menuId: MarkerNavigationWidget.TitleMenu,\n        title: NextMarkerAction.LABEL,\n        icon: registerIcon('marker-navigation-next', Codicon.arrowDown, nls.localize('nextMarkerIcon', 'Icon for goto next marker.')),\n        group: 'navigation',\n        order: 1\n      }\n    });\n  }\n\n}\nNextMarkerAction.ID = 'editor.action.marker.next';\nNextMarkerAction.LABEL = nls.localize('markerAction.next.label', \"Go to Next Problem (Error, Warning, Info)\");\n\nclass PrevMarkerAction extends MarkerNavigationAction {\n  constructor() {\n    super(false, false, {\n      id: PrevMarkerAction.ID,\n      label: PrevMarkerAction.LABEL,\n      alias: 'Go to Previous Problem (Error, Warning, Info)',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.focus,\n        primary: 1024\n        /* Shift */\n        | 512\n        /* Alt */\n        | 66\n        /* F8 */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      },\n      menuOpts: {\n        menuId: MarkerNavigationWidget.TitleMenu,\n        title: NextMarkerAction.LABEL,\n        icon: registerIcon('marker-navigation-previous', Codicon.arrowUp, nls.localize('previousMarkerIcon', 'Icon for goto previous marker.')),\n        group: 'navigation',\n        order: 2\n      }\n    });\n  }\n\n}\n\nPrevMarkerAction.ID = 'editor.action.marker.prev';\nPrevMarkerAction.LABEL = nls.localize('markerAction.previous.label', \"Go to Previous Problem (Error, Warning, Info)\");\n\nclass NextMarkerInFilesAction extends MarkerNavigationAction {\n  constructor() {\n    super(true, true, {\n      id: 'editor.action.marker.nextInFiles',\n      label: nls.localize('markerAction.nextInFiles.label', \"Go to Next Problem in Files (Error, Warning, Info)\"),\n      alias: 'Go to Next Problem in Files (Error, Warning, Info)',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.focus,\n        primary: 66\n        /* F8 */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      },\n      menuOpts: {\n        menuId: MenuId.MenubarGoMenu,\n        title: nls.localize({\n          key: 'miGotoNextProblem',\n          comment: ['&& denotes a mnemonic']\n        }, \"Next &&Problem\"),\n        group: '6_problem_nav',\n        order: 1\n      }\n    });\n  }\n\n}\n\nclass PrevMarkerInFilesAction extends MarkerNavigationAction {\n  constructor() {\n    super(false, true, {\n      id: 'editor.action.marker.prevInFiles',\n      label: nls.localize('markerAction.previousInFiles.label', \"Go to Previous Problem in Files (Error, Warning, Info)\"),\n      alias: 'Go to Previous Problem in Files (Error, Warning, Info)',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.focus,\n        primary: 1024\n        /* Shift */\n        | 66\n        /* F8 */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      },\n      menuOpts: {\n        menuId: MenuId.MenubarGoMenu,\n        title: nls.localize({\n          key: 'miGotoPreviousProblem',\n          comment: ['&& denotes a mnemonic']\n        }, \"Previous &&Problem\"),\n        group: '6_problem_nav',\n        order: 2\n      }\n    });\n  }\n\n}\n\nregisterEditorContribution(MarkerController.ID, MarkerController);\nregisterEditorAction(NextMarkerAction);\nregisterEditorAction(PrevMarkerAction);\nregisterEditorAction(NextMarkerInFilesAction);\nregisterEditorAction(PrevMarkerInFilesAction);\nconst CONTEXT_MARKERS_NAVIGATION_VISIBLE = new RawContextKey('markersNavigationVisible', false);\nconst MarkerCommand = EditorCommand.bindToContribution(MarkerController.get);\nregisterEditorCommand(new MarkerCommand({\n  id: 'closeMarkersNavigation',\n  precondition: CONTEXT_MARKERS_NAVIGATION_VISIBLE,\n  handler: x => x.close(),\n  kbOpts: {\n    weight: 100\n    /* EditorContrib */\n    + 50,\n    kbExpr: EditorContextKeys.focus,\n    primary: 9\n    /* Escape */\n    ,\n    secondary: [1024\n    /* Shift */\n    | 9\n    /* Escape */\n    ]\n  }\n}));","map":{"version":3,"sources":["/home/joe/DISSY/flask_test_1/react-flask-app/node_modules/monaco-editor/esm/vs/editor/contrib/gotoError/browser/gotoError.js"],"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","Codicon","DisposableStore","EditorAction","EditorCommand","registerEditorAction","registerEditorCommand","registerEditorContribution","ICodeEditorService","Position","Range","EditorContextKeys","IMarkerNavigationService","nls","MenuId","IContextKeyService","RawContextKey","IInstantiationService","registerIcon","MarkerNavigationWidget","MarkerController","constructor","editor","_markerNavigationService","_contextKeyService","_editorService","_instantiationService","_sessionDispoables","_editor","_widgetVisible","CONTEXT_MARKERS_NAVIGATION_VISIBLE","bindTo","get","getContribution","ID","dispose","_cleanUp","reset","clear","_widget","undefined","_model","_getOrCreateModel","uri","matches","reusePosition","getMarkerList","move","getModel","getPosition","createInstance","onDidClose","close","set","add","onDidChangeCursorPosition","_a","_b","_c","selected","containsPosition","marker","position","resetIndex","onDidChange","info","find","updateMarker","showStale","onDidSelectRelatedInformation","related","openCodeEditor","resource","options","pinned","revealIfOpened","selection","lift","collapseToStart","onDidChangeModel","focusEditor","focus","showAtMarker","hasModel","model","startLineNumber","startColumn","index","total","nagivate","multiFile","toString","otherEditor","selectionRevealType","MarkerNavigationAction","_next","_multiFile","opts","run","_accessor","NextMarkerAction","id","label","LABEL","alias","precondition","kbOpts","kbExpr","primary","weight","menuOpts","menuId","TitleMenu","title","icon","arrowDown","localize","group","order","PrevMarkerAction","arrowUp","NextMarkerInFilesAction","MenubarGoMenu","comment","PrevMarkerInFilesAction","MarkerCommand","bindToContribution","handler","x","secondary"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IMarkerNavigationService } from './markerNavigationService.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { MarkerNavigationWidget } from './gotoErrorWidget.js';\nlet MarkerController = class MarkerController {\n    constructor(editor, _markerNavigationService, _contextKeyService, _editorService, _instantiationService) {\n        this._markerNavigationService = _markerNavigationService;\n        this._contextKeyService = _contextKeyService;\n        this._editorService = _editorService;\n        this._instantiationService = _instantiationService;\n        this._sessionDispoables = new DisposableStore();\n        this._editor = editor;\n        this._widgetVisible = CONTEXT_MARKERS_NAVIGATION_VISIBLE.bindTo(this._contextKeyService);\n    }\n    static get(editor) {\n        return editor.getContribution(MarkerController.ID);\n    }\n    dispose() {\n        this._cleanUp();\n        this._sessionDispoables.dispose();\n    }\n    _cleanUp() {\n        this._widgetVisible.reset();\n        this._sessionDispoables.clear();\n        this._widget = undefined;\n        this._model = undefined;\n    }\n    _getOrCreateModel(uri) {\n        if (this._model && this._model.matches(uri)) {\n            return this._model;\n        }\n        let reusePosition = false;\n        if (this._model) {\n            reusePosition = true;\n            this._cleanUp();\n        }\n        this._model = this._markerNavigationService.getMarkerList(uri);\n        if (reusePosition) {\n            this._model.move(true, this._editor.getModel(), this._editor.getPosition());\n        }\n        this._widget = this._instantiationService.createInstance(MarkerNavigationWidget, this._editor);\n        this._widget.onDidClose(() => this.close(), this, this._sessionDispoables);\n        this._widgetVisible.set(true);\n        this._sessionDispoables.add(this._model);\n        this._sessionDispoables.add(this._widget);\n        // follow cursor\n        this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(e => {\n            var _a, _b, _c;\n            if (!((_a = this._model) === null || _a === void 0 ? void 0 : _a.selected) || !Range.containsPosition((_b = this._model) === null || _b === void 0 ? void 0 : _b.selected.marker, e.position)) {\n                (_c = this._model) === null || _c === void 0 ? void 0 : _c.resetIndex();\n            }\n        }));\n        // update markers\n        this._sessionDispoables.add(this._model.onDidChange(() => {\n            if (!this._widget || !this._widget.position || !this._model) {\n                return;\n            }\n            const info = this._model.find(this._editor.getModel().uri, this._widget.position);\n            if (info) {\n                this._widget.updateMarker(info.marker);\n            }\n            else {\n                this._widget.showStale();\n            }\n        }));\n        // open related\n        this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(related => {\n            this._editorService.openCodeEditor({\n                resource: related.resource,\n                options: { pinned: true, revealIfOpened: true, selection: Range.lift(related).collapseToStart() }\n            }, this._editor);\n            this.close(false);\n        }));\n        this._sessionDispoables.add(this._editor.onDidChangeModel(() => this._cleanUp()));\n        return this._model;\n    }\n    close(focusEditor = true) {\n        this._cleanUp();\n        if (focusEditor) {\n            this._editor.focus();\n        }\n    }\n    showAtMarker(marker) {\n        if (this._editor.hasModel()) {\n            const model = this._getOrCreateModel(this._editor.getModel().uri);\n            model.resetIndex();\n            model.move(true, this._editor.getModel(), new Position(marker.startLineNumber, marker.startColumn));\n            if (model.selected) {\n                this._widget.showAtMarker(model.selected.marker, model.selected.index, model.selected.total);\n            }\n        }\n    }\n    nagivate(next, multiFile) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._editor.hasModel()) {\n                const model = this._getOrCreateModel(multiFile ? undefined : this._editor.getModel().uri);\n                model.move(next, this._editor.getModel(), this._editor.getPosition());\n                if (!model.selected) {\n                    return;\n                }\n                if (model.selected.marker.resource.toString() !== this._editor.getModel().uri.toString()) {\n                    // show in different editor\n                    this._cleanUp();\n                    const otherEditor = yield this._editorService.openCodeEditor({\n                        resource: model.selected.marker.resource,\n                        options: { pinned: false, revealIfOpened: true, selectionRevealType: 2 /* NearTop */, selection: model.selected.marker }\n                    }, this._editor);\n                    if (otherEditor) {\n                        (_a = MarkerController.get(otherEditor)) === null || _a === void 0 ? void 0 : _a.close();\n                        (_b = MarkerController.get(otherEditor)) === null || _b === void 0 ? void 0 : _b.nagivate(next, multiFile);\n                    }\n                }\n                else {\n                    // show in this editor\n                    this._widget.showAtMarker(model.selected.marker, model.selected.index, model.selected.total);\n                }\n            }\n        });\n    }\n};\nMarkerController.ID = 'editor.contrib.markerController';\nMarkerController = __decorate([\n    __param(1, IMarkerNavigationService),\n    __param(2, IContextKeyService),\n    __param(3, ICodeEditorService),\n    __param(4, IInstantiationService)\n], MarkerController);\nexport { MarkerController };\nclass MarkerNavigationAction extends EditorAction {\n    constructor(_next, _multiFile, opts) {\n        super(opts);\n        this._next = _next;\n        this._multiFile = _multiFile;\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (editor.hasModel()) {\n                (_a = MarkerController.get(editor)) === null || _a === void 0 ? void 0 : _a.nagivate(this._next, this._multiFile);\n            }\n        });\n    }\n}\nexport class NextMarkerAction extends MarkerNavigationAction {\n    constructor() {\n        super(true, false, {\n            id: NextMarkerAction.ID,\n            label: NextMarkerAction.LABEL,\n            alias: 'Go to Next Problem (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 512 /* Alt */ | 66 /* F8 */,\n                weight: 100 /* EditorContrib */\n            },\n            menuOpts: {\n                menuId: MarkerNavigationWidget.TitleMenu,\n                title: NextMarkerAction.LABEL,\n                icon: registerIcon('marker-navigation-next', Codicon.arrowDown, nls.localize('nextMarkerIcon', 'Icon for goto next marker.')),\n                group: 'navigation',\n                order: 1\n            }\n        });\n    }\n}\nNextMarkerAction.ID = 'editor.action.marker.next';\nNextMarkerAction.LABEL = nls.localize('markerAction.next.label', \"Go to Next Problem (Error, Warning, Info)\");\nclass PrevMarkerAction extends MarkerNavigationAction {\n    constructor() {\n        super(false, false, {\n            id: PrevMarkerAction.ID,\n            label: PrevMarkerAction.LABEL,\n            alias: 'Go to Previous Problem (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 1024 /* Shift */ | 512 /* Alt */ | 66 /* F8 */,\n                weight: 100 /* EditorContrib */\n            },\n            menuOpts: {\n                menuId: MarkerNavigationWidget.TitleMenu,\n                title: NextMarkerAction.LABEL,\n                icon: registerIcon('marker-navigation-previous', Codicon.arrowUp, nls.localize('previousMarkerIcon', 'Icon for goto previous marker.')),\n                group: 'navigation',\n                order: 2\n            }\n        });\n    }\n}\nPrevMarkerAction.ID = 'editor.action.marker.prev';\nPrevMarkerAction.LABEL = nls.localize('markerAction.previous.label', \"Go to Previous Problem (Error, Warning, Info)\");\nclass NextMarkerInFilesAction extends MarkerNavigationAction {\n    constructor() {\n        super(true, true, {\n            id: 'editor.action.marker.nextInFiles',\n            label: nls.localize('markerAction.nextInFiles.label', \"Go to Next Problem in Files (Error, Warning, Info)\"),\n            alias: 'Go to Next Problem in Files (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 66 /* F8 */,\n                weight: 100 /* EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarGoMenu,\n                title: nls.localize({ key: 'miGotoNextProblem', comment: ['&& denotes a mnemonic'] }, \"Next &&Problem\"),\n                group: '6_problem_nav',\n                order: 1\n            }\n        });\n    }\n}\nclass PrevMarkerInFilesAction extends MarkerNavigationAction {\n    constructor() {\n        super(false, true, {\n            id: 'editor.action.marker.prevInFiles',\n            label: nls.localize('markerAction.previousInFiles.label', \"Go to Previous Problem in Files (Error, Warning, Info)\"),\n            alias: 'Go to Previous Problem in Files (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 1024 /* Shift */ | 66 /* F8 */,\n                weight: 100 /* EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarGoMenu,\n                title: nls.localize({ key: 'miGotoPreviousProblem', comment: ['&& denotes a mnemonic'] }, \"Previous &&Problem\"),\n                group: '6_problem_nav',\n                order: 2\n            }\n        });\n    }\n}\nregisterEditorContribution(MarkerController.ID, MarkerController);\nregisterEditorAction(NextMarkerAction);\nregisterEditorAction(PrevMarkerAction);\nregisterEditorAction(NextMarkerInFilesAction);\nregisterEditorAction(PrevMarkerInFilesAction);\nconst CONTEXT_MARKERS_NAVIGATION_VISIBLE = new RawContextKey('markersNavigationVisible', false);\nconst MarkerCommand = EditorCommand.bindToContribution(MarkerController.get);\nregisterEditorCommand(new MarkerCommand({\n    id: 'closeMarkersNavigation',\n    precondition: CONTEXT_MARKERS_NAVIGATION_VISIBLE,\n    handler: x => x.close(),\n    kbOpts: {\n        weight: 100 /* EditorContrib */ + 50,\n        kbExpr: EditorContextKeys.focus,\n        primary: 9 /* Escape */,\n        secondary: [1024 /* Shift */ | 9 /* Escape */]\n    }\n}));\n"]},"metadata":{},"sourceType":"module"}