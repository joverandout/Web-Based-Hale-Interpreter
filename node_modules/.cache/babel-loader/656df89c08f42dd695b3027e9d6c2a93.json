{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { applyFontInfo } from './domFontInfo.js';\nexport class CharWidthRequest {\n  constructor(chr, type) {\n    this.chr = chr;\n    this.type = type;\n    this.width = 0;\n  }\n\n  fulfill(width) {\n    this.width = width;\n  }\n\n}\n\nclass DomCharWidthReader {\n  constructor(bareFontInfo, requests) {\n    this._bareFontInfo = bareFontInfo;\n    this._requests = requests;\n    this._container = null;\n    this._testElements = null;\n  }\n\n  read() {\n    // Create a test container with all these test elements\n    this._createDomElements(); // Add the container to the DOM\n\n\n    document.body.appendChild(this._container); // Read character widths\n\n    this._readFromDomElements(); // Remove the container from the DOM\n\n\n    document.body.removeChild(this._container);\n    this._container = null;\n    this._testElements = null;\n  }\n\n  _createDomElements() {\n    const container = document.createElement('div');\n    container.style.position = 'absolute';\n    container.style.top = '-50000px';\n    container.style.width = '50000px';\n    const regularDomNode = document.createElement('div');\n    applyFontInfo(regularDomNode, this._bareFontInfo);\n    container.appendChild(regularDomNode);\n    const boldDomNode = document.createElement('div');\n    applyFontInfo(boldDomNode, this._bareFontInfo);\n    boldDomNode.style.fontWeight = 'bold';\n    container.appendChild(boldDomNode);\n    const italicDomNode = document.createElement('div');\n    applyFontInfo(italicDomNode, this._bareFontInfo);\n    italicDomNode.style.fontStyle = 'italic';\n    container.appendChild(italicDomNode);\n    const testElements = [];\n\n    for (const request of this._requests) {\n      let parent;\n\n      if (request.type === 0\n      /* Regular */\n      ) {\n        parent = regularDomNode;\n      }\n\n      if (request.type === 2\n      /* Bold */\n      ) {\n        parent = boldDomNode;\n      }\n\n      if (request.type === 1\n      /* Italic */\n      ) {\n        parent = italicDomNode;\n      }\n\n      parent.appendChild(document.createElement('br'));\n      const testElement = document.createElement('span');\n\n      DomCharWidthReader._render(testElement, request);\n\n      parent.appendChild(testElement);\n      testElements.push(testElement);\n    }\n\n    this._container = container;\n    this._testElements = testElements;\n  }\n\n  static _render(testElement, request) {\n    if (request.chr === ' ') {\n      let htmlString = '\\u00a0'; // Repeat character 256 (2^8) times\n\n      for (let i = 0; i < 8; i++) {\n        htmlString += htmlString;\n      }\n\n      testElement.innerText = htmlString;\n    } else {\n      let testString = request.chr; // Repeat character 256 (2^8) times\n\n      for (let i = 0; i < 8; i++) {\n        testString += testString;\n      }\n\n      testElement.textContent = testString;\n    }\n  }\n\n  _readFromDomElements() {\n    for (let i = 0, len = this._requests.length; i < len; i++) {\n      const request = this._requests[i];\n      const testElement = this._testElements[i];\n      request.fulfill(testElement.offsetWidth / 256);\n    }\n  }\n\n}\n\nexport function readCharWidths(bareFontInfo, requests) {\n  const reader = new DomCharWidthReader(bareFontInfo, requests);\n  reader.read();\n}","map":{"version":3,"sources":["/home/joe/DISSY/flask_test_1/react-flask-app/node_modules/monaco-editor/esm/vs/editor/browser/config/charWidthReader.js"],"names":["applyFontInfo","CharWidthRequest","constructor","chr","type","width","fulfill","DomCharWidthReader","bareFontInfo","requests","_bareFontInfo","_requests","_container","_testElements","read","_createDomElements","document","body","appendChild","_readFromDomElements","removeChild","container","createElement","style","position","top","regularDomNode","boldDomNode","fontWeight","italicDomNode","fontStyle","testElements","request","parent","testElement","_render","push","htmlString","i","innerText","testString","textContent","len","length","offsetWidth","readCharWidths","reader"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { applyFontInfo } from './domFontInfo.js';\nexport class CharWidthRequest {\n    constructor(chr, type) {\n        this.chr = chr;\n        this.type = type;\n        this.width = 0;\n    }\n    fulfill(width) {\n        this.width = width;\n    }\n}\nclass DomCharWidthReader {\n    constructor(bareFontInfo, requests) {\n        this._bareFontInfo = bareFontInfo;\n        this._requests = requests;\n        this._container = null;\n        this._testElements = null;\n    }\n    read() {\n        // Create a test container with all these test elements\n        this._createDomElements();\n        // Add the container to the DOM\n        document.body.appendChild(this._container);\n        // Read character widths\n        this._readFromDomElements();\n        // Remove the container from the DOM\n        document.body.removeChild(this._container);\n        this._container = null;\n        this._testElements = null;\n    }\n    _createDomElements() {\n        const container = document.createElement('div');\n        container.style.position = 'absolute';\n        container.style.top = '-50000px';\n        container.style.width = '50000px';\n        const regularDomNode = document.createElement('div');\n        applyFontInfo(regularDomNode, this._bareFontInfo);\n        container.appendChild(regularDomNode);\n        const boldDomNode = document.createElement('div');\n        applyFontInfo(boldDomNode, this._bareFontInfo);\n        boldDomNode.style.fontWeight = 'bold';\n        container.appendChild(boldDomNode);\n        const italicDomNode = document.createElement('div');\n        applyFontInfo(italicDomNode, this._bareFontInfo);\n        italicDomNode.style.fontStyle = 'italic';\n        container.appendChild(italicDomNode);\n        const testElements = [];\n        for (const request of this._requests) {\n            let parent;\n            if (request.type === 0 /* Regular */) {\n                parent = regularDomNode;\n            }\n            if (request.type === 2 /* Bold */) {\n                parent = boldDomNode;\n            }\n            if (request.type === 1 /* Italic */) {\n                parent = italicDomNode;\n            }\n            parent.appendChild(document.createElement('br'));\n            const testElement = document.createElement('span');\n            DomCharWidthReader._render(testElement, request);\n            parent.appendChild(testElement);\n            testElements.push(testElement);\n        }\n        this._container = container;\n        this._testElements = testElements;\n    }\n    static _render(testElement, request) {\n        if (request.chr === ' ') {\n            let htmlString = '\\u00a0';\n            // Repeat character 256 (2^8) times\n            for (let i = 0; i < 8; i++) {\n                htmlString += htmlString;\n            }\n            testElement.innerText = htmlString;\n        }\n        else {\n            let testString = request.chr;\n            // Repeat character 256 (2^8) times\n            for (let i = 0; i < 8; i++) {\n                testString += testString;\n            }\n            testElement.textContent = testString;\n        }\n    }\n    _readFromDomElements() {\n        for (let i = 0, len = this._requests.length; i < len; i++) {\n            const request = this._requests[i];\n            const testElement = this._testElements[i];\n            request.fulfill(testElement.offsetWidth / 256);\n        }\n    }\n}\nexport function readCharWidths(bareFontInfo, requests) {\n    const reader = new DomCharWidthReader(bareFontInfo, requests);\n    reader.read();\n}\n"]},"metadata":{},"sourceType":"module"}