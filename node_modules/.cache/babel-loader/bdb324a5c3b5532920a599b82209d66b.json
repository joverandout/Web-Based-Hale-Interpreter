{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageService } from '../../../common/services/language.js';\nimport { GotoDefinitionAtPositionEditorContribution } from '../../gotoSymbol/browser/link/goToDefinitionAtPosition.js';\nimport { ContentHoverWidget, ContentHoverController } from './contentHover.js';\nimport { MarginHoverWidget } from './marginHover.js';\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { editorHoverBackground, editorHoverBorder, editorHoverForeground, editorHoverHighlight, editorHoverStatusBarBackground, textCodeBlockBackground, textLinkActiveForeground, textLinkForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nlet ModesHoverController = class ModesHoverController {\n  constructor(_editor, _instantiationService, _openerService, _languageService, _contextKeyService) {\n    this._editor = _editor;\n    this._instantiationService = _instantiationService;\n    this._openerService = _openerService;\n    this._languageService = _languageService;\n    this._toUnhook = new DisposableStore();\n    this._isMouseDown = false;\n    this._hoverClicked = false;\n    this._contentWidget = null;\n    this._glyphWidget = null;\n\n    this._hookEvents();\n\n    this._didChangeConfigurationHandler = this._editor.onDidChangeConfiguration(e => {\n      if (e.hasChanged(53\n      /* hover */\n      )) {\n        this._unhookEvents();\n\n        this._hookEvents();\n      }\n    });\n  }\n\n  static get(editor) {\n    return editor.getContribution(ModesHoverController.ID);\n  }\n\n  _hookEvents() {\n    const hideWidgetsEventHandler = () => this._hideWidgets();\n\n    const hoverOpts = this._editor.getOption(53\n    /* hover */\n    );\n\n    this._isHoverEnabled = hoverOpts.enabled;\n    this._isHoverSticky = hoverOpts.sticky;\n\n    if (this._isHoverEnabled) {\n      this._toUnhook.add(this._editor.onMouseDown(e => this._onEditorMouseDown(e)));\n\n      this._toUnhook.add(this._editor.onMouseUp(e => this._onEditorMouseUp(e)));\n\n      this._toUnhook.add(this._editor.onMouseMove(e => this._onEditorMouseMove(e)));\n\n      this._toUnhook.add(this._editor.onKeyDown(e => this._onKeyDown(e)));\n    } else {\n      this._toUnhook.add(this._editor.onMouseMove(e => this._onEditorMouseMove(e)));\n\n      this._toUnhook.add(this._editor.onKeyDown(e => this._onKeyDown(e)));\n    }\n\n    this._toUnhook.add(this._editor.onMouseLeave(hideWidgetsEventHandler));\n\n    this._toUnhook.add(this._editor.onDidChangeModel(hideWidgetsEventHandler));\n\n    this._toUnhook.add(this._editor.onDidScrollChange(e => this._onEditorScrollChanged(e)));\n  }\n\n  _unhookEvents() {\n    this._toUnhook.clear();\n  }\n\n  _onEditorScrollChanged(e) {\n    if (e.scrollTopChanged || e.scrollLeftChanged) {\n      this._hideWidgets();\n    }\n  }\n\n  _onEditorMouseDown(mouseEvent) {\n    this._isMouseDown = true;\n    const target = mouseEvent.target;\n\n    if (target.type === 9\n    /* CONTENT_WIDGET */\n    && target.detail === ContentHoverWidget.ID) {\n      this._hoverClicked = true; // mouse down on top of content hover widget\n\n      return;\n    }\n\n    if (target.type === 12\n    /* OVERLAY_WIDGET */\n    && target.detail === MarginHoverWidget.ID) {\n      // mouse down on top of overlay hover widget\n      return;\n    }\n\n    if (target.type !== 12\n    /* OVERLAY_WIDGET */\n    ) {\n      this._hoverClicked = false;\n    }\n\n    this._hideWidgets();\n  }\n\n  _onEditorMouseUp(mouseEvent) {\n    this._isMouseDown = false;\n  }\n\n  _onEditorMouseMove(mouseEvent) {\n    var _a, _b, _c, _d, _e;\n\n    const target = mouseEvent.target;\n\n    if (this._isMouseDown && this._hoverClicked) {\n      return;\n    }\n\n    if (this._isHoverSticky && target.type === 9\n    /* CONTENT_WIDGET */\n    && target.detail === ContentHoverWidget.ID) {\n      // mouse moved on top of content hover widget\n      return;\n    }\n\n    if (this._isHoverSticky && !((_b = (_a = mouseEvent.event.browserEvent.view) === null || _a === void 0 ? void 0 : _a.getSelection()) === null || _b === void 0 ? void 0 : _b.isCollapsed)) {\n      // selected text within content hover widget\n      return;\n    }\n\n    if (!this._isHoverSticky && target.type === 9\n    /* CONTENT_WIDGET */\n    && target.detail === ContentHoverWidget.ID && ((_c = this._contentWidget) === null || _c === void 0 ? void 0 : _c.isColorPickerVisible())) {\n      // though the hover is not sticky, the color picker needs to.\n      return;\n    }\n\n    if (this._isHoverSticky && target.type === 12\n    /* OVERLAY_WIDGET */\n    && target.detail === MarginHoverWidget.ID) {\n      // mouse moved on top of overlay hover widget\n      return;\n    }\n\n    if (!this._isHoverEnabled) {\n      this._hideWidgets();\n\n      return;\n    }\n\n    const contentWidget = this._getOrCreateContentWidget();\n\n    if (contentWidget.maybeShowAt(mouseEvent)) {\n      (_d = this._glyphWidget) === null || _d === void 0 ? void 0 : _d.hide();\n      return;\n    }\n\n    if (target.type === 2\n    /* GUTTER_GLYPH_MARGIN */\n    && target.position) {\n      (_e = this._contentWidget) === null || _e === void 0 ? void 0 : _e.hide();\n\n      if (!this._glyphWidget) {\n        this._glyphWidget = new MarginHoverWidget(this._editor, this._languageService, this._openerService);\n      }\n\n      this._glyphWidget.startShowingAt(target.position.lineNumber);\n\n      return;\n    }\n\n    this._hideWidgets();\n  }\n\n  _onKeyDown(e) {\n    if (e.keyCode !== 5\n    /* Ctrl */\n    && e.keyCode !== 6\n    /* Alt */\n    && e.keyCode !== 57\n    /* Meta */\n    && e.keyCode !== 4\n    /* Shift */\n    ) {\n      // Do not hide hover when a modifier key is pressed\n      this._hideWidgets();\n    }\n  }\n\n  _hideWidgets() {\n    var _a, _b, _c;\n\n    if (this._isMouseDown && this._hoverClicked && ((_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.isColorPickerVisible())) {\n      return;\n    }\n\n    this._hoverClicked = false;\n    (_b = this._glyphWidget) === null || _b === void 0 ? void 0 : _b.hide();\n    (_c = this._contentWidget) === null || _c === void 0 ? void 0 : _c.hide();\n  }\n\n  _getOrCreateContentWidget() {\n    if (!this._contentWidget) {\n      this._contentWidget = this._instantiationService.createInstance(ContentHoverController, this._editor);\n    }\n\n    return this._contentWidget;\n  }\n\n  isColorPickerVisible() {\n    var _a;\n\n    return ((_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.isColorPickerVisible()) || false;\n  }\n\n  showContentHover(range, mode, focus) {\n    this._getOrCreateContentWidget().startShowingAtRange(range, mode, focus);\n  }\n\n  dispose() {\n    var _a, _b;\n\n    this._unhookEvents();\n\n    this._toUnhook.dispose();\n\n    this._didChangeConfigurationHandler.dispose();\n\n    (_a = this._glyphWidget) === null || _a === void 0 ? void 0 : _a.dispose();\n    (_b = this._contentWidget) === null || _b === void 0 ? void 0 : _b.dispose();\n  }\n\n};\nModesHoverController.ID = 'editor.contrib.hover';\nModesHoverController = __decorate([__param(1, IInstantiationService), __param(2, IOpenerService), __param(3, ILanguageService), __param(4, IContextKeyService)], ModesHoverController);\nexport { ModesHoverController };\n\nclass ShowHoverAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.showHover',\n      label: nls.localize({\n        key: 'showHover',\n        comment: ['Label for action that will trigger the showing of a hover in the editor.', 'This allows for users to show the hover without using the mouse.']\n      }, \"Show Hover\"),\n      alias: 'Show Hover',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: KeyChord(2048\n        /* CtrlCmd */\n        | 41\n        /* KeyK */\n        , 2048\n        /* CtrlCmd */\n        | 39\n        /* KeyI */\n        ),\n        weight: 100\n        /* EditorContrib */\n\n      }\n    });\n  }\n\n  run(accessor, editor) {\n    if (!editor.hasModel()) {\n      return;\n    }\n\n    let controller = ModesHoverController.get(editor);\n\n    if (!controller) {\n      return;\n    }\n\n    const position = editor.getPosition();\n    const range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n    const focus = editor.getOption(2\n    /* accessibilitySupport */\n    ) === 2\n    /* Enabled */\n    ;\n    controller.showContentHover(range, 1\n    /* Immediate */\n    , focus);\n  }\n\n}\n\nclass ShowDefinitionPreviewHoverAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.showDefinitionPreviewHover',\n      label: nls.localize({\n        key: 'showDefinitionPreviewHover',\n        comment: ['Label for action that will trigger the showing of definition preview hover in the editor.', 'This allows for users to show the definition preview hover without using the mouse.']\n      }, \"Show Definition Preview Hover\"),\n      alias: 'Show Definition Preview Hover',\n      precondition: undefined\n    });\n  }\n\n  run(accessor, editor) {\n    const controller = ModesHoverController.get(editor);\n\n    if (!controller) {\n      return;\n    }\n\n    const position = editor.getPosition();\n\n    if (!position) {\n      return;\n    }\n\n    const range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n    const goto = GotoDefinitionAtPositionEditorContribution.get(editor);\n\n    if (!goto) {\n      return;\n    }\n\n    const promise = goto.startFindDefinitionFromCursor(position);\n    promise.then(() => {\n      controller.showContentHover(range, 1\n      /* Immediate */\n      , true);\n    });\n  }\n\n}\n\nregisterEditorContribution(ModesHoverController.ID, ModesHoverController);\nregisterEditorAction(ShowHoverAction);\nregisterEditorAction(ShowDefinitionPreviewHoverAction); // theming\n\nregisterThemingParticipant((theme, collector) => {\n  const editorHoverHighlightColor = theme.getColor(editorHoverHighlight);\n\n  if (editorHoverHighlightColor) {\n    collector.addRule(`.monaco-editor .hoverHighlight { background-color: ${editorHoverHighlightColor}; }`);\n  }\n\n  const hoverBackground = theme.getColor(editorHoverBackground);\n\n  if (hoverBackground) {\n    collector.addRule(`.monaco-editor .monaco-hover { background-color: ${hoverBackground}; }`);\n  }\n\n  const hoverBorder = theme.getColor(editorHoverBorder);\n\n  if (hoverBorder) {\n    collector.addRule(`.monaco-editor .monaco-hover { border: 1px solid ${hoverBorder}; }`);\n    collector.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${hoverBorder.transparent(0.5)}; }`);\n    collector.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${hoverBorder.transparent(0.5)}; }`);\n    collector.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${hoverBorder.transparent(0.5)}; }`);\n  }\n\n  const link = theme.getColor(textLinkForeground);\n\n  if (link) {\n    collector.addRule(`.monaco-editor .monaco-hover a { color: ${link}; }`);\n  }\n\n  const linkHover = theme.getColor(textLinkActiveForeground);\n\n  if (linkHover) {\n    collector.addRule(`.monaco-editor .monaco-hover a:hover { color: ${linkHover}; }`);\n  }\n\n  const hoverForeground = theme.getColor(editorHoverForeground);\n\n  if (hoverForeground) {\n    collector.addRule(`.monaco-editor .monaco-hover { color: ${hoverForeground}; }`);\n  }\n\n  const actionsBackground = theme.getColor(editorHoverStatusBarBackground);\n\n  if (actionsBackground) {\n    collector.addRule(`.monaco-editor .monaco-hover .hover-row .actions { background-color: ${actionsBackground}; }`);\n  }\n\n  const codeBackground = theme.getColor(textCodeBlockBackground);\n\n  if (codeBackground) {\n    collector.addRule(`.monaco-editor .monaco-hover code { background-color: ${codeBackground}; }`);\n  }\n});","map":{"version":3,"sources":["/home/joe/DISSY/flask_test_1/react-flask-app/node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/hover.js"],"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","KeyChord","DisposableStore","EditorAction","registerEditorAction","registerEditorContribution","Range","EditorContextKeys","ILanguageService","GotoDefinitionAtPositionEditorContribution","ContentHoverWidget","ContentHoverController","MarginHoverWidget","nls","IContextKeyService","IInstantiationService","IOpenerService","editorHoverBackground","editorHoverBorder","editorHoverForeground","editorHoverHighlight","editorHoverStatusBarBackground","textCodeBlockBackground","textLinkActiveForeground","textLinkForeground","registerThemingParticipant","ModesHoverController","constructor","_editor","_instantiationService","_openerService","_languageService","_contextKeyService","_toUnhook","_isMouseDown","_hoverClicked","_contentWidget","_glyphWidget","_hookEvents","_didChangeConfigurationHandler","onDidChangeConfiguration","e","hasChanged","_unhookEvents","get","editor","getContribution","ID","hideWidgetsEventHandler","_hideWidgets","hoverOpts","getOption","_isHoverEnabled","enabled","_isHoverSticky","sticky","add","onMouseDown","_onEditorMouseDown","onMouseUp","_onEditorMouseUp","onMouseMove","_onEditorMouseMove","onKeyDown","_onKeyDown","onMouseLeave","onDidChangeModel","onDidScrollChange","_onEditorScrollChanged","clear","scrollTopChanged","scrollLeftChanged","mouseEvent","type","detail","_a","_b","_c","_d","_e","event","browserEvent","view","getSelection","isCollapsed","isColorPickerVisible","contentWidget","_getOrCreateContentWidget","maybeShowAt","hide","position","startShowingAt","lineNumber","keyCode","createInstance","showContentHover","range","mode","focus","startShowingAtRange","dispose","ShowHoverAction","id","label","localize","comment","alias","precondition","undefined","kbOpts","kbExpr","editorTextFocus","primary","weight","run","accessor","hasModel","controller","getPosition","column","ShowDefinitionPreviewHoverAction","goto","promise","startFindDefinitionFromCursor","then","theme","collector","editorHoverHighlightColor","getColor","addRule","hoverBackground","hoverBorder","transparent","link","linkHover","hoverForeground","actionsBackground","codeBackground"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageService } from '../../../common/services/language.js';\nimport { GotoDefinitionAtPositionEditorContribution } from '../../gotoSymbol/browser/link/goToDefinitionAtPosition.js';\nimport { ContentHoverWidget, ContentHoverController } from './contentHover.js';\nimport { MarginHoverWidget } from './marginHover.js';\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { editorHoverBackground, editorHoverBorder, editorHoverForeground, editorHoverHighlight, editorHoverStatusBarBackground, textCodeBlockBackground, textLinkActiveForeground, textLinkForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nlet ModesHoverController = class ModesHoverController {\n    constructor(_editor, _instantiationService, _openerService, _languageService, _contextKeyService) {\n        this._editor = _editor;\n        this._instantiationService = _instantiationService;\n        this._openerService = _openerService;\n        this._languageService = _languageService;\n        this._toUnhook = new DisposableStore();\n        this._isMouseDown = false;\n        this._hoverClicked = false;\n        this._contentWidget = null;\n        this._glyphWidget = null;\n        this._hookEvents();\n        this._didChangeConfigurationHandler = this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(53 /* hover */)) {\n                this._unhookEvents();\n                this._hookEvents();\n            }\n        });\n    }\n    static get(editor) {\n        return editor.getContribution(ModesHoverController.ID);\n    }\n    _hookEvents() {\n        const hideWidgetsEventHandler = () => this._hideWidgets();\n        const hoverOpts = this._editor.getOption(53 /* hover */);\n        this._isHoverEnabled = hoverOpts.enabled;\n        this._isHoverSticky = hoverOpts.sticky;\n        if (this._isHoverEnabled) {\n            this._toUnhook.add(this._editor.onMouseDown((e) => this._onEditorMouseDown(e)));\n            this._toUnhook.add(this._editor.onMouseUp((e) => this._onEditorMouseUp(e)));\n            this._toUnhook.add(this._editor.onMouseMove((e) => this._onEditorMouseMove(e)));\n            this._toUnhook.add(this._editor.onKeyDown((e) => this._onKeyDown(e)));\n        }\n        else {\n            this._toUnhook.add(this._editor.onMouseMove((e) => this._onEditorMouseMove(e)));\n            this._toUnhook.add(this._editor.onKeyDown((e) => this._onKeyDown(e)));\n        }\n        this._toUnhook.add(this._editor.onMouseLeave(hideWidgetsEventHandler));\n        this._toUnhook.add(this._editor.onDidChangeModel(hideWidgetsEventHandler));\n        this._toUnhook.add(this._editor.onDidScrollChange((e) => this._onEditorScrollChanged(e)));\n    }\n    _unhookEvents() {\n        this._toUnhook.clear();\n    }\n    _onEditorScrollChanged(e) {\n        if (e.scrollTopChanged || e.scrollLeftChanged) {\n            this._hideWidgets();\n        }\n    }\n    _onEditorMouseDown(mouseEvent) {\n        this._isMouseDown = true;\n        const target = mouseEvent.target;\n        if (target.type === 9 /* CONTENT_WIDGET */ && target.detail === ContentHoverWidget.ID) {\n            this._hoverClicked = true;\n            // mouse down on top of content hover widget\n            return;\n        }\n        if (target.type === 12 /* OVERLAY_WIDGET */ && target.detail === MarginHoverWidget.ID) {\n            // mouse down on top of overlay hover widget\n            return;\n        }\n        if (target.type !== 12 /* OVERLAY_WIDGET */) {\n            this._hoverClicked = false;\n        }\n        this._hideWidgets();\n    }\n    _onEditorMouseUp(mouseEvent) {\n        this._isMouseDown = false;\n    }\n    _onEditorMouseMove(mouseEvent) {\n        var _a, _b, _c, _d, _e;\n        const target = mouseEvent.target;\n        if (this._isMouseDown && this._hoverClicked) {\n            return;\n        }\n        if (this._isHoverSticky && target.type === 9 /* CONTENT_WIDGET */ && target.detail === ContentHoverWidget.ID) {\n            // mouse moved on top of content hover widget\n            return;\n        }\n        if (this._isHoverSticky && !((_b = (_a = mouseEvent.event.browserEvent.view) === null || _a === void 0 ? void 0 : _a.getSelection()) === null || _b === void 0 ? void 0 : _b.isCollapsed)) {\n            // selected text within content hover widget\n            return;\n        }\n        if (!this._isHoverSticky && target.type === 9 /* CONTENT_WIDGET */ && target.detail === ContentHoverWidget.ID\n            && ((_c = this._contentWidget) === null || _c === void 0 ? void 0 : _c.isColorPickerVisible())) {\n            // though the hover is not sticky, the color picker needs to.\n            return;\n        }\n        if (this._isHoverSticky && target.type === 12 /* OVERLAY_WIDGET */ && target.detail === MarginHoverWidget.ID) {\n            // mouse moved on top of overlay hover widget\n            return;\n        }\n        if (!this._isHoverEnabled) {\n            this._hideWidgets();\n            return;\n        }\n        const contentWidget = this._getOrCreateContentWidget();\n        if (contentWidget.maybeShowAt(mouseEvent)) {\n            (_d = this._glyphWidget) === null || _d === void 0 ? void 0 : _d.hide();\n            return;\n        }\n        if (target.type === 2 /* GUTTER_GLYPH_MARGIN */ && target.position) {\n            (_e = this._contentWidget) === null || _e === void 0 ? void 0 : _e.hide();\n            if (!this._glyphWidget) {\n                this._glyphWidget = new MarginHoverWidget(this._editor, this._languageService, this._openerService);\n            }\n            this._glyphWidget.startShowingAt(target.position.lineNumber);\n            return;\n        }\n        this._hideWidgets();\n    }\n    _onKeyDown(e) {\n        if (e.keyCode !== 5 /* Ctrl */ && e.keyCode !== 6 /* Alt */ && e.keyCode !== 57 /* Meta */ && e.keyCode !== 4 /* Shift */) {\n            // Do not hide hover when a modifier key is pressed\n            this._hideWidgets();\n        }\n    }\n    _hideWidgets() {\n        var _a, _b, _c;\n        if ((this._isMouseDown && this._hoverClicked && ((_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.isColorPickerVisible()))) {\n            return;\n        }\n        this._hoverClicked = false;\n        (_b = this._glyphWidget) === null || _b === void 0 ? void 0 : _b.hide();\n        (_c = this._contentWidget) === null || _c === void 0 ? void 0 : _c.hide();\n    }\n    _getOrCreateContentWidget() {\n        if (!this._contentWidget) {\n            this._contentWidget = this._instantiationService.createInstance(ContentHoverController, this._editor);\n        }\n        return this._contentWidget;\n    }\n    isColorPickerVisible() {\n        var _a;\n        return ((_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.isColorPickerVisible()) || false;\n    }\n    showContentHover(range, mode, focus) {\n        this._getOrCreateContentWidget().startShowingAtRange(range, mode, focus);\n    }\n    dispose() {\n        var _a, _b;\n        this._unhookEvents();\n        this._toUnhook.dispose();\n        this._didChangeConfigurationHandler.dispose();\n        (_a = this._glyphWidget) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._contentWidget) === null || _b === void 0 ? void 0 : _b.dispose();\n    }\n};\nModesHoverController.ID = 'editor.contrib.hover';\nModesHoverController = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, IOpenerService),\n    __param(3, ILanguageService),\n    __param(4, IContextKeyService)\n], ModesHoverController);\nexport { ModesHoverController };\nclass ShowHoverAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.showHover',\n            label: nls.localize({\n                key: 'showHover',\n                comment: [\n                    'Label for action that will trigger the showing of a hover in the editor.',\n                    'This allows for users to show the hover without using the mouse.'\n                ]\n            }, \"Show Hover\"),\n            alias: 'Show Hover',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* CtrlCmd */ | 41 /* KeyK */, 2048 /* CtrlCmd */ | 39 /* KeyI */),\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        let controller = ModesHoverController.get(editor);\n        if (!controller) {\n            return;\n        }\n        const position = editor.getPosition();\n        const range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n        const focus = editor.getOption(2 /* accessibilitySupport */) === 2 /* Enabled */;\n        controller.showContentHover(range, 1 /* Immediate */, focus);\n    }\n}\nclass ShowDefinitionPreviewHoverAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.showDefinitionPreviewHover',\n            label: nls.localize({\n                key: 'showDefinitionPreviewHover',\n                comment: [\n                    'Label for action that will trigger the showing of definition preview hover in the editor.',\n                    'This allows for users to show the definition preview hover without using the mouse.'\n                ]\n            }, \"Show Definition Preview Hover\"),\n            alias: 'Show Definition Preview Hover',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        const controller = ModesHoverController.get(editor);\n        if (!controller) {\n            return;\n        }\n        const position = editor.getPosition();\n        if (!position) {\n            return;\n        }\n        const range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n        const goto = GotoDefinitionAtPositionEditorContribution.get(editor);\n        if (!goto) {\n            return;\n        }\n        const promise = goto.startFindDefinitionFromCursor(position);\n        promise.then(() => {\n            controller.showContentHover(range, 1 /* Immediate */, true);\n        });\n    }\n}\nregisterEditorContribution(ModesHoverController.ID, ModesHoverController);\nregisterEditorAction(ShowHoverAction);\nregisterEditorAction(ShowDefinitionPreviewHoverAction);\n// theming\nregisterThemingParticipant((theme, collector) => {\n    const editorHoverHighlightColor = theme.getColor(editorHoverHighlight);\n    if (editorHoverHighlightColor) {\n        collector.addRule(`.monaco-editor .hoverHighlight { background-color: ${editorHoverHighlightColor}; }`);\n    }\n    const hoverBackground = theme.getColor(editorHoverBackground);\n    if (hoverBackground) {\n        collector.addRule(`.monaco-editor .monaco-hover { background-color: ${hoverBackground}; }`);\n    }\n    const hoverBorder = theme.getColor(editorHoverBorder);\n    if (hoverBorder) {\n        collector.addRule(`.monaco-editor .monaco-hover { border: 1px solid ${hoverBorder}; }`);\n        collector.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${hoverBorder.transparent(0.5)}; }`);\n        collector.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${hoverBorder.transparent(0.5)}; }`);\n        collector.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${hoverBorder.transparent(0.5)}; }`);\n    }\n    const link = theme.getColor(textLinkForeground);\n    if (link) {\n        collector.addRule(`.monaco-editor .monaco-hover a { color: ${link}; }`);\n    }\n    const linkHover = theme.getColor(textLinkActiveForeground);\n    if (linkHover) {\n        collector.addRule(`.monaco-editor .monaco-hover a:hover { color: ${linkHover}; }`);\n    }\n    const hoverForeground = theme.getColor(editorHoverForeground);\n    if (hoverForeground) {\n        collector.addRule(`.monaco-editor .monaco-hover { color: ${hoverForeground}; }`);\n    }\n    const actionsBackground = theme.getColor(editorHoverStatusBarBackground);\n    if (actionsBackground) {\n        collector.addRule(`.monaco-editor .monaco-hover .hover-row .actions { background-color: ${actionsBackground}; }`);\n    }\n    const codeBackground = theme.getColor(textCodeBlockBackground);\n    if (codeBackground) {\n        collector.addRule(`.monaco-editor .monaco-hover code { background-color: ${codeBackground}; }`);\n    }\n});\n"]},"metadata":{},"sourceType":"module"}